"use strict";var kN=Object.create;var gi=Object.defineProperty;var FN=Object.getOwnPropertyDescriptor;var UN=Object.getOwnPropertyNames;var LN=Object.getPrototypeOf,jN=Object.prototype.hasOwnProperty;var BN=(e,t,r)=>t in e?gi(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var y=(e,t)=>()=>(e&&(t=e(e=0)),t);var w=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),ct=(e,t)=>{for(var r in t)gi(e,r,{get:t[r],enumerable:!0})},Bg=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of UN(t))!jN.call(e,o)&&o!==r&&gi(e,o,{get:()=>t[o],enumerable:!(n=FN(t,o))||n.enumerable});return e};var v=(e,t,r)=>(r=e!=null?kN(LN(e)):{},Bg(t||!e||!e.__esModule?gi(r,"default",{value:e,enumerable:!0}):r,e)),H=e=>Bg(gi({},"__esModule",{value:!0}),e);var _=(e,t,r)=>BN(e,typeof t!="symbol"?t+"":t,r);var oc=w(J=>{"use strict";Object.defineProperty(J,"__esModule",{value:!0});J.TextApiResponse=J.BlobApiResponse=J.VoidApiResponse=J.JSONApiResponse=J.COLLECTION_FORMATS=J.RequiredError=J.FetchError=J.ResponseError=J.BaseAPI=J.DefaultConfig=J.Configuration=J.BASE_PATH=void 0;J.querystring=Yl;J.exists=qN;J.mapValues=zN;J.canConsumeForm=VN;J.BASE_PATH="http://localhost".replace(/\/+$/,"");var ec=class{constructor(t={}){this.configuration=t}set config(t){this.configuration=t}get basePath(){return this.configuration.basePath!=null?this.configuration.basePath:J.BASE_PATH}get fetchApi(){return this.configuration.fetchApi}get middleware(){return this.configuration.middleware||[]}get queryParamsStringify(){return this.configuration.queryParamsStringify||Yl}get username(){return this.configuration.username}get password(){return this.configuration.password}get apiKey(){let t=this.configuration.apiKey;if(t)return typeof t=="function"?t:()=>t}get accessToken(){let t=this.configuration.accessToken;if(t)return typeof t=="function"?t:async()=>t}get headers(){return this.configuration.headers}get credentials(){return this.configuration.credentials}};J.Configuration=ec;J.DefaultConfig=new ec;var tc=class e{constructor(t=J.DefaultConfig){this.configuration=t,this.fetchApi=async(r,n)=>{let o={url:r,init:n};for(let i of this.middleware)i.pre&&(o=await i.pre({fetch:this.fetchApi,...o})||o);let s;try{s=await(this.configuration.fetchApi||fetch)(o.url,o.init)}catch(i){for(let a of this.middleware)a.onError&&(s=await a.onError({fetch:this.fetchApi,url:o.url,init:o.init,error:i,response:s?s.clone():void 0})||s);if(s===void 0)throw i instanceof Error?new nc(i,"The request failed and the interceptors did not return an alternative response"):i}for(let i of this.middleware)i.post&&(s=await i.post({fetch:this.fetchApi,url:o.url,init:o.init,response:s.clone()})||s);return s},this.middleware=t.middleware}withMiddleware(...t){let r=this.clone();return r.middleware=r.middleware.concat(...t),r}withPreMiddleware(...t){let r=t.map(n=>({pre:n}));return this.withMiddleware(...r)}withPostMiddleware(...t){let r=t.map(n=>({post:n}));return this.withMiddleware(...r)}isJsonMime(t){return t?e.jsonRegex.test(t):!1}async request(t,r){let{url:n,init:o}=await this.createFetchParams(t,r),s=await this.fetchApi(n,o);if(s&&s.status>=200&&s.status<300)return s;throw new rc(s,"Response returned an error code")}async createFetchParams(t,r){let n=this.configuration.basePath+t.path;t.query!==void 0&&Object.keys(t.query).length!==0&&(n+="?"+this.configuration.queryParamsStringify(t.query));let o=Object.assign({},this.configuration.headers,t.headers);Object.keys(o).forEach(l=>o[l]===void 0?delete o[l]:{});let s=typeof r=="function"?r:async()=>r,i={method:t.method,headers:o,body:t.body,credentials:this.configuration.credentials},a={...i,...await s({init:i,context:t})},c;HN(a.body)||a.body instanceof URLSearchParams||$N(a.body)?c=a.body:this.isJsonMime(o["Content-Type"])?c=JSON.stringify(a.body):c=a.body;let d={...a,body:c};return{url:n,init:d}}clone(){let t=this.constructor,r=new t(this.configuration);return r.middleware=this.middleware.slice(),r}};J.BaseAPI=tc;tc.jsonRegex=new RegExp("^(:?application/json|[^;/ 	]+/[^;/ 	]+[+]json)[ 	]*(:?;.*)?$","i");function $N(e){return typeof Blob<"u"&&e instanceof Blob}function HN(e){return typeof FormData<"u"&&e instanceof FormData}var rc=class extends Error{constructor(t,r){super(r),this.response=t,this.name="ResponseError"}};J.ResponseError=rc;var nc=class extends Error{constructor(t,r){super(r),this.cause=t,this.name="FetchError"}};J.FetchError=nc;var Vl=class extends Error{constructor(t,r){super(r),this.field=t,this.name="RequiredError"}};J.RequiredError=Vl;J.COLLECTION_FORMATS={csv:",",ssv:" ",tsv:"	",pipes:"|"};function Yl(e,t=""){return Object.keys(e).map(r=>$g(r,e[r],t)).filter(r=>r.length>0).join("&")}function $g(e,t,r=""){let n=r+(r.length?`[${e}]`:e);if(t instanceof Array){let o=t.map(s=>encodeURIComponent(String(s))).join(`&${encodeURIComponent(n)}=`);return`${encodeURIComponent(n)}=${o}`}if(t instanceof Set){let o=Array.from(t);return $g(e,o,r)}return t instanceof Date?`${encodeURIComponent(n)}=${encodeURIComponent(t.toISOString())}`:t instanceof Object?Yl(t,n):`${encodeURIComponent(n)}=${encodeURIComponent(String(t))}`}function qN(e,t){let r=e[t];return r!=null}function zN(e,t){return Object.keys(e).reduce((r,n)=>({...r,[n]:t(e[n])}),{})}function VN(e){for(let t of e)if(t.contentType==="multipart/form-data")return!0;return!1}var Kl=class{constructor(t,r=n=>n){this.raw=t,this.transformer=r}async value(){return this.transformer(await this.raw.json())}};J.JSONApiResponse=Kl;var Gl=class{constructor(t){this.raw=t}async value(){}};J.VoidApiResponse=Gl;var Wl=class{constructor(t){this.raw=t}async value(){return await this.raw.blob()}};J.BlobApiResponse=Wl;var Jl=class{constructor(t){this.raw=t}async value(){return await this.raw.text()}};J.TextApiResponse=Jl});var zg=w(Lt=>{"use strict";Object.defineProperty(Lt,"__esModule",{value:!0});Lt.ApprovalRequestStatusEnum=void 0;Lt.instanceOfApprovalRequest=KN;Lt.ApprovalRequestFromJSON=GN;Lt.ApprovalRequestFromJSONTyped=Hg;Lt.ApprovalRequestToJSON=WN;Lt.ApprovalRequestToJSONTyped=qg;Lt.ApprovalRequestStatusEnum={Pending:"pending",Approved:"approved",Rejected:"rejected"};function KN(e){return!(!("agentId"in e)||e.agentId===void 0||!("runId"in e)||e.runId===void 0||!("summary"in e)||e.summary===void 0||!("modifications"in e)||e.modifications===void 0||!("capability"in e)||e.capability===void 0||!("request"in e)||e.request===void 0)}function GN(e){return Hg(e,!1)}function Hg(e,t){return e==null?e:{id:e.id==null?void 0:e.id,agentId:e.agentId,runId:e.runId,status:e.status==null?void 0:e.status,summary:e.summary,modifications:e.modifications,capability:e.capability,request:e.request,createdAt:e.createdAt==null?void 0:e.createdAt,updatedAt:e.updatedAt==null?void 0:e.updatedAt}}function WN(e){return qg(e,!1)}function qg(e,t=!1){return e==null?e:{agentId:e.agentId,runId:e.runId,status:e.status,summary:e.summary,modifications:e.modifications,capability:e.capability,request:e.request}}});var Gg=w(Hr=>{"use strict";Object.defineProperty(Hr,"__esModule",{value:!0});Hr.instanceOfV1ApprovalsGet404Response=JN;Hr.V1ApprovalsGet404ResponseFromJSON=YN;Hr.V1ApprovalsGet404ResponseFromJSONTyped=Vg;Hr.V1ApprovalsGet404ResponseToJSON=XN;Hr.V1ApprovalsGet404ResponseToJSONTyped=Kg;function JN(e){return!(!("error"in e)||e.error===void 0||!("message"in e)||e.message===void 0||!("statusCode"in e)||e.statusCode===void 0||!("timestamp"in e)||e.timestamp===void 0)}function YN(e){return Vg(e,!1)}function Vg(e,t){return e==null?e:{error:e.error,message:e.message,statusCode:e.statusCode,timestamp:new Date(e.timestamp),path:e.path==null?void 0:e.path,details:e.details==null?void 0:e.details}}function XN(e){return Kg(e,!1)}function Kg(e,t=!1){return e==null?e:{error:e.error,message:e.message,statusCode:e.statusCode,timestamp:e.timestamp.toISOString(),path:e.path,details:e.details}}});var Yg=w(jt=>{"use strict";Object.defineProperty(jt,"__esModule",{value:!0});jt.V1ApprovalsIdPutRequestStatusEnum=void 0;jt.instanceOfV1ApprovalsIdPutRequest=QN;jt.V1ApprovalsIdPutRequestFromJSON=ZN;jt.V1ApprovalsIdPutRequestFromJSONTyped=Wg;jt.V1ApprovalsIdPutRequestToJSON=eD;jt.V1ApprovalsIdPutRequestToJSONTyped=Jg;jt.V1ApprovalsIdPutRequestStatusEnum={Pending:"pending",Approved:"approved",Rejected:"rejected"};function QN(e){return!0}function ZN(e){return Wg(e,!1)}function Wg(e,t){return e==null?e:{status:e.status==null?void 0:e.status,modifications:e.modifications==null?void 0:e.modifications}}function eD(e){return Jg(e,!1)}function Jg(e,t=!1){return e==null?e:{status:e.status,modifications:e.modifications}}});var Zg=w(qr=>{"use strict";Object.defineProperty(qr,"__esModule",{value:!0});qr.instanceOfV1TriggersPost200Response=tD;qr.V1TriggersPost200ResponseFromJSON=rD;qr.V1TriggersPost200ResponseFromJSONTyped=Xg;qr.V1TriggersPost200ResponseToJSON=nD;qr.V1TriggersPost200ResponseToJSONTyped=Qg;function tD(e){return!(!("executionIds"in e)||e.executionIds===void 0)}function rD(e){return Xg(e,!1)}function Xg(e,t){return e==null?e:{executionIds:e.executionIds}}function nD(e){return Qg(e,!1)}function Qg(e,t=!1){return e==null?e:{executionIds:e.executionIds}}});var ry=w(dt=>{"use strict";Object.defineProperty(dt,"__esModule",{value:!0});dt.V1TriggersPostRequestTriggerTypeEnum=dt.V1TriggersPostRequestEventTypeEnum=void 0;dt.instanceOfV1TriggersPostRequest=oD;dt.V1TriggersPostRequestFromJSON=sD;dt.V1TriggersPostRequestFromJSONTyped=ey;dt.V1TriggersPostRequestToJSON=iD;dt.V1TriggersPostRequestToJSONTyped=ty;dt.V1TriggersPostRequestEventTypeEnum={RunIntent:"run_intent"};dt.V1TriggersPostRequestTriggerTypeEnum={Manual:"manual",Scheduled:"scheduled",Api:"api"};function oD(e){return!(!("eventType"in e)||e.eventType===void 0||!("runId"in e)||e.runId===void 0||!("graphId"in e)||e.graphId===void 0||!("orgId"in e)||e.orgId===void 0||!("triggerType"in e)||e.triggerType===void 0||!("payload"in e)||e.payload===void 0)}function sD(e){return ey(e,!1)}function ey(e,t){return e==null?e:{eventType:e.event_type,runId:e.run_id,graphId:e.graph_id,orgId:e.org_id,triggerType:e.trigger_type,payload:e.payload}}function iD(e){return ty(e,!1)}function ty(e,t=!1){return e==null?e:{event_type:e.eventType,run_id:e.runId,graph_id:e.graphId,org_id:e.orgId,trigger_type:e.triggerType,payload:e.payload}}});var sc=w(ut=>{"use strict";var aD=ut&&ut.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),yi=ut&&ut.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&aD(t,e,r)};Object.defineProperty(ut,"__esModule",{value:!0});yi(zg(),ut);yi(Gg(),ut);yi(Yg(),ut);yi(Zg(),ut);yi(ry(),ut)});var ny=w(Ke=>{"use strict";var cD=Ke&&Ke.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),dD=Ke&&Ke.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),uD=Ke&&Ke.__importStar||function(){var e=function(t){return e=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},e(t)};return function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var n=e(t),o=0;o<n.length;o++)n[o]!=="default"&&cD(r,t,n[o]);return dD(r,t),r}}();Object.defineProperty(Ke,"__esModule",{value:!0});Ke.V1ApprovalsGetStatusEnum=Ke.ApprovalsApi=void 0;var zr=uD(oc()),oo=sc(),Xl=class extends zr.BaseAPI{async v1ApprovalsGetRaw(t,r){let n={};t.status!=null&&(n.status=t.status);let o={},s=await this.request({path:"/v1/approvals",method:"GET",headers:o,query:n},r);return new zr.JSONApiResponse(s,i=>i.map(oo.ApprovalRequestFromJSON))}async v1ApprovalsGet(t={},r){return await(await this.v1ApprovalsGetRaw(t,r)).value()}async v1ApprovalsIdGetRaw(t,r){if(t.id==null)throw new zr.RequiredError("id",'Required parameter "id" was null or undefined when calling v1ApprovalsIdGet().');let n={},o={},s=await this.request({path:"/v1/approvals/{id}".replace("{id}",encodeURIComponent(String(t.id))),method:"GET",headers:o,query:n},r);return new zr.JSONApiResponse(s,i=>(0,oo.ApprovalRequestFromJSON)(i))}async v1ApprovalsIdGet(t,r){return await(await this.v1ApprovalsIdGetRaw(t,r)).value()}async v1ApprovalsIdPutRaw(t,r){if(t.id==null)throw new zr.RequiredError("id",'Required parameter "id" was null or undefined when calling v1ApprovalsIdPut().');let n={},o={};o["Content-Type"]="application/json";let s=await this.request({path:"/v1/approvals/{id}".replace("{id}",encodeURIComponent(String(t.id))),method:"PUT",headers:o,query:n,body:(0,oo.V1ApprovalsIdPutRequestToJSON)(t.v1ApprovalsIdPutRequest)},r);return new zr.JSONApiResponse(s,i=>(0,oo.ApprovalRequestFromJSON)(i))}async v1ApprovalsIdPut(t,r){return await(await this.v1ApprovalsIdPutRaw(t,r)).value()}async v1ApprovalsPostRaw(t,r){let n={},o={};o["Content-Type"]="application/json";let s=await this.request({path:"/v1/approvals",method:"POST",headers:o,query:n,body:(0,oo.ApprovalRequestToJSON)(t.approvalRequest)},r);return new zr.JSONApiResponse(s,i=>(0,oo.ApprovalRequestFromJSON)(i))}async v1ApprovalsPost(t={},r){return await(await this.v1ApprovalsPostRaw(t,r)).value()}};Ke.ApprovalsApi=Xl;Ke.V1ApprovalsGetStatusEnum={Pending:"pending",Approved:"approved",Rejected:"rejected"}});var sy=w(gt=>{"use strict";var lD=gt&&gt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),pD=gt&&gt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),mD=gt&&gt.__importStar||function(){var e=function(t){return e=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},e(t)};return function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var n=e(t),o=0;o<n.length;o++)n[o]!=="default"&&lD(r,t,n[o]);return pD(r,t),r}}();Object.defineProperty(gt,"__esModule",{value:!0});gt.TriggersApi=void 0;var Ql=mD(oc()),oy=sc(),Zl=class extends Ql.BaseAPI{async v1TriggersPostRaw(t,r){if(t.v1TriggersPostRequest==null)throw new Ql.RequiredError("v1TriggersPostRequest",'Required parameter "v1TriggersPostRequest" was null or undefined when calling v1TriggersPost().');let n={},o={};o["Content-Type"]="application/json";let s=await this.request({path:"/v1/triggers",method:"POST",headers:o,query:n,body:(0,oy.V1TriggersPostRequestToJSON)(t.v1TriggersPostRequest)},r);return new Ql.JSONApiResponse(s,i=>(0,oy.V1TriggersPost200ResponseFromJSON)(i))}async v1TriggersPost(t,r){return await(await this.v1TriggersPostRaw(t,r)).value()}};gt.TriggersApi=Zl});var ay=w(or=>{"use strict";var fD=or&&or.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),iy=or&&or.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&fD(t,e,r)};Object.defineProperty(or,"__esModule",{value:!0});iy(ny(),or);iy(sy(),or)});var cy=w(Bt=>{"use strict";var hD=Bt&&Bt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),ep=Bt&&Bt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&hD(t,e,r)};Object.defineProperty(Bt,"__esModule",{value:!0});ep(oc(),Bt);ep(ay(),Bt);ep(sc(),Bt)});var yt=w((Z5,yy)=>{var ic=Object.defineProperty,gD=Object.getOwnPropertyDescriptor,yD=Object.getOwnPropertyNames,_D=Object.prototype.hasOwnProperty,ac=(e,t)=>ic(e,"name",{value:t,configurable:!0}),SD=(e,t)=>{for(var r in t)ic(e,r,{get:t[r],enumerable:!0})},ED=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of yD(t))!_D.call(e,o)&&o!==r&&ic(e,o,{get:()=>t[o],enumerable:!(n=gD(t,o))||n.enumerable});return e},vD=e=>ED(ic({},"__esModule",{value:!0}),e),dy={};SD(dy,{AlgorithmId:()=>my,EndpointURLScheme:()=>py,FieldPosition:()=>fy,HttpApiKeyAuthLocation:()=>ly,HttpAuthLocation:()=>uy,IniSectionType:()=>hy,RequestHandlerProtocol:()=>gy,SMITHY_CONTEXT_KEY:()=>xD,getDefaultClientConfiguration:()=>CD,resolveDefaultRuntimeConfig:()=>PD});yy.exports=vD(dy);var uy=(e=>(e.HEADER="header",e.QUERY="query",e))(uy||{}),ly=(e=>(e.HEADER="header",e.QUERY="query",e))(ly||{}),py=(e=>(e.HTTP="http",e.HTTPS="https",e))(py||{}),my=(e=>(e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256",e))(my||{}),wD=ac(e=>{let t=[];return e.sha256!==void 0&&t.push({algorithmId:()=>"sha256",checksumConstructor:()=>e.sha256}),e.md5!=null&&t.push({algorithmId:()=>"md5",checksumConstructor:()=>e.md5}),{addChecksumAlgorithm(r){t.push(r)},checksumAlgorithms(){return t}}},"getChecksumConfiguration"),bD=ac(e=>{let t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t},"resolveChecksumRuntimeConfig"),CD=ac(e=>wD(e),"getDefaultClientConfiguration"),PD=ac(e=>bD(e),"resolveDefaultRuntimeConfig"),fy=(e=>(e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER",e))(fy||{}),xD="__smithy_context",hy=(e=>(e.PROFILE="profile",e.SSO_SESSION="sso-session",e.SERVICES="services",e))(hy||{}),gy=(e=>(e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0",e))(gy||{})});var se=w((eJ,wy)=>{var cc=Object.defineProperty,TD=Object.getOwnPropertyDescriptor,RD=Object.getOwnPropertyNames,AD=Object.prototype.hasOwnProperty,ir=(e,t)=>cc(e,"name",{value:t,configurable:!0}),OD=(e,t)=>{for(var r in t)cc(e,r,{get:t[r],enumerable:!0})},ID=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of RD(t))!AD.call(e,o)&&o!==r&&cc(e,o,{get:()=>t[o],enumerable:!(n=TD(t,o))||n.enumerable});return e},ND=e=>ID(cc({},"__esModule",{value:!0}),e),_y={};OD(_y,{Field:()=>kD,Fields:()=>FD,HttpRequest:()=>UD,HttpResponse:()=>LD,IHttpRequest:()=>Sy.HttpRequest,getHttpHandlerExtensionConfiguration:()=>DD,isValidHostname:()=>vy,resolveHttpHandlerRuntimeConfig:()=>MD});wy.exports=ND(_y);var DD=ir(e=>({setHttpHandler(t){e.httpHandler=t},httpHandler(){return e.httpHandler},updateHttpClientConfig(t,r){e.httpHandler?.updateHttpClientConfig(t,r)},httpHandlerConfigs(){return e.httpHandler.httpHandlerConfigs()}}),"getHttpHandlerExtensionConfiguration"),MD=ir(e=>({httpHandler:e.httpHandler()}),"resolveHttpHandlerRuntimeConfig"),Sy=yt(),so,kD=(so=class{constructor({name:t,kind:r=Sy.FieldPosition.HEADER,values:n=[]}){this.name=t,this.kind=r,this.values=n}add(t){this.values.push(t)}set(t){this.values=t}remove(t){this.values=this.values.filter(r=>r!==t)}toString(){return this.values.map(t=>t.includes(",")||t.includes(" ")?`"${t}"`:t).join(", ")}get(){return this.values}},ir(so,"Field"),so),io,FD=(io=class{constructor({fields:t=[],encoding:r="utf-8"}){this.entries={},t.forEach(this.setField.bind(this)),this.encoding=r}setField(t){this.entries[t.name.toLowerCase()]=t}getField(t){return this.entries[t.toLowerCase()]}removeField(t){delete this.entries[t.toLowerCase()]}getByType(t){return Object.values(this.entries).filter(r=>r.kind===t)}},ir(io,"Fields"),io),sr,UD=(sr=class{constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/",this.username=t.username,this.password=t.password,this.fragment=t.fragment}static clone(t){let r=new sr({...t,headers:{...t.headers}});return r.query&&(r.query=Ey(r.query)),r}static isInstance(t){if(!t)return!1;let r=t;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){return sr.clone(this)}},ir(sr,"HttpRequest"),sr);function Ey(e){return Object.keys(e).reduce((t,r)=>{let n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{})}ir(Ey,"cloneQuery");var ao,LD=(ao=class{constructor(t){this.statusCode=t.statusCode,this.reason=t.reason,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;let r=t;return typeof r.statusCode=="number"&&typeof r.headers=="object"}},ir(ao,"HttpResponse"),ao);function vy(e){return/^[a-z0-9][a-z0-9\.\-]*[a-z0-9]$/.test(e)}ir(vy,"isValidHostname")});var _i=w((tJ,Ty)=>{"use strict";var uc=Object.defineProperty,jD=Object.getOwnPropertyDescriptor,BD=Object.getOwnPropertyNames,$D=Object.prototype.hasOwnProperty,dc=(e,t)=>uc(e,"name",{value:t,configurable:!0}),HD=(e,t)=>{for(var r in t)uc(e,r,{get:t[r],enumerable:!0})},qD=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of BD(t))!$D.call(e,o)&&o!==r&&uc(e,o,{get:()=>t[o],enumerable:!(n=jD(t,o))||n.enumerable});return e},zD=e=>qD(uc({},"__esModule",{value:!0}),e),by={};HD(by,{getHostHeaderPlugin:()=>KD,hostHeaderMiddleware:()=>Py,hostHeaderMiddlewareOptions:()=>xy,resolveHostHeaderConfig:()=>Cy});Ty.exports=zD(by);var VD=se();function Cy(e){return e}dc(Cy,"resolveHostHeaderConfig");var Py=dc(e=>t=>async r=>{if(!VD.HttpRequest.isInstance(r.request))return t(r);let{request:n}=r,{handlerProtocol:o=""}=e.requestHandler.metadata||{};if(o.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]=n.hostname+(n.port?":"+n.port:"");else if(!n.headers.host){let s=n.hostname;n.port!=null&&(s+=`:${n.port}`),n.headers.host=s}return t(r)},"hostHeaderMiddleware"),xy={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},KD=dc(e=>({applyToStack:dc(t=>{t.add(Py(e),xy)},"applyToStack")}),"getHostHeaderPlugin")});var Si=w((rJ,Iy)=>{"use strict";var lc=Object.defineProperty,GD=Object.getOwnPropertyDescriptor,WD=Object.getOwnPropertyNames,JD=Object.prototype.hasOwnProperty,tp=(e,t)=>lc(e,"name",{value:t,configurable:!0}),YD=(e,t)=>{for(var r in t)lc(e,r,{get:t[r],enumerable:!0})},XD=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of WD(t))!JD.call(e,o)&&o!==r&&lc(e,o,{get:()=>t[o],enumerable:!(n=GD(t,o))||n.enumerable});return e},QD=e=>XD(lc({},"__esModule",{value:!0}),e),Ry={};YD(Ry,{getLoggerPlugin:()=>ZD,loggerMiddleware:()=>Ay,loggerMiddlewareOptions:()=>Oy});Iy.exports=QD(Ry);var Ay=tp(()=>(e,t)=>async r=>{try{let n=await e(r),{clientName:o,commandName:s,logger:i,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:c,overrideOutputFilterSensitiveLog:d}=a,l=c??t.inputFilterSensitiveLog,u=d??t.outputFilterSensitiveLog,{$metadata:p,...h}=n.output;return i?.info?.({clientName:o,commandName:s,input:l(r.input),output:u(h),metadata:p}),n}catch(n){let{clientName:o,commandName:s,logger:i,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:c}=a,d=c??t.inputFilterSensitiveLog;throw i?.error?.({clientName:o,commandName:s,input:d(r.input),error:n,metadata:n.$metadata}),n}},"loggerMiddleware"),Oy={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},ZD=tp(e=>({applyToStack:tp(t=>{t.add(Ay(),Oy)},"applyToStack")}),"getLoggerPlugin")});var Ei=w((nJ,ky)=>{"use strict";var mc=Object.defineProperty,eM=Object.getOwnPropertyDescriptor,tM=Object.getOwnPropertyNames,rM=Object.prototype.hasOwnProperty,pc=(e,t)=>mc(e,"name",{value:t,configurable:!0}),nM=(e,t)=>{for(var r in t)mc(e,r,{get:t[r],enumerable:!0})},oM=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of tM(t))!rM.call(e,o)&&o!==r&&mc(e,o,{get:()=>t[o],enumerable:!(n=eM(t,o))||n.enumerable});return e},sM=e=>oM(mc({},"__esModule",{value:!0}),e),Ny={};nM(Ny,{addRecursionDetectionMiddlewareOptions:()=>My,getRecursionDetectionPlugin:()=>dM,recursionDetectionMiddleware:()=>Dy});ky.exports=sM(Ny);var iM=se(),rp="X-Amzn-Trace-Id",aM="AWS_LAMBDA_FUNCTION_NAME",cM="_X_AMZN_TRACE_ID",Dy=pc(e=>t=>async r=>{let{request:n}=r;if(!iM.HttpRequest.isInstance(n)||e.runtime!=="node")return t(r);let o=Object.keys(n.headers??{}).find(c=>c.toLowerCase()===rp.toLowerCase())??rp;if(n.headers.hasOwnProperty(o))return t(r);let s=process.env[aM],i=process.env[cM],a=pc(c=>typeof c=="string"&&c.length>0,"nonEmptyString");return a(s)&&a(i)&&(n.headers[rp]=i),t({...r,request:n})},"recursionDetectionMiddleware"),My={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},dM=pc(e=>({applyToStack:pc(t=>{t.add(Dy(e),My)},"applyToStack")}),"getRecursionDetectionPlugin")});var np,uM,Fy=y(()=>{np=v(yt()),uM=e=>e[np.SMITHY_CONTEXT_KEY]||(e[np.SMITHY_CONTEXT_KEY]={})});var He=w((sJ,By)=>{var fc=Object.defineProperty,lM=Object.getOwnPropertyDescriptor,pM=Object.getOwnPropertyNames,mM=Object.prototype.hasOwnProperty,Ly=(e,t)=>fc(e,"name",{value:t,configurable:!0}),fM=(e,t)=>{for(var r in t)fc(e,r,{get:t[r],enumerable:!0})},hM=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of pM(t))!mM.call(e,o)&&o!==r&&fc(e,o,{get:()=>t[o],enumerable:!(n=lM(t,o))||n.enumerable});return e},gM=e=>hM(fc({},"__esModule",{value:!0}),e),jy={};fM(jy,{getSmithyContext:()=>yM,normalizeProvider:()=>_M});By.exports=gM(jy);var Uy=yt(),yM=Ly(e=>e[Uy.SMITHY_CONTEXT_KEY]||(e[Uy.SMITHY_CONTEXT_KEY]={}),"getSmithyContext"),_M=Ly(e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t},"normalizeProvider")});var $y,Hy=y(()=>{$y=(e,t)=>{if(!t||t.length===0)return e;let r=[];for(let n of t)for(let o of e)o.schemeId.split("#")[1]===n&&r.push(o);for(let n of e)r.find(({schemeId:o})=>o===n.schemeId)||r.push(n);return r}});function SM(e){let t=new Map;for(let r of e)t.set(r.schemeId,r);return t}var aJ,qy,vi,hc=y(()=>{aJ=v(yt()),qy=v(He());Hy();vi=(e,t)=>(r,n)=>async o=>{let s=e.httpAuthSchemeProvider(await t.httpAuthSchemeParametersProvider(e,n,o.input)),i=e.authSchemePreference?await e.authSchemePreference():[],a=$y(s,i),c=SM(e.httpAuthSchemes),d=(0,qy.getSmithyContext)(n),l=[];for(let u of a){let p=c.get(u.schemeId);if(!p){l.push(`HttpAuthScheme \`${u.schemeId}\` was not enabled for this service.`);continue}let h=p.identityProvider(await t.identityProviderConfigProvider(e));if(!h){l.push(`HttpAuthScheme \`${u.schemeId}\` did not have an IdentityProvider configured.`);continue}let{identityProperties:g={},signingProperties:S={}}=u.propertiesExtractor?.(e,n)||{};u.identityProperties=Object.assign(u.identityProperties||{},g),u.signingProperties=Object.assign(u.signingProperties||{},S),d.selectedHttpAuthScheme={httpAuthOption:u,identity:await h(u.identityProperties),signer:p.signer};break}if(!d.selectedHttpAuthScheme)throw new Error(l.join(`
`));return r(o)}});var zy,wi,Vy=y(()=>{hc();zy={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:"endpointV2Middleware"},wi=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(vi(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r}),zy)}})});var ar=w((mJ,Qy)=>{var gc=Object.defineProperty,EM=Object.getOwnPropertyDescriptor,vM=Object.getOwnPropertyNames,wM=Object.prototype.hasOwnProperty,yc=(e,t)=>gc(e,"name",{value:t,configurable:!0}),bM=(e,t)=>{for(var r in t)gc(e,r,{get:t[r],enumerable:!0})},CM=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of vM(t))!wM.call(e,o)&&o!==r&&gc(e,o,{get:()=>t[o],enumerable:!(n=EM(t,o))||n.enumerable});return e},PM=e=>CM(gc({},"__esModule",{value:!0}),e),Ky={};bM(Ky,{deserializerMiddleware:()=>Gy,deserializerMiddlewareOption:()=>Jy,getSerdePlugin:()=>Xy,serializerMiddleware:()=>Wy,serializerMiddlewareOption:()=>Yy});Qy.exports=PM(Ky);var xM=se(),Gy=yc((e,t)=>(r,n)=>async o=>{let{response:s}=await r(o);try{let i=await t(s,e);return{response:s,output:i}}catch(i){if(Object.defineProperty(i,"$response",{value:s}),!("$metadata"in i)){let a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";try{i.message+=`
  `+a}catch{!n.logger||n.logger?.constructor?.name==="NoOpLogger"?console.warn(a):n.logger?.warn?.(a)}typeof i.$responseBodyText<"u"&&i.$response&&(i.$response.body=i.$responseBodyText);try{if(xM.HttpResponse.isInstance(s)){let{headers:c={}}=s,d=Object.entries(c);i.$metadata={httpStatusCode:s.statusCode,requestId:op(/^x-[\w-]+-request-?id$/,d),extendedRequestId:op(/^x-[\w-]+-id-2$/,d),cfId:op(/^x-[\w-]+-cf-id$/,d)}}}catch{}}throw i}},"deserializerMiddleware"),op=yc((e,t)=>(t.find(([r])=>r.match(e))||[void 0,void 0])[1],"findHeader"),Wy=yc((e,t)=>(r,n)=>async o=>{let s=e,i=n.endpointV2?.url&&s.urlParser?async()=>s.urlParser(n.endpointV2.url):s.endpoint;if(!i)throw new Error("No valid endpoint provider available.");let a=await t(o.input,{...e,endpoint:i});return r({...o,request:a})},"serializerMiddleware"),Jy={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Yy={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function Xy(e,t,r){return{applyToStack:n=>{n.add(Gy(e,r),Jy),n.add(Wy(e,t),Yy)}}}yc(Xy,"getSerdePlugin")});var Zy,e_,TM,t_=y(()=>{Zy=v(ar());hc();e_={step:"serialize",tags:["HTTP_AUTH_SCHEME"],name:"httpAuthSchemeMiddleware",override:!0,relation:"before",toMiddleware:Zy.serializerMiddlewareOption.name},TM=(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r})=>({applyToStack:n=>{n.addRelativeTo(vi(e,{httpAuthSchemeParametersProvider:t,identityProviderConfigProvider:r}),e_)}})});var r_=y(()=>{hc();Vy();t_()});var n_,EJ,o_,RM,AM,sp,ip=y(()=>{n_=v(se()),EJ=v(yt()),o_=v(He()),RM=e=>t=>{throw t},AM=(e,t)=>{},sp=e=>(t,r)=>async n=>{if(!n_.HttpRequest.isInstance(n.request))return t(n);let s=(0,o_.getSmithyContext)(r).selectedHttpAuthScheme;if(!s)throw new Error("No HttpAuthScheme was selected: unable to sign request");let{httpAuthOption:{signingProperties:i={}},identity:a,signer:c}=s,d=await t({...n,request:await c.sign(n.request,a,i)}).catch((c.errorHandler||RM)(i));return(c.successHandler||AM)(d.response,i),d}});var s_,bi,i_=y(()=>{ip();s_={step:"finalizeRequest",tags:["HTTP_SIGNING"],name:"httpSigningMiddleware",aliases:["apiKeyMiddleware","tokenMiddleware","awsAuthMiddleware"],override:!0,relation:"after",toMiddleware:"retryMiddleware"},bi=e=>({applyToStack:t=>{t.addRelativeTo(sp(e),s_)}})});var a_=y(()=>{ip();i_()});var cr,c_=y(()=>{cr=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t}});function d_(e,t,r,n,o){return async function*(i,a,...c){let d=a,l=i.startingToken??d[r],u=!0,p;for(;u;){if(d[r]=l,o&&(d[o]=d[o]??i.pageSize),i.client instanceof e)p=await OM(t,i.client,a,i.withCommand,...c);else throw new Error(`Invalid client, expected instance of ${e.name}`);yield p;let h=l;l=IM(p,n),u=!!(l&&(!i.stopOnSameToken||l!==h))}return void 0}}var OM,IM,u_=y(()=>{OM=async(e,t,r,n=s=>s,...o)=>{let s=new e(r);return s=n(s)??s,await t.send(s,...o)};IM=(e,t)=>{let r=e,n=t.split(".");for(let o of n){if(!r||typeof r!="object")return;r=r[o]}return r}});var ap=w((OJ,p_)=>{var _c=Object.defineProperty,NM=Object.getOwnPropertyDescriptor,DM=Object.getOwnPropertyNames,MM=Object.prototype.hasOwnProperty,kM=(e,t)=>_c(e,"name",{value:t,configurable:!0}),FM=(e,t)=>{for(var r in t)_c(e,r,{get:t[r],enumerable:!0})},UM=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of DM(t))!MM.call(e,o)&&o!==r&&_c(e,o,{get:()=>t[o],enumerable:!(n=NM(t,o))||n.enumerable});return e},LM=e=>UM(_c({},"__esModule",{value:!0}),e),l_={};FM(l_,{isArrayBuffer:()=>jM});p_.exports=LM(l_);var jM=kM(e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]","isArrayBuffer")});var co=w((IJ,h_)=>{var Sc=Object.defineProperty,BM=Object.getOwnPropertyDescriptor,$M=Object.getOwnPropertyNames,HM=Object.prototype.hasOwnProperty,m_=(e,t)=>Sc(e,"name",{value:t,configurable:!0}),qM=(e,t)=>{for(var r in t)Sc(e,r,{get:t[r],enumerable:!0})},zM=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of $M(t))!HM.call(e,o)&&o!==r&&Sc(e,o,{get:()=>t[o],enumerable:!(n=BM(t,o))||n.enumerable});return e},VM=e=>zM(Sc({},"__esModule",{value:!0}),e),f_={};qM(f_,{fromArrayBuffer:()=>GM,fromString:()=>WM});h_.exports=VM(f_);var KM=ap(),cp=require("buffer"),GM=m_((e,t=0,r=e.byteLength-t)=>{if(!(0,KM.isArrayBuffer)(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return cp.Buffer.from(e,t,r)},"fromArrayBuffer"),WM=m_((e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?cp.Buffer.from(e,t):cp.Buffer.from(e)},"fromString")});var g_=w(Ec=>{"use strict";Object.defineProperty(Ec,"__esModule",{value:!0});Ec.fromBase64=void 0;var JM=co(),YM=/^[A-Za-z0-9+/]*={0,2}$/,XM=e=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!YM.exec(e))throw new TypeError("Invalid base64 string.");let t=(0,JM.fromString)(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)};Ec.fromBase64=XM});var we=w((DJ,E_)=>{var vc=Object.defineProperty,QM=Object.getOwnPropertyDescriptor,ZM=Object.getOwnPropertyNames,ek=Object.prototype.hasOwnProperty,dp=(e,t)=>vc(e,"name",{value:t,configurable:!0}),tk=(e,t)=>{for(var r in t)vc(e,r,{get:t[r],enumerable:!0})},rk=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of ZM(t))!ek.call(e,o)&&o!==r&&vc(e,o,{get:()=>t[o],enumerable:!(n=QM(t,o))||n.enumerable});return e},nk=e=>rk(vc({},"__esModule",{value:!0}),e),y_={};tk(y_,{fromUtf8:()=>S_,toUint8Array:()=>ok,toUtf8:()=>sk});E_.exports=nk(y_);var __=co(),S_=dp(e=>{let t=(0,__.fromString)(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)},"fromUtf8"),ok=dp(e=>typeof e=="string"?S_(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),"toUint8Array"),sk=dp(e=>{if(typeof e=="string")return e;if(typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return(0,__.fromArrayBuffer)(e.buffer,e.byteOffset,e.byteLength).toString("utf8")},"toUtf8")});var v_=w(wc=>{"use strict";Object.defineProperty(wc,"__esModule",{value:!0});wc.toBase64=void 0;var ik=co(),ak=we(),ck=e=>{let t;if(typeof e=="string"?t=(0,ak.fromUtf8)(e):t=e,typeof t!="object"||typeof t.byteOffset!="number"||typeof t.byteLength!="number")throw new Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");return(0,ik.fromArrayBuffer)(t.buffer,t.byteOffset,t.byteLength).toString("base64")};wc.toBase64=ck});var Oe=w((kJ,bc)=>{var w_=Object.defineProperty,dk=Object.getOwnPropertyDescriptor,uk=Object.getOwnPropertyNames,lk=Object.prototype.hasOwnProperty,up=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of uk(t))!lk.call(e,o)&&o!==r&&w_(e,o,{get:()=>t[o],enumerable:!(n=dk(t,o))||n.enumerable});return e},b_=(e,t,r)=>(up(e,t,"default"),r&&up(r,t,"default")),pk=e=>up(w_({},"__esModule",{value:!0}),e),lp={};bc.exports=pk(lp);b_(lp,g_(),bc.exports);b_(lp,v_(),bc.exports)});var mp=w(Cc=>{"use strict";Object.defineProperty(Cc,"__esModule",{value:!0});Cc.ChecksumStream=void 0;var mk=Oe(),fk=require("stream"),pp=class extends fk.Duplex{constructor({expectedChecksum:t,checksum:r,source:n,checksumSourceLocation:o,base64Encoder:s}){var i,a;if(super(),typeof n.pipe=="function")this.source=n;else throw new Error(`@smithy/util-stream: unsupported source type ${(a=(i=n?.constructor)===null||i===void 0?void 0:i.name)!==null&&a!==void 0?a:n} in ChecksumStream.`);this.base64Encoder=s??mk.toBase64,this.expectedChecksum=t,this.checksum=r,this.checksumSourceLocation=o,this.source.pipe(this)}_read(t){}_write(t,r,n){try{this.checksum.update(t),this.push(t)}catch(o){return n(o)}return n()}async _final(t){try{let r=await this.checksum.digest(),n=this.base64Encoder(r);if(this.expectedChecksum!==n)return t(new Error(`Checksum mismatch: expected "${this.expectedChecksum}" but received "${n}" in response header "${this.checksumSourceLocation}".`))}catch(r){return t(r)}return this.push(null),t()}};Cc.ChecksumStream=pp});var dr=w(uo=>{"use strict";Object.defineProperty(uo,"__esModule",{value:!0});uo.isBlob=uo.isReadableStream=void 0;var hk=e=>{var t;return typeof ReadableStream=="function"&&(((t=e?.constructor)===null||t===void 0?void 0:t.name)===ReadableStream.name||e instanceof ReadableStream)};uo.isReadableStream=hk;var gk=e=>{var t;return typeof Blob=="function"&&(((t=e?.constructor)===null||t===void 0?void 0:t.name)===Blob.name||e instanceof Blob)};uo.isBlob=gk});var C_=w(Pc=>{"use strict";Object.defineProperty(Pc,"__esModule",{value:!0});Pc.ChecksumStream=void 0;var yk=typeof ReadableStream=="function"?ReadableStream:function(){},fp=class extends yk{};Pc.ChecksumStream=fp});var P_=w(xc=>{"use strict";Object.defineProperty(xc,"__esModule",{value:!0});xc.createChecksumStream=void 0;var _k=Oe(),Sk=dr(),Ek=C_(),vk=({expectedChecksum:e,checksum:t,source:r,checksumSourceLocation:n,base64Encoder:o})=>{var s,i;if(!(0,Sk.isReadableStream)(r))throw new Error(`@smithy/util-stream: unsupported source type ${(i=(s=r?.constructor)===null||s===void 0?void 0:s.name)!==null&&i!==void 0?i:r} in ChecksumStream.`);let a=o??_k.toBase64;if(typeof TransformStream!="function")throw new Error("@smithy/util-stream: unable to instantiate ChecksumStream because API unavailable: ReadableStream/TransformStream.");let c=new TransformStream({start(){},async transform(l,u){t.update(l),u.enqueue(l)},async flush(l){let u=await t.digest(),p=a(u);if(e!==p){let h=new Error(`Checksum mismatch: expected "${e}" but received "${p}" in response header "${n}".`);l.error(h)}else l.terminate()}});r.pipeThrough(c);let d=c.readable;return Object.setPrototypeOf(d,Ek.ChecksumStream.prototype),d};xc.createChecksumStream=vk});var x_=w(hp=>{"use strict";Object.defineProperty(hp,"__esModule",{value:!0});hp.createChecksumStream=Pk;var wk=dr(),bk=mp(),Ck=P_();function Pk(e){return typeof ReadableStream=="function"&&(0,wk.isReadableStream)(e.source)?(0,Ck.createChecksumStream)(e):new bk.ChecksumStream(e)}});var yp=w(Tc=>{"use strict";Object.defineProperty(Tc,"__esModule",{value:!0});Tc.ByteArrayCollector=void 0;var gp=class{constructor(t){this.allocByteArray=t,this.byteLength=0,this.byteArrays=[]}push(t){this.byteArrays.push(t),this.byteLength+=t.byteLength}flush(){if(this.byteArrays.length===1){let n=this.byteArrays[0];return this.reset(),n}let t=this.allocByteArray(this.byteLength),r=0;for(let n=0;n<this.byteArrays.length;++n){let o=this.byteArrays[n];t.set(o,r),r+=o.byteLength}return this.reset(),t}reset(){this.byteArrays=[],this.byteLength=0}};Tc.ByteArrayCollector=gp});var O_=w($t=>{"use strict";Object.defineProperty($t,"__esModule",{value:!0});$t.createBufferedReadable=void 0;$t.createBufferedReadableStream=T_;$t.merge=R_;$t.flush=Rc;$t.sizeOf=lo;$t.modeOf=A_;var xk=yp();function T_(e,t,r){let n=e.getReader(),o=!1,s=0,i=["",new xk.ByteArrayCollector(d=>new Uint8Array(d))],a=-1,c=async d=>{let{value:l,done:u}=await n.read(),p=l;if(u){if(a!==-1){let h=Rc(i,a);lo(h)>0&&d.enqueue(h)}d.close()}else{let h=A_(p,!1);if(a!==h&&(a>=0&&d.enqueue(Rc(i,a)),a=h),a===-1){d.enqueue(p);return}let g=lo(p);s+=g;let S=lo(i[a]);if(g>=t&&S===0)d.enqueue(p);else{let E=R_(i,a,p);!o&&s>t*2&&(o=!0,r?.warn(`@smithy/util-stream - stream chunk size ${g} is below threshold of ${t}, automatically buffering.`)),E>=t?d.enqueue(Rc(i,a)):await c(d)}}};return new ReadableStream({pull:c})}$t.createBufferedReadable=T_;function R_(e,t,r){switch(t){case 0:return e[0]+=r,lo(e[0]);case 1:case 2:return e[t].push(r),lo(e[t])}}function Rc(e,t){switch(t){case 0:let r=e[0];return e[0]="",r;case 1:case 2:return e[t].flush()}throw new Error(`@smithy/util-stream - invalid index ${t} given to flush()`)}function lo(e){var t,r;return(r=(t=e?.byteLength)!==null&&t!==void 0?t:e?.length)!==null&&r!==void 0?r:0}function A_(e,t=!0){return t&&typeof Buffer<"u"&&e instanceof Buffer?2:e instanceof Uint8Array?1:typeof e=="string"?0:-1}});var N_=w(_p=>{"use strict";Object.defineProperty(_p,"__esModule",{value:!0});_p.createBufferedReadable=Ak;var Tk=require("node:stream"),I_=yp(),Ht=O_(),Rk=dr();function Ak(e,t,r){if((0,Rk.isReadableStream)(e))return(0,Ht.createBufferedReadableStream)(e,t,r);let n=new Tk.Readable({read(){}}),o=!1,s=0,i=["",new I_.ByteArrayCollector(c=>new Uint8Array(c)),new I_.ByteArrayCollector(c=>Buffer.from(new Uint8Array(c)))],a=-1;return e.on("data",c=>{let d=(0,Ht.modeOf)(c,!0);if(a!==d&&(a>=0&&n.push((0,Ht.flush)(i,a)),a=d),a===-1){n.push(c);return}let l=(0,Ht.sizeOf)(c);s+=l;let u=(0,Ht.sizeOf)(i[a]);if(l>=t&&u===0)n.push(c);else{let p=(0,Ht.merge)(i,a,c);!o&&s>t*2&&(o=!0,r?.warn(`@smithy/util-stream - stream chunk size ${l} is below threshold of ${t}, automatically buffering.`)),p>=t&&n.push((0,Ht.flush)(i,a))}}),e.on("end",()=>{if(a!==-1){let c=(0,Ht.flush)(i,a);(0,Ht.sizeOf)(c)>0&&n.push(c)}n.push(null)}),n}});var D_=w(Ac=>{"use strict";Object.defineProperty(Ac,"__esModule",{value:!0});Ac.getAwsChunkedEncodingStream=void 0;var Ok=require("stream"),Ik=(e,t)=>{let{base64Encoder:r,bodyLengthChecker:n,checksumAlgorithmFn:o,checksumLocationName:s,streamHasher:i}=t,a=r!==void 0&&o!==void 0&&s!==void 0&&i!==void 0,c=a?i(o,e):void 0,d=new Ok.Readable({read:()=>{}});return e.on("data",l=>{let u=n(l)||0;d.push(`${u.toString(16)}\r
`),d.push(l),d.push(`\r
`)}),e.on("end",async()=>{if(d.push(`0\r
`),a){let l=r(await c);d.push(`${s}:${l}\r
`),d.push(`\r
`)}d.push(null)}),d};Ac.getAwsChunkedEncodingStream=Ik});var M_=w(Sp=>{"use strict";Object.defineProperty(Sp,"__esModule",{value:!0});Sp.headStream=Nk;async function Nk(e,t){var r;let n=0,o=[],s=e.getReader(),i=!1;for(;!i;){let{done:d,value:l}=await s.read();if(l&&(o.push(l),n+=(r=l?.byteLength)!==null&&r!==void 0?r:0),n>=t)break;i=d}s.releaseLock();let a=new Uint8Array(Math.min(t,n)),c=0;for(let d of o){if(d.byteLength>a.byteLength-c){a.set(d.subarray(0,a.byteLength-c),c);break}else a.set(d,c);c+=d.length}return a}});var k_=w(Oc=>{"use strict";Object.defineProperty(Oc,"__esModule",{value:!0});Oc.headStream=void 0;var Dk=require("stream"),Mk=M_(),kk=dr(),Fk=(e,t)=>(0,kk.isReadableStream)(e)?(0,Mk.headStream)(e,t):new Promise((r,n)=>{let o=new Ep;o.limit=t,e.pipe(o),e.on("error",s=>{o.end(),n(s)}),o.on("error",n),o.on("finish",function(){let s=new Uint8Array(Buffer.concat(this.buffers));r(s)})});Oc.headStream=Fk;var Ep=class extends Dk.Writable{constructor(){super(...arguments),this.buffers=[],this.limit=1/0,this.bytesBuffered=0}_write(t,r,n){var o;if(this.buffers.push(t),this.bytesBuffered+=(o=t.byteLength)!==null&&o!==void 0?o:0,this.bytesBuffered>=this.limit){let s=this.bytesBuffered-this.limit,i=this.buffers[this.buffers.length-1];this.buffers[this.buffers.length-1]=i.subarray(0,i.byteLength-s),this.emit("finish")}n()}}});var wp=w((GJ,L_)=>{var Ic=Object.defineProperty,Uk=Object.getOwnPropertyDescriptor,Lk=Object.getOwnPropertyNames,jk=Object.prototype.hasOwnProperty,vp=(e,t)=>Ic(e,"name",{value:t,configurable:!0}),Bk=(e,t)=>{for(var r in t)Ic(e,r,{get:t[r],enumerable:!0})},$k=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Lk(t))!jk.call(e,o)&&o!==r&&Ic(e,o,{get:()=>t[o],enumerable:!(n=Uk(t,o))||n.enumerable});return e},Hk=e=>$k(Ic({},"__esModule",{value:!0}),e),F_={};Bk(F_,{escapeUri:()=>U_,escapeUriPath:()=>zk});L_.exports=Hk(F_);var U_=vp(e=>encodeURIComponent(e).replace(/[!'()*]/g,qk),"escapeUri"),qk=vp(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`,"hexEncode"),zk=vp(e=>e.split("/").map(U_).join("/"),"escapeUriPath")});var Cp=w((WJ,$_)=>{var Nc=Object.defineProperty,Vk=Object.getOwnPropertyDescriptor,Kk=Object.getOwnPropertyNames,Gk=Object.prototype.hasOwnProperty,Wk=(e,t)=>Nc(e,"name",{value:t,configurable:!0}),Jk=(e,t)=>{for(var r in t)Nc(e,r,{get:t[r],enumerable:!0})},Yk=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Kk(t))!Gk.call(e,o)&&o!==r&&Nc(e,o,{get:()=>t[o],enumerable:!(n=Vk(t,o))||n.enumerable});return e},Xk=e=>Yk(Nc({},"__esModule",{value:!0}),e),j_={};Jk(j_,{buildQueryString:()=>B_});$_.exports=Xk(j_);var bp=wp();function B_(e){let t=[];for(let r of Object.keys(e).sort()){let n=e[r];if(r=(0,bp.escapeUri)(r),Array.isArray(n))for(let o=0,s=n.length;o<s;o++)t.push(`${r}=${(0,bp.escapeUri)(n[o])}`);else{let o=r;(n||typeof n=="string")&&(o+=`=${(0,bp.escapeUri)(n)}`),t.push(o)}}return t.join("&")}Wk(B_,"buildQueryString")});var Kr=w((JJ,tS)=>{var Qk=Object.create,Ci=Object.defineProperty,Zk=Object.getOwnPropertyDescriptor,e1=Object.getOwnPropertyNames,t1=Object.getPrototypeOf,r1=Object.prototype.hasOwnProperty,ie=(e,t)=>Ci(e,"name",{value:t,configurable:!0}),n1=(e,t)=>{for(var r in t)Ci(e,r,{get:t[r],enumerable:!0})},K_=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of e1(t))!r1.call(e,o)&&o!==r&&Ci(e,o,{get:()=>t[o],enumerable:!(n=Zk(t,o))||n.enumerable});return e},o1=(e,t,r)=>(r=e!=null?Qk(t1(e)):{},K_(t||!e||!e.__esModule?Ci(r,"default",{value:e,enumerable:!0}):r,e)),s1=e=>K_(Ci({},"__esModule",{value:!0}),e),G_={};n1(G_,{DEFAULT_REQUEST_TIMEOUT:()=>Z_,NodeHttp2Handler:()=>h1,NodeHttpHandler:()=>l1,streamCollector:()=>y1});tS.exports=s1(G_);var W_=se(),J_=Cp(),Pp=require("http"),xp=require("https"),i1=["ECONNRESET","EPIPE","ETIMEDOUT"],Y_=ie(e=>{let t={};for(let r of Object.keys(e)){let n=e[r];t[r]=Array.isArray(n)?n.join(","):n}return t},"getTransformedHeaders"),Fe={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e)},H_=1e3,a1=ie((e,t,r=0)=>{if(!r)return-1;let n=ie(o=>{let s=Fe.setTimeout(()=>{e.destroy(),t(Object.assign(new Error(`Socket timed out without establishing a connection within ${r} ms`),{name:"TimeoutError"}))},r-o),i=ie(a=>{a?.connecting?a.on("connect",()=>{Fe.clearTimeout(s)}):Fe.clearTimeout(s)},"doWithSocket");e.socket?i(e.socket):e.on("socket",i)},"registerTimeout");return r<2e3?(n(0),0):Fe.setTimeout(n.bind(null,H_),H_)},"setConnectionTimeout"),c1=3e3,d1=ie((e,{keepAlive:t,keepAliveMsecs:r},n=c1)=>{if(t!==!0)return-1;let o=ie(()=>{e.socket?e.socket.setKeepAlive(t,r||0):e.on("socket",s=>{s.setKeepAlive(t,r||0)})},"registerListener");return n===0?(o(),0):Fe.setTimeout(o,n)},"setSocketKeepAlive"),q_=3e3,u1=ie((e,t,r=Z_)=>{let n=ie(o=>{let s=r-o,i=ie(()=>{e.destroy(),t(Object.assign(new Error(`Connection timed out after ${r} ms`),{name:"TimeoutError"}))},"onTimeout");e.socket?(e.socket.setTimeout(s,i),e.on("close",()=>e.socket?.removeListener("timeout",i))):e.setTimeout(s,i)},"registerTimeout");return 0<r&&r<6e3?(n(0),0):Fe.setTimeout(n.bind(null,r===0?0:q_),q_)},"setSocketTimeout"),X_=require("stream"),z_=6e3;async function Tp(e,t,r=z_){let n=t.headers??{},o=n.Expect||n.expect,s=-1,i=!0;o==="100-continue"&&(i=await Promise.race([new Promise(a=>{s=Number(Fe.setTimeout(()=>a(!0),Math.max(z_,r)))}),new Promise(a=>{e.on("continue",()=>{Fe.clearTimeout(s),a(!0)}),e.on("response",()=>{Fe.clearTimeout(s),a(!1)}),e.on("error",()=>{Fe.clearTimeout(s),a(!1)})})])),i&&Q_(e,t.body)}ie(Tp,"writeRequestBody");function Q_(e,t){if(t instanceof X_.Readable){t.pipe(e);return}if(t){if(Buffer.isBuffer(t)||typeof t=="string"){e.end(t);return}let r=t;if(typeof r=="object"&&r.buffer&&typeof r.byteOffset=="number"&&typeof r.byteLength=="number"){e.end(Buffer.from(r.buffer,r.byteOffset,r.byteLength));return}e.end(Buffer.from(t));return}e.end()}ie(Q_,"writeBody");var Z_=0,ur,l1=(ur=class{constructor(t){this.socketWarningTimestamp=0,this.metadata={handlerProtocol:"http/1.1"},this.configProvider=new Promise((r,n)=>{typeof t=="function"?t().then(o=>{r(this.resolveDefaultConfig(o))}).catch(n):r(this.resolveDefaultConfig(t))})}static create(t){return typeof t?.handle=="function"?t:new ur(t)}static checkSocketUsage(t,r,n=console){let{sockets:o,requests:s,maxSockets:i}=t;if(typeof i!="number"||i===1/0||Date.now()-15e3<r)return r;if(o&&s)for(let c in o){let d=o[c]?.length??0,l=s[c]?.length??0;if(d>=i&&l>=2*i)return n?.warn?.(`@smithy/node-http-handler:WARN - socket usage at capacity=${d} and ${l} additional requests are enqueued.
See https://docs.aws.amazon.com/sdk-for-javascript/v3/developer-guide/node-configuring-maxsockets.html
or increase socketAcquisitionWarningTimeout=(millis) in the NodeHttpHandler config.`),Date.now()}return r}resolveDefaultConfig(t){let{requestTimeout:r,connectionTimeout:n,socketTimeout:o,socketAcquisitionWarningTimeout:s,httpAgent:i,httpsAgent:a}=t||{},c=!0,d=50;return{connectionTimeout:n,requestTimeout:r??o,socketAcquisitionWarningTimeout:s,httpAgent:i instanceof Pp.Agent||typeof i?.destroy=="function"?i:new Pp.Agent({keepAlive:c,maxSockets:d,...i}),httpsAgent:a instanceof xp.Agent||typeof a?.destroy=="function"?a:new xp.Agent({keepAlive:c,maxSockets:d,...a}),logger:console}}destroy(){this.config?.httpAgent?.destroy(),this.config?.httpsAgent?.destroy()}async handle(t,{abortSignal:r,requestTimeout:n}={}){return this.config||(this.config=await this.configProvider),new Promise((o,s)=>{let i,a=[],c=ie(async R=>{await i,a.forEach(Fe.clearTimeout),o(R)},"resolve"),d=ie(async R=>{await i,a.forEach(Fe.clearTimeout),s(R)},"reject");if(!this.config)throw new Error("Node HTTP request handler config is not resolved");if(r?.aborted){let R=new Error("Request aborted");R.name="AbortError",d(R);return}let l=t.protocol==="https:",u=l?this.config.httpsAgent:this.config.httpAgent;a.push(Fe.setTimeout(()=>{this.socketWarningTimestamp=ur.checkSocketUsage(u,this.socketWarningTimestamp,this.config.logger)},this.config.socketAcquisitionWarningTimeout??(this.config.requestTimeout??2e3)+(this.config.connectionTimeout??1e3)));let p=(0,J_.buildQueryString)(t.query||{}),h;if(t.username!=null||t.password!=null){let R=t.username??"",G=t.password??"";h=`${R}:${G}`}let g=t.path;p&&(g+=`?${p}`),t.fragment&&(g+=`#${t.fragment}`);let S=t.hostname??"";S[0]==="["&&S.endsWith("]")?S=t.hostname.slice(1,-1):S=t.hostname;let E={headers:t.headers,host:S,method:t.method,path:g,port:t.port,agent:u,auth:h},C=(l?xp.request:Pp.request)(E,R=>{let G=new W_.HttpResponse({statusCode:R.statusCode||-1,reason:R.statusMessage,headers:Y_(R.headers),body:R});c({response:G})});if(C.on("error",R=>{i1.includes(R.code)?d(Object.assign(R,{name:"TimeoutError"})):d(R)}),r){let R=ie(()=>{C.destroy();let G=new Error("Request aborted");G.name="AbortError",d(G)},"onAbort");if(typeof r.addEventListener=="function"){let G=r;G.addEventListener("abort",R,{once:!0}),C.once("close",()=>G.removeEventListener("abort",R))}else r.onabort=R}let N=n??this.config.requestTimeout;a.push(a1(C,d,this.config.connectionTimeout)),a.push(u1(C,d,N));let k=E.agent;typeof k=="object"&&"keepAlive"in k&&a.push(d1(C,{keepAlive:k.keepAlive,keepAliveMsecs:k.keepAliveMsecs})),i=Tp(C,t,N).catch(R=>(a.forEach(Fe.clearTimeout),s(R)))})}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[t]:r}))}httpHandlerConfigs(){return this.config??{}}},ie(ur,"NodeHttpHandler"),ur),V_=require("http2"),p1=o1(require("http2")),po,m1=(po=class{constructor(t){this.sessions=[],this.sessions=t??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(t){this.sessions.push(t)}contains(t){return this.sessions.includes(t)}remove(t){this.sessions=this.sessions.filter(r=>r!==t)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(t){for(let r of this.sessions)r===t&&(r.destroyed||r.destroy())}},ie(po,"NodeHttp2ConnectionPool"),po),mo,f1=(mo=class{constructor(t){if(this.sessionCache=new Map,this.config=t,this.config.maxConcurrency&&this.config.maxConcurrency<=0)throw new RangeError("maxConcurrency must be greater than zero.")}lease(t,r){let n=this.getUrlString(t),o=this.sessionCache.get(n);if(o){let c=o.poll();if(c&&!this.config.disableConcurrency)return c}let s=p1.default.connect(n);this.config.maxConcurrency&&s.settings({maxConcurrentStreams:this.config.maxConcurrency},c=>{if(c)throw new Error("Fail to set maxConcurrentStreams to "+this.config.maxConcurrency+"when creating new session for "+t.destination.toString())}),s.unref();let i=ie(()=>{s.destroy(),this.deleteSession(n,s)},"destroySessionCb");s.on("goaway",i),s.on("error",i),s.on("frameError",i),s.on("close",()=>this.deleteSession(n,s)),r.requestTimeout&&s.setTimeout(r.requestTimeout,i);let a=this.sessionCache.get(n)||new m1;return a.offerLast(s),this.sessionCache.set(n,a),s}deleteSession(t,r){let n=this.sessionCache.get(t);n&&n.contains(r)&&(n.remove(r),this.sessionCache.set(t,n))}release(t,r){let n=this.getUrlString(t);this.sessionCache.get(n)?.offerLast(r)}destroy(){for(let[t,r]of this.sessionCache){for(let n of r)n.destroyed||n.destroy(),r.remove(n);this.sessionCache.delete(t)}}setMaxConcurrentStreams(t){if(t&&t<=0)throw new RangeError("maxConcurrentStreams must be greater than zero.");this.config.maxConcurrency=t}setDisableConcurrentStreams(t){this.config.disableConcurrency=t}getUrlString(t){return t.destination.toString()}},ie(mo,"NodeHttp2ConnectionManager"),mo),Vr,h1=(Vr=class{constructor(t){this.metadata={handlerProtocol:"h2"},this.connectionManager=new f1({}),this.configProvider=new Promise((r,n)=>{typeof t=="function"?t().then(o=>{r(o||{})}).catch(n):r(t||{})})}static create(t){return typeof t?.handle=="function"?t:new Vr(t)}destroy(){this.connectionManager.destroy()}async handle(t,{abortSignal:r,requestTimeout:n}={}){this.config||(this.config=await this.configProvider,this.connectionManager.setDisableConcurrentStreams(this.config.disableConcurrentStreams||!1),this.config.maxConcurrentStreams&&this.connectionManager.setMaxConcurrentStreams(this.config.maxConcurrentStreams));let{requestTimeout:o,disableConcurrentStreams:s}=this.config,i=n??o;return new Promise((a,c)=>{let d=!1,l,u=ie(async ue=>{await l,a(ue)},"resolve"),p=ie(async ue=>{await l,c(ue)},"reject");if(r?.aborted){d=!0;let ue=new Error("Request aborted");ue.name="AbortError",p(ue);return}let{hostname:h,method:g,port:S,protocol:E,query:b}=t,C="";if(t.username!=null||t.password!=null){let ue=t.username??"",at=t.password??"";C=`${ue}:${at}@`}let N=`${E}//${C}${h}${S?`:${S}`:""}`,k={destination:new URL(N)},R=this.connectionManager.lease(k,{requestTimeout:this.config?.sessionTimeout,disableConcurrentStreams:s||!1}),G=ie(ue=>{s&&this.destroySession(R),d=!0,p(ue)},"rejectWithDestroy"),nr=(0,J_.buildQueryString)(b||{}),ke=t.path;nr&&(ke+=`?${nr}`),t.fragment&&(ke+=`#${t.fragment}`);let _e=R.request({...t.headers,[V_.constants.HTTP2_HEADER_PATH]:ke,[V_.constants.HTTP2_HEADER_METHOD]:g});if(R.ref(),_e.on("response",ue=>{let at=new W_.HttpResponse({statusCode:ue[":status"]||-1,headers:Y_(ue),body:_e});d=!0,u({response:at}),s&&(R.close(),this.connectionManager.deleteSession(N,R))}),i&&_e.setTimeout(i,()=>{_e.close();let ue=new Error(`Stream timed out because of no activity for ${i} ms`);ue.name="TimeoutError",G(ue)}),r){let ue=ie(()=>{_e.close();let at=new Error("Request aborted");at.name="AbortError",G(at)},"onAbort");if(typeof r.addEventListener=="function"){let at=r;at.addEventListener("abort",ue,{once:!0}),_e.once("close",()=>at.removeEventListener("abort",ue))}else r.onabort=ue}_e.on("frameError",(ue,at,MN)=>{G(new Error(`Frame type id ${ue} in stream id ${MN} has failed with code ${at}.`))}),_e.on("error",G),_e.on("aborted",()=>{G(new Error(`HTTP/2 stream is abnormally aborted in mid-communication with result code ${_e.rstCode}.`))}),_e.on("close",()=>{R.unref(),s&&R.destroy(),d||G(new Error("Unexpected error: http2 request did not get a response"))}),l=Tp(_e,t,i)})}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[t]:r}))}httpHandlerConfigs(){return this.config??{}}destroySession(t){t.destroyed||t.destroy()}},ie(Vr,"NodeHttp2Handler"),Vr),fo,g1=(fo=class extends X_.Writable{constructor(){super(...arguments),this.bufferedBytes=[]}_write(t,r,n){this.bufferedBytes.push(t),n()}},ie(fo,"Collector"),fo),y1=ie(e=>_1(e)?eS(e):new Promise((t,r)=>{let n=new g1;e.pipe(n),e.on("error",o=>{n.end(),r(o)}),n.on("error",r),n.on("finish",function(){let o=new Uint8Array(Buffer.concat(this.bufferedBytes));t(o)})}),"streamCollector"),_1=ie(e=>typeof ReadableStream=="function"&&e instanceof ReadableStream,"isReadableStreamInstance");async function eS(e){let t=[],r=e.getReader(),n=!1,o=0;for(;!n;){let{done:a,value:c}=await r.read();c&&(t.push(c),o+=c.length),n=a}let s=new Uint8Array(o),i=0;for(let a of t)s.set(a,i),i+=a.length;return s}ie(eS,"collectReadableStream")});var dS=w((YJ,cS)=>{var Mc=Object.defineProperty,S1=Object.getOwnPropertyDescriptor,E1=Object.getOwnPropertyNames,v1=Object.prototype.hasOwnProperty,_t=(e,t)=>Mc(e,"name",{value:t,configurable:!0}),w1=(e,t)=>{for(var r in t)Mc(e,r,{get:t[r],enumerable:!0})},b1=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of E1(t))!v1.call(e,o)&&o!==r&&Mc(e,o,{get:()=>t[o],enumerable:!(n=S1(t,o))||n.enumerable});return e},C1=e=>b1(Mc({},"__esModule",{value:!0}),e),nS={};w1(nS,{FetchHttpHandler:()=>x1,keepAliveSupport:()=>Dc,streamCollector:()=>R1});cS.exports=C1(nS);var rS=se(),P1=Cp();function Rp(e,t){return new Request(e,t)}_t(Rp,"createRequest");function oS(e=0){return new Promise((t,r)=>{e&&setTimeout(()=>{let n=new Error(`Request did not complete within ${e} ms`);n.name="TimeoutError",r(n)},e)})}_t(oS,"requestTimeout");var Dc={supported:void 0},Gr,x1=(Gr=class{static create(t){return typeof t?.handle=="function"?t:new Gr(t)}constructor(t){typeof t=="function"?this.configProvider=t().then(r=>r||{}):(this.config=t??{},this.configProvider=Promise.resolve(this.config)),Dc.supported===void 0&&(Dc.supported=typeof Request<"u"&&"keepalive"in Rp("https://[::1]"))}destroy(){}async handle(t,{abortSignal:r,requestTimeout:n}={}){this.config||(this.config=await this.configProvider);let o=n??this.config.requestTimeout,s=this.config.keepAlive===!0,i=this.config.credentials;if(r?.aborted){let C=new Error("Request aborted");return C.name="AbortError",Promise.reject(C)}let a=t.path,c=(0,P1.buildQueryString)(t.query||{});c&&(a+=`?${c}`),t.fragment&&(a+=`#${t.fragment}`);let d="";if(t.username!=null||t.password!=null){let C=t.username??"",N=t.password??"";d=`${C}:${N}@`}let{port:l,method:u}=t,p=`${t.protocol}//${d}${t.hostname}${l?`:${l}`:""}${a}`,h=u==="GET"||u==="HEAD"?void 0:t.body,g={body:h,headers:new Headers(t.headers),method:u,credentials:i};this.config?.cache&&(g.cache=this.config.cache),h&&(g.duplex="half"),typeof AbortController<"u"&&(g.signal=r),Dc.supported&&(g.keepalive=s),typeof this.config.requestInit=="function"&&Object.assign(g,this.config.requestInit(t));let S=_t(()=>{},"removeSignalEventListener"),E=Rp(p,g),b=[fetch(E).then(C=>{let N=C.headers,k={};for(let G of N.entries())k[G[0]]=G[1];return C.body!=null?{response:new rS.HttpResponse({headers:k,reason:C.statusText,statusCode:C.status,body:C.body})}:C.blob().then(G=>({response:new rS.HttpResponse({headers:k,reason:C.statusText,statusCode:C.status,body:G})}))}),oS(o)];return r&&b.push(new Promise((C,N)=>{let k=_t(()=>{let R=new Error("Request aborted");R.name="AbortError",N(R)},"onAbort");if(typeof r.addEventListener=="function"){let R=r;R.addEventListener("abort",k,{once:!0}),S=_t(()=>R.removeEventListener("abort",k),"removeSignalEventListener")}else r.onabort=k})),Promise.race(b).finally(S)}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>(n[t]=r,n))}httpHandlerConfigs(){return this.config??{}}},_t(Gr,"FetchHttpHandler"),Gr),T1=Oe(),R1=_t(async e=>typeof Blob=="function"&&e instanceof Blob||e.constructor?.name==="Blob"?Blob.prototype.arrayBuffer!==void 0?new Uint8Array(await e.arrayBuffer()):sS(e):iS(e),"streamCollector");async function sS(e){let t=await aS(e),r=(0,T1.fromBase64)(t);return new Uint8Array(r)}_t(sS,"collectBlob");async function iS(e){let t=[],r=e.getReader(),n=!1,o=0;for(;!n;){let{done:a,value:c}=await r.read();c&&(t.push(c),o+=c.length),n=a}let s=new Uint8Array(o),i=0;for(let a of t)s.set(a,i),i+=a.length;return s}_t(iS,"collectStream");function aS(e){return new Promise((t,r)=>{let n=new FileReader;n.onloadend=()=>{if(n.readyState!==2)return r(new Error("Reader aborted too early"));let o=n.result??"",s=o.indexOf(","),i=s>-1?s+1:o.length;t(o.substring(i))},n.onabort=()=>r(new Error("Read aborted")),n.onerror=()=>r(n.error),n.readAsDataURL(e)})}_t(aS,"readToBase64")});var Fc=w((XJ,hS)=>{var kc=Object.defineProperty,A1=Object.getOwnPropertyDescriptor,O1=Object.getOwnPropertyNames,I1=Object.prototype.hasOwnProperty,uS=(e,t)=>kc(e,"name",{value:t,configurable:!0}),N1=(e,t)=>{for(var r in t)kc(e,r,{get:t[r],enumerable:!0})},D1=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of O1(t))!I1.call(e,o)&&o!==r&&kc(e,o,{get:()=>t[o],enumerable:!(n=A1(t,o))||n.enumerable});return e},M1=e=>D1(kc({},"__esModule",{value:!0}),e),lS={};N1(lS,{fromHex:()=>mS,toHex:()=>fS});hS.exports=M1(lS);var pS={},Ap={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),pS[e]=t,Ap[t]=e}function mS(e){if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){let n=e.slice(r,r+2).toLowerCase();if(n in Ap)t[r/2]=Ap[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return t}uS(mS,"fromHex");function fS(e){let t="";for(let r=0;r<e.byteLength;r++)t+=pS[e[r]];return t}uS(fS,"toHex")});var SS=w(Uc=>{"use strict";Object.defineProperty(Uc,"__esModule",{value:!0});Uc.sdkStreamMixin=void 0;var k1=dS(),F1=Oe(),U1=Fc(),L1=we(),gS=dr(),yS="The stream has already been transformed.",j1=e=>{var t,r;if(!_S(e)&&!(0,gS.isReadableStream)(e)){let i=((r=(t=e?.__proto__)===null||t===void 0?void 0:t.constructor)===null||r===void 0?void 0:r.name)||e;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${i}`)}let n=!1,o=async()=>{if(n)throw new Error(yS);return n=!0,await(0,k1.streamCollector)(e)},s=i=>{if(typeof i.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return i.stream()};return Object.assign(e,{transformToByteArray:o,transformToString:async i=>{let a=await o();if(i==="base64")return(0,F1.toBase64)(a);if(i==="hex")return(0,U1.toHex)(a);if(i===void 0||i==="utf8"||i==="utf-8")return(0,L1.toUtf8)(a);if(typeof TextDecoder=="function")return new TextDecoder(i).decode(a);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(n)throw new Error(yS);if(n=!0,_S(e))return s(e);if((0,gS.isReadableStream)(e))return e;throw new Error(`Cannot transform payload to web stream, got ${e}`)}})};Uc.sdkStreamMixin=j1;var _S=e=>typeof Blob=="function"&&e instanceof Blob});var vS=w(Lc=>{"use strict";Object.defineProperty(Lc,"__esModule",{value:!0});Lc.sdkStreamMixin=void 0;var B1=Kr(),$1=co(),Op=require("stream"),H1=SS(),ES="The stream has already been transformed.",q1=e=>{var t,r;if(!(e instanceof Op.Readable))try{return(0,H1.sdkStreamMixin)(e)}catch{let i=((r=(t=e?.__proto__)===null||t===void 0?void 0:t.constructor)===null||r===void 0?void 0:r.name)||e;throw new Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${i}`)}let n=!1,o=async()=>{if(n)throw new Error(ES);return n=!0,await(0,B1.streamCollector)(e)};return Object.assign(e,{transformToByteArray:o,transformToString:async s=>{let i=await o();return s===void 0||Buffer.isEncoding(s)?(0,$1.fromArrayBuffer)(i.buffer,i.byteOffset,i.byteLength).toString(s):new TextDecoder(s).decode(i)},transformToWebStream:()=>{if(n)throw new Error(ES);if(e.readableFlowing!==null)throw new Error("The stream has been consumed by other callbacks.");if(typeof Op.Readable.toWeb!="function")throw new Error("Readable.toWeb() is not supported. Please ensure a polyfill is available.");return n=!0,Op.Readable.toWeb(e)}})};Lc.sdkStreamMixin=q1});var wS=w(Ip=>{"use strict";Object.defineProperty(Ip,"__esModule",{value:!0});Ip.splitStream=z1;async function z1(e){return typeof e.stream=="function"&&(e=e.stream()),e.tee()}});var PS=w(Np=>{"use strict";Object.defineProperty(Np,"__esModule",{value:!0});Np.splitStream=K1;var bS=require("stream"),V1=wS(),CS=dr();async function K1(e){if((0,CS.isReadableStream)(e)||(0,CS.isBlob)(e))return(0,V1.splitStream)(e);let t=new bS.PassThrough,r=new bS.PassThrough;return e.pipe(t),e.pipe(r),[t,r]}});var Bc=w((r9,Et)=>{var jc=Object.defineProperty,G1=Object.getOwnPropertyDescriptor,W1=Object.getOwnPropertyNames,J1=Object.prototype.hasOwnProperty,kp=(e,t)=>jc(e,"name",{value:t,configurable:!0}),Y1=(e,t)=>{for(var r in t)jc(e,r,{get:t[r],enumerable:!0})},Dp=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of W1(t))!J1.call(e,o)&&o!==r&&jc(e,o,{get:()=>t[o],enumerable:!(n=G1(t,o))||n.enumerable});return e},lr=(e,t,r)=>(Dp(e,t,"default"),r&&Dp(r,t,"default")),X1=e=>Dp(jc({},"__esModule",{value:!0}),e),St={};Y1(St,{Uint8ArrayBlobAdapter:()=>Mp});Et.exports=X1(St);var xS=Oe(),TS=we();function RS(e,t="utf-8"){return t==="base64"?(0,xS.toBase64)(e):(0,TS.toUtf8)(e)}kp(RS,"transformToString");function AS(e,t){return t==="base64"?Mp.mutate((0,xS.fromBase64)(e)):Mp.mutate((0,TS.fromUtf8)(e))}kp(AS,"transformFromString");var Wr,Mp=(Wr=class extends Uint8Array{static fromString(t,r="utf-8"){switch(typeof t){case"string":return AS(t,r);default:throw new Error(`Unsupported conversion from ${typeof t} to Uint8ArrayBlobAdapter.`)}}static mutate(t){return Object.setPrototypeOf(t,Wr.prototype),t}transformToString(t="utf-8"){return RS(this,t)}},kp(Wr,"Uint8ArrayBlobAdapter"),Wr);lr(St,mp(),Et.exports);lr(St,x_(),Et.exports);lr(St,N_(),Et.exports);lr(St,D_(),Et.exports);lr(St,k_(),Et.exports);lr(St,vS(),Et.exports);lr(St,PS(),Et.exports);lr(St,dr(),Et.exports)});var $c,Ge,Pi=y(()=>{$c=v(Bc()),Ge=async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return $c.Uint8ArrayBlobAdapter.mutate(e);if(!e)return $c.Uint8ArrayBlobAdapter.mutate(new Uint8Array);let r=t.streamCollector(e);return $c.Uint8ArrayBlobAdapter.mutate(await r)}});function vt(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}var Hc=y(()=>{});var qt,Fp=y(()=>{qt=e=>typeof e=="function"?e():e});var Q1,Z1,OS=y(()=>{Q1=v(se()),Z1=v(He())});var eF,IS=y(()=>{eF=v(He())});var NS=y(()=>{OS();IS()});var le,pr=y(()=>{le=class e{constructor(t,r=new Map){this.namespace=t,this.schemas=r}static for(t){return e.registries.has(t)||e.registries.set(t,new e(t)),e.registries.get(t)}register(t,r){let n=this.normalizeShapeId(t);e.for(this.getNamespace(t)).schemas.set(n,r)}getSchema(t){let r=this.normalizeShapeId(t);if(!this.schemas.has(r))throw new Error(`@smithy/core/schema - schema not found for ${r}`);return this.schemas.get(r)}getBaseException(){for(let[t,r]of this.schemas.entries())if(t.startsWith("smithy.ts.sdk.synthetic.")&&t.endsWith("ServiceException"))return r}find(t){return[...this.schemas.values()].find(t)}destroy(){e.registries.delete(this.namespace),this.schemas.clear()}normalizeShapeId(t){return t.includes("#")?t:this.namespace+"#"+t}getNamespace(t){return this.normalizeShapeId(t).split("#")[0]}};le.registries=new Map});var lt,Jr=y(()=>{lt=class{constructor(t,r){this.name=t,this.traits=r}}});var xi,Up=y(()=>{pr();Jr();xi=class e extends lt{constructor(t,r,n){super(t,r),this.name=t,this.traits=r,this.valueSchema=n,this.symbol=e.symbol}static[Symbol.hasInstance](t){let r=e.prototype.isPrototypeOf(t);return!r&&typeof t=="object"&&t!==null?t.symbol===e.symbol:r}};xi.symbol=Symbol.for("@smithy/core/schema::ListSchema")});var Ti,Lp=y(()=>{pr();Jr();Ti=class e extends lt{constructor(t,r,n,o){super(t,r),this.name=t,this.traits=r,this.keySchema=n,this.valueSchema=o,this.symbol=e.symbol}static[Symbol.hasInstance](t){let r=e.prototype.isPrototypeOf(t);return!r&&typeof t=="object"&&t!==null?t.symbol===e.symbol:r}};Ti.symbol=Symbol.for("@smithy/core/schema::MapSchema")});var DS=y(()=>{pr();Jr()});var Yr,qc=y(()=>{pr();Jr();Yr=class e extends lt{constructor(t,r,n,o){super(t,r),this.name=t,this.traits=r,this.memberNames=n,this.memberList=o,this.symbol=e.symbol,this.members={};for(let s=0;s<n.length;++s)this.members[n[s]]=Array.isArray(o[s])?o[s]:[o[s],0]}static[Symbol.hasInstance](t){let r=e.prototype.isPrototypeOf(t);return!r&&typeof t=="object"&&t!==null?t.symbol===e.symbol:r}};Yr.symbol=Symbol.for("@smithy/core/schema::StructureSchema")});var jp,MS=y(()=>{pr();qc();jp=class e extends Yr{constructor(t,r,n,o,s){super(t,r,n,o),this.name=t,this.traits=r,this.memberNames=n,this.memberList=o,this.ctor=s,this.symbol=e.symbol}static[Symbol.hasInstance](t){let r=e.prototype.isPrototypeOf(t);return!r&&typeof t=="object"&&t!==null?t.symbol===e.symbol:r}};jp.symbol=Symbol.for("@smithy/core/schema::ErrorSchema")});var x,Bp=y(()=>{x={BLOB:21,STREAMING_BLOB:42,BOOLEAN:2,STRING:0,NUMERIC:1,BIG_INTEGER:17,BIG_DECIMAL:19,DOCUMENT:15,TIMESTAMP_DEFAULT:4,TIMESTAMP_DATE_TIME:5,TIMESTAMP_HTTP_DATE:6,TIMESTAMP_EPOCH_SECONDS:7,LIST_MODIFIER:64,MAP_MODIFIER:128}});var Ri,$p=y(()=>{pr();Jr();Ri=class e extends lt{constructor(t,r,n){super(t,n),this.name=t,this.schemaRef=r,this.traits=n,this.symbol=e.symbol}static[Symbol.hasInstance](t){let r=e.prototype.isPrototypeOf(t);return!r&&typeof t=="object"&&t!==null?t.symbol===e.symbol:r}};Ri.symbol=Symbol.for("@smithy/core/schema::SimpleSchema")});var O,kS=y(()=>{Fp();Up();Lp();Bp();$p();qc();O=class e{constructor(t,r){this.ref=t,this.memberName=r,this.symbol=e.symbol;let n=[],o=t,s=t;for(this._isMemberSchema=!1;Array.isArray(o);)n.push(o[1]),o=o[0],s=qt(o),this._isMemberSchema=!0;if(n.length>0){this.memberTraits={};for(let i=n.length-1;i>=0;--i){let a=n[i];Object.assign(this.memberTraits,e.translateTraits(a))}}else this.memberTraits=0;if(s instanceof e){this.name=s.name,this.traits=s.traits,this._isMemberSchema=s._isMemberSchema,this.schema=s.schema,this.memberTraits=Object.assign({},s.getMemberTraits(),this.getMemberTraits()),this.normalizedTraits=void 0,this.ref=s.ref,this.memberName=r??s.memberName;return}if(this.schema=qt(s),this.schema&&typeof this.schema=="object"?this.traits=this.schema?.traits??{}:this.traits=0,this.name=(typeof this.schema=="object"?this.schema?.name:void 0)??this.memberName??this.getSchemaName(),this._isMemberSchema&&!r)throw new Error(`@smithy/core/schema - NormalizedSchema member schema ${this.getName(!0)} must initialize with memberName argument.`)}static[Symbol.hasInstance](t){let r=e.prototype.isPrototypeOf(t);return!r&&typeof t=="object"&&t!==null?t.symbol===e.symbol:r}static of(t,r){return t instanceof e?t:new e(t,r)}static translateTraits(t){if(typeof t=="object")return t;t=t|0;let r={};return(t&1)===1&&(r.httpLabel=1),(t>>1&1)===1&&(r.idempotent=1),(t>>2&1)===1&&(r.idempotencyToken=1),(t>>3&1)===1&&(r.sensitive=1),(t>>4&1)===1&&(r.httpPayload=1),(t>>5&1)===1&&(r.httpResponseCode=1),(t>>6&1)===1&&(r.httpQueryParams=1),r}static memberFrom(t,r){return t instanceof e?(t.memberName=r,t._isMemberSchema=!0,t):new e(t,r)}getSchema(){return this.schema instanceof e?this.schema=this.schema.getSchema():this.schema instanceof Ri?qt(this.schema.schemaRef):qt(this.schema)}getName(t=!1){return!t&&this.name&&this.name.includes("#")?this.name.split("#")[1]:this.name||void 0}getMemberName(){if(!this.isMemberSchema())throw new Error(`@smithy/core/schema - cannot get member name on non-member schema: ${this.getName(!0)}`);return this.memberName}isMemberSchema(){return this._isMemberSchema}isUnitSchema(){return this.getSchema()==="unit"}isListSchema(){let t=this.getSchema();return typeof t=="number"?t>=x.LIST_MODIFIER&&t<x.MAP_MODIFIER:t instanceof xi}isMapSchema(){let t=this.getSchema();return typeof t=="number"?t>=x.MAP_MODIFIER&&t<=255:t instanceof Ti}isDocumentSchema(){return this.getSchema()===x.DOCUMENT}isStructSchema(){let t=this.getSchema();return t!==null&&typeof t=="object"&&"members"in t||t instanceof Yr}isBlobSchema(){return this.getSchema()===x.BLOB||this.getSchema()===x.STREAMING_BLOB}isTimestampSchema(){let t=this.getSchema();return typeof t=="number"&&t>=x.TIMESTAMP_DEFAULT&&t<=x.TIMESTAMP_EPOCH_SECONDS}isStringSchema(){return this.getSchema()===x.STRING}isBooleanSchema(){return this.getSchema()===x.BOOLEAN}isNumericSchema(){return this.getSchema()===x.NUMERIC}isBigIntegerSchema(){return this.getSchema()===x.BIG_INTEGER}isBigDecimalSchema(){return this.getSchema()===x.BIG_DECIMAL}isStreaming(){return this.getMergedTraits().streaming?!0:this.getSchema()===x.STREAMING_BLOB}getMergedTraits(){return this.normalizedTraits?this.normalizedTraits:(this.normalizedTraits={...this.getOwnTraits(),...this.getMemberTraits()},this.normalizedTraits)}getMemberTraits(){return e.translateTraits(this.memberTraits)}getOwnTraits(){return e.translateTraits(this.traits)}getKeySchema(){if(this.isDocumentSchema())return e.memberFrom([x.DOCUMENT,0],"key");if(!this.isMapSchema())throw new Error(`@smithy/core/schema - cannot get key schema for non-map schema: ${this.getName(!0)}`);let t=this.getSchema();return typeof t=="number"?e.memberFrom([63&t,0],"key"):e.memberFrom([t.keySchema,0],"key")}getValueSchema(){let t=this.getSchema();if(typeof t=="number"){if(this.isMapSchema())return e.memberFrom([63&t,0],"value");if(this.isListSchema())return e.memberFrom([63&t,0],"member")}if(t&&typeof t=="object"){if(this.isStructSchema())throw new Error(`cannot call getValueSchema() with StructureSchema ${this.getName(!0)}`);let r=t;if("valueSchema"in r){if(this.isMapSchema())return e.memberFrom([r.valueSchema,0],"value");if(this.isListSchema())return e.memberFrom([r.valueSchema,0],"member")}}if(this.isDocumentSchema())return e.memberFrom([x.DOCUMENT,0],"value");throw new Error(`@smithy/core/schema - the schema ${this.getName(!0)} does not have a value member.`)}getMemberSchema(t){if(this.isStructSchema()){let r=this.getSchema();if(!(t in r.members))throw new Error(`@smithy/core/schema - the schema ${this.getName(!0)} does not have a member with name=${t}.`);return e.memberFrom(r.members[t],t)}if(this.isDocumentSchema())return e.memberFrom([x.DOCUMENT,0],t);throw new Error(`@smithy/core/schema - the schema ${this.getName(!0)} does not have members.`)}getMemberSchemas(){let{schema:t}=this,r=t;if(!r||typeof r!="object")return{};if("members"in r){let n={};for(let o of r.memberNames)n[o]=this.getMemberSchema(o);return n}return{}}*structIterator(){if(this.isUnitSchema())return;if(!this.isStructSchema())throw new Error("@smithy/core/schema - cannot acquire structIterator on non-struct schema.");let t=this.getSchema();for(let r=0;r<t.memberNames.length;++r)yield[t.memberNames[r],e.memberFrom([t.memberList[r],0],t.memberNames[r])]}getSchemaName(){let t=this.getSchema();if(typeof t=="number"){let r=63&t,n=192&t,o=Object.entries(x).find(([,s])=>s===r)?.[0]??"Unknown";switch(n){case x.MAP_MODIFIER:return`${o}Map`;case x.LIST_MODIFIER:return`${o}List`;case 0:return o}}return"Unknown"}};O.symbol=Symbol.for("@smithy/core/schema::NormalizedSchema")});var ye=y(()=>{Fp();NS();Up();Lp();DS();MS();kS();Jr();$p();qc();Bp();pr()});var Ai,FS=y(()=>{ye();Ai=(e,t,r=n=>n)=>{let n=O.of(t);switch(typeof e){case"undefined":case"boolean":case"number":case"string":case"bigint":case"symbol":return r(e,n);case"function":case"object":if(e===null)return r(null,n);if(Array.isArray(e)){let s=new Array(e.length),i=0;for(let a of e)s[i++]=Ai(a,n.getValueSchema(),r);return r(s,n)}if("byteLength"in e){let s=new Uint8Array(e.byteLength);return s.set(e,0),r(s,n)}if(e instanceof Date)return r(e,n);let o={};if(n.isMapSchema())for(let s of Object.keys(e))o[s]=Ai(e[s],n.getValueSchema(),r);else if(n.isStructSchema())for(let[s,i]of n.structIterator())o[s]=Ai(e[s],i,r);else if(n.isDocumentSchema())for(let s of Object.keys(e))o[s]=Ai(e[s],n.getValueSchema(),r);return r(o,n);default:return r(e,n)}}});var tF,rF,Oi,nF,zc,Ii,oF,Hp,qp,zp,Vp,sF,iF,US,aF,cF,Kc,dF,Kp,uF,ho,Gp,lF,pF,mF,LS,jS,fF,hF,Xr,Wp,Vc,Ni,Jp=y(()=>{tF=e=>{switch(e){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${e}"`)}},rF=e=>{if(e!=null){if(typeof e=="number"){if((e===0||e===1)&&Ni.warn(Vc(`Expected boolean, got ${typeof e}: ${e}`)),e===0)return!1;if(e===1)return!0}if(typeof e=="string"){let t=e.toLowerCase();if((t==="false"||t==="true")&&Ni.warn(Vc(`Expected boolean, got ${typeof e}: ${e}`)),t==="false")return!1;if(t==="true")return!0}if(typeof e=="boolean")return e;throw new TypeError(`Expected boolean, got ${typeof e}: ${e}`)}},Oi=e=>{if(e!=null){if(typeof e=="string"){let t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&Ni.warn(Vc(`Expected number but observed string: ${e}`)),t}if(typeof e=="number")return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}},nF=Math.ceil(34028234663852886e22),zc=e=>{let t=Oi(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>nF)throw new TypeError(`Expected 32-bit float, got ${e}`);return t},Ii=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}},oF=Ii,Hp=e=>Vp(e,32),qp=e=>Vp(e,16),zp=e=>Vp(e,8),Vp=(e,t)=>{let r=Ii(e);if(r!==void 0&&sF(r,t)!==r)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return r},sF=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},iF=(e,t)=>{if(e==null)throw t?new TypeError(`Expected a non-null value for ${t}`):new TypeError("Expected a non-null value");return e},US=e=>{if(e==null)return;if(typeof e=="object"&&!Array.isArray(e))return e;let t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},aF=e=>{if(e!=null){if(typeof e=="string")return e;if(["boolean","number","bigint"].includes(typeof e))return Ni.warn(Vc(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}},cF=e=>{if(e==null)return;let t=US(e),r=Object.entries(t).filter(([,n])=>n!=null).map(([n])=>n);if(r.length===0)throw new TypeError("Unions must have exactly one non-null member. None were found.");if(r.length>1)throw new TypeError(`Unions must have exactly one non-null member. Keys ${r} were not null.`);return t},Kc=e=>Oi(typeof e=="string"?ho(e):e),dF=Kc,Kp=e=>zc(typeof e=="string"?ho(e):e),uF=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,ho=e=>{let t=e.match(uF);if(t===null||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)},Gp=e=>typeof e=="string"?LS(e):Oi(e),lF=Gp,pF=Gp,mF=e=>typeof e=="string"?LS(e):zc(e),LS=e=>{switch(e){case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:throw new Error(`Unable to parse float value: ${e}`)}},jS=e=>Ii(typeof e=="string"?ho(e):e),fF=jS,hF=e=>Hp(typeof e=="string"?ho(e):e),Xr=e=>qp(typeof e=="string"?ho(e):e),Wp=e=>zp(typeof e=="string"?ho(e):e),Vc=e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`),Ni={warn:console.warn}});function Mi(e){let t=e.getUTCFullYear(),r=e.getUTCMonth(),n=e.getUTCDay(),o=e.getUTCDate(),s=e.getUTCHours(),i=e.getUTCMinutes(),a=e.getUTCSeconds(),c=o<10?`0${o}`:`${o}`,d=s<10?`0${s}`:`${s}`,l=i<10?`0${i}`:`${i}`,u=a<10?`0${a}`:`${a}`;return`${gF[n]}, ${c} ${Xp[r]} ${t} ${d}:${l}:${u} GMT`}var gF,Xp,yF,_F,SF,ki,EF,vF,wF,Fi,Ui,Di,bF,CF,PF,Yp,xF,TF,RF,wt,AF,OF,go,BS=y(()=>{Jp();gF=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Xp=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];yF=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/),_F=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=yF.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,o,s,i,a,c,d]=t,l=Xr(go(n)),u=wt(o,"month",1,12),p=wt(s,"day",1,31);return Di(l,u,p,{hours:i,minutes:a,seconds:c,fractionalMilliseconds:d})},SF=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),ki=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=SF.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,o,s,i,a,c,d,l]=t,u=Xr(go(n)),p=wt(o,"month",1,12),h=wt(s,"day",1,31),g=Di(u,p,h,{hours:i,minutes:a,seconds:c,fractionalMilliseconds:d});return l.toUpperCase()!="Z"&&g.setTime(g.getTime()-OF(l)),g},EF=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),vF=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),wF=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/),Fi=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-7231 date-times must be expressed as strings");let t=EF.exec(e);if(t){let[r,n,o,s,i,a,c,d]=t;return Di(Xr(go(s)),Yp(o),wt(n,"day",1,31),{hours:i,minutes:a,seconds:c,fractionalMilliseconds:d})}if(t=vF.exec(e),t){let[r,n,o,s,i,a,c,d]=t;return PF(Di(bF(s),Yp(o),wt(n,"day",1,31),{hours:i,minutes:a,seconds:c,fractionalMilliseconds:d}))}if(t=wF.exec(e),t){let[r,n,o,s,i,a,c,d]=t;return Di(Xr(go(d)),Yp(n),wt(o.trimLeft(),"day",1,31),{hours:s,minutes:i,seconds:a,fractionalMilliseconds:c})}throw new TypeError("Invalid RFC-7231 date-time value")},Ui=e=>{if(e==null)return;let t;if(typeof e=="number")t=e;else if(typeof e=="string")t=Kc(e);else if(typeof e=="object"&&e.tag===1)t=e.value;else throw new TypeError("Epoch timestamps must be expressed as floating point numbers or their string representation");if(Number.isNaN(t)||t===1/0||t===-1/0)throw new TypeError("Epoch timestamps must be valid, non-Infinite, non-NaN numerics");return new Date(Math.round(t*1e3))},Di=(e,t,r,n)=>{let o=t-1;return TF(e,o,r),new Date(Date.UTC(e,o,r,wt(n.hours,"hour",0,23),wt(n.minutes,"minute",0,59),wt(n.seconds,"seconds",0,60),AF(n.fractionalMilliseconds)))},bF=e=>{let t=new Date().getUTCFullYear(),r=Math.floor(t/100)*100+Xr(go(e));return r<t?r+100:r},CF=50*365*24*60*60*1e3,PF=e=>e.getTime()-new Date().getTime()>CF?new Date(Date.UTC(e.getUTCFullYear()-100,e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())):e,Yp=e=>{let t=Xp.indexOf(e);if(t<0)throw new TypeError(`Invalid month: ${e}`);return t+1},xF=[31,28,31,30,31,30,31,31,30,31,30,31],TF=(e,t,r)=>{let n=xF[t];if(t===1&&RF(e)&&(n=29),r>n)throw new TypeError(`Invalid day for ${Xp[t]} in ${e}: ${r}`)},RF=e=>e%4===0&&(e%100!==0||e%400===0),wt=(e,t,r,n)=>{let o=Wp(go(e));if(o<r||o>n)throw new TypeError(`${t} must be between ${r} and ${n}, inclusive`);return o},AF=e=>e==null?0:Kp("0."+e)*1e3,OF=e=>{let t=e[0],r=1;if(t=="+")r=1;else if(t=="-")r=-1;else throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);let n=Number(e.substring(1,3)),o=Number(e.substring(4,6));return r*(n*60+o)*60*1e3},go=e=>{let t=0;for(;t<e.length-1&&e.charAt(t)==="0";)t++;return t===0?e:e.slice(t)}});var Ie,$S=y(()=>{Ie=function(t){return Object.assign(new String(t),{deserializeJSON(){return JSON.parse(String(t))},toString(){return String(t)},toJSON(){return String(t)}})};Ie.from=e=>e&&typeof e=="object"&&(e instanceof Ie||"deserializeJSON"in e)?e:typeof e=="string"||Object.getPrototypeOf(e)===String.prototype?Ie(String(e)):Ie(JSON.stringify(e));Ie.fromObject=Ie.from});function Qp(e){return(e.includes(",")||e.includes('"'))&&(e=`"${e.replace(/"/g,'\\"')}"`),e}var HS=y(()=>{});function Zp(e,t,r){if(r<=0||!Number.isInteger(r))throw new Error("Invalid number of delimiters ("+r+") for splitEvery.");let n=e.split(t);if(r===1)return n;let o=[],s="";for(let i=0;i<n.length;i++)s===""?s=n[i]:s+=t+n[i],(i+1)%r===0&&(o.push(s),s="");return s!==""&&o.push(s),o}var qS=y(()=>{});var Li,zS=y(()=>{Li=e=>{let t=e.length,r=[],n=!1,o,s=0;for(let i=0;i<t;++i){let a=e[i];switch(a){case'"':o!=="\\"&&(n=!n);break;case",":n||(r.push(e.slice(s,i)),s=i+1);break;default:}o=a}return r.push(e.slice(s)),r.map(i=>{i=i.trim();let a=i.length;return a<2?i:(i[0]==='"'&&i[a-1]==='"'&&(i=i.slice(1,a-1)),i.replace(/\\"/g,'"'))})}});function IF(e){return new be(String(e),"bigDecimal")}var be,VS=y(()=>{be=class{constructor(t,r){this.string=t,this.type=r;let n=0;for(let o=0;o<t.length;++o){let s=t.charCodeAt(o);if(!(o===0&&s===45)){if(s===46){if(n)throw new Error("@smithy/core/serde - NumericValue must contain at most one decimal point.");n=1;continue}if(s<48||s>57)throw new Error('@smithy/core/serde - NumericValue must only contain [0-9], at most one decimal point ".", and an optional negation prefix "-".')}}}toString(){return this.string}[Symbol.hasInstance](t){if(!t||typeof t!="object")return!1;let r=t;return typeof r.string=="string"&&typeof r.type=="string"&&r.constructor?.name==="NumericValue"}}});var KS={};ct(KS,{LazyJsonString:()=>Ie,NumericValue:()=>be,copyDocumentWithTransform:()=>Ai,dateToUtcString:()=>Mi,expectBoolean:()=>rF,expectByte:()=>zp,expectFloat32:()=>zc,expectInt:()=>oF,expectInt32:()=>Hp,expectLong:()=>Ii,expectNonNull:()=>iF,expectNumber:()=>Oi,expectObject:()=>US,expectShort:()=>qp,expectString:()=>aF,expectUnion:()=>cF,handleFloat:()=>lF,limitedParseDouble:()=>Gp,limitedParseFloat:()=>pF,limitedParseFloat32:()=>mF,logger:()=>Ni,nv:()=>IF,parseBoolean:()=>tF,parseEpochTimestamp:()=>Ui,parseRfc3339DateTime:()=>_F,parseRfc3339DateTimeWithOffset:()=>ki,parseRfc7231DateTime:()=>Fi,quoteHeader:()=>Qp,splitEvery:()=>Zp,splitHeader:()=>Li,strictParseByte:()=>Wp,strictParseDouble:()=>Kc,strictParseFloat:()=>dF,strictParseFloat32:()=>Kp,strictParseInt:()=>fF,strictParseInt32:()=>hF,strictParseLong:()=>jS,strictParseShort:()=>Xr});var We=y(()=>{FS();BS();$S();Jp();HS();qS();zS();VS()});var Gc,GS,yo,em=y(()=>{ye();We();Gc=v(se()),GS=v(Bc());Pi();yo=class{constructor(t){this.options=t}getRequestType(){return Gc.HttpRequest}getResponseType(){return Gc.HttpResponse}setSerdeContext(t){this.serdeContext=t,this.serializer.setSerdeContext(t),this.deserializer.setSerdeContext(t),this.getPayloadCodec()&&this.getPayloadCodec().setSerdeContext(t)}updateServiceEndpoint(t,r){if("url"in r){t.protocol=r.url.protocol,t.hostname=r.url.hostname,t.port=r.url.port?Number(r.url.port):void 0,t.path=r.url.pathname,t.fragment=r.url.hash||void 0,t.username=r.url.username||void 0,t.password=r.url.password||void 0;for(let[n,o]of r.url.searchParams.entries())t.query||(t.query={}),t.query[n]=o;return t}else return t.protocol=r.protocol,t.hostname=r.hostname,t.port=r.port?Number(r.port):void 0,t.path=r.path,t.query={...r.query},t}setHostPrefix(t,r,n){let o=O.of(r),s=O.of(r.input);if(o.getMergedTraits().endpoint){let i=o.getMergedTraits().endpoint?.[0];if(typeof i=="string"){let a=[...s.structIterator()].filter(([,c])=>c.getMergedTraits().hostLabel);for(let[c]of a){let d=n[c];if(typeof d!="string")throw new Error(`@smithy/core/schema - ${c} in input must be a string as hostLabel.`);i=i.replace(`{${c}}`,d)}t.hostname=i+t.hostname}}}deserializeMetadata(t){return{httpStatusCode:t.statusCode,requestId:t.headers["x-amzn-requestid"]??t.headers["x-amzn-request-id"]??t.headers["x-amz-request-id"],extendedRequestId:t.headers["x-amz-id-2"],cfId:t.headers["x-amz-cf-id"]}}async deserializeHttpMessage(t,r,n,o,s){let i;o instanceof Set?i=s:i=o;let a=this.deserializer,c=O.of(t),d=[];for(let[l,u]of c.structIterator()){let p=u.getMemberTraits();if(p.httpPayload){if(u.isStreaming())if(u.isStructSchema()){let S=this.serdeContext;if(!S.eventStreamMarshaller)throw new Error("@smithy/core - HttpProtocol: eventStreamMarshaller missing in serdeContext.");let E=u.getMemberSchemas();i[l]=S.eventStreamMarshaller.deserialize(n.body,async b=>{let C=Object.keys(b).find(N=>N!=="__type")??"";if(C in E){let N=E[C];return{[C]:await a.read(N,b[C].body)}}else return{$unknown:b}})}else i[l]=(0,GS.sdkStreamMixin)(n.body);else if(n.body){let g=await Ge(n.body,r);g.byteLength>0&&(i[l]=await a.read(u,g))}}else if(p.httpHeader){let h=String(p.httpHeader).toLowerCase(),g=n.headers[h];if(g!=null)if(u.isListSchema()){let S=u.getValueSchema(),E;S.isTimestampSchema()&&S.getSchema()===x.TIMESTAMP_DEFAULT?E=Zp(g,",",2):E=Li(g);let b=[];for(let C of E)b.push(await a.read([S,{httpHeader:h}],C.trim()));i[l]=b}else i[l]=await a.read(u,g)}else if(p.httpPrefixHeaders!==void 0){i[l]={};for(let[h,g]of Object.entries(n.headers))h.startsWith(p.httpPrefixHeaders)&&(i[l][h.slice(p.httpPrefixHeaders.length)]=await a.read([u.getValueSchema(),{httpHeader:h}],g))}else p.httpResponseCode?i[l]=n.statusCode:d.push(l)}return d}}});var WS,Qr,JS=y(()=>{ye();WS=v(se());Pi();Hc();em();Qr=class extends yo{async serializeRequest(t,r,n){let o={...r??{}},s=this.serializer,i={},a={},c=await n.endpoint(),d=O.of(t?.input),l=d.getSchema(),u=!1,p,h=new WS.HttpRequest({protocol:"",hostname:"",port:void 0,path:"",fragment:void 0,query:i,headers:a,body:void 0});if(c){this.updateServiceEndpoint(h,c),this.setHostPrefix(h,t,o);let g=O.translateTraits(t.traits);if(g.http){h.method=g.http[0];let[S,E]=g.http[1].split("?");h.path=="/"?h.path=S:h.path+=S;let b=new URLSearchParams(E??"");Object.assign(i,Object.fromEntries(b))}}for(let[g,S]of d.structIterator()){let E=S.getMergedTraits()??{},b=o[g];if(b!=null)if(E.httpPayload){if(S.isStreaming()){if(S.isStructSchema())throw new Error("serialization of event streams is not yet implemented");p=b}else s.write(S,b),p=s.flush();delete o[g]}else if(E.httpLabel){s.write(S,b);let C=s.flush();h.path.includes(`{${g}+}`)?h.path=h.path.replace(`{${g}+}`,C.split("/").map(vt).join("/")):h.path.includes(`{${g}}`)&&(h.path=h.path.replace(`{${g}}`,vt(C))),delete o[g]}else if(E.httpHeader)s.write(S,b),a[E.httpHeader.toLowerCase()]=String(s.flush()),delete o[g];else if(typeof E.httpPrefixHeaders=="string"){for(let[C,N]of Object.entries(b)){let k=E.httpPrefixHeaders+C;s.write([S.getValueSchema(),{httpHeader:k}],N),a[k.toLowerCase()]=s.flush()}delete o[g]}else E.httpQuery||E.httpQueryParams?(this.serializeQuery(S,b,i),delete o[g]):u=!0}return u&&o&&(s.write(l,o),p=s.flush()),h.headers=a,h.query=i,h.body=p,h}serializeQuery(t,r,n){let o=this.serializer,s=t.getMergedTraits();if(s.httpQueryParams){for(let[i,a]of Object.entries(r))i in n||this.serializeQuery(O.of([t.getValueSchema(),{...s,httpQuery:i,httpQueryParams:void 0}]),a,n);return}if(t.isListSchema()){let i=!!t.getMergedTraits().sparse,a=[];for(let c of r){o.write([t.getValueSchema(),s],c);let d=o.flush();(i||d!==void 0)&&a.push(d)}n[s.httpQuery]=a}else o.write([t,s],r),n[s.httpQuery]=o.flush()}async deserializeResponse(t,r,n){let o=this.deserializer,s=O.of(t.output),i={};if(n.statusCode>=300){let d=await Ge(n.body,r);throw d.byteLength>0&&Object.assign(i,await o.read(x.DOCUMENT,d)),await this.handleError(t,r,n,i,this.deserializeMetadata(n)),new Error("@smithy/core/protocols - HTTP Protocol error handler failed to throw.")}for(let d in n.headers){let l=n.headers[d];delete n.headers[d],n.headers[d.toLowerCase()]=l}let a=await this.deserializeHttpMessage(s,r,n,i);if(a.length){let d=await Ge(n.body,r);if(d.byteLength>0){let l=await o.read(s,d);for(let u of a)i[u]=l[u]}}return{$metadata:this.deserializeMetadata(n),...i}}}});var YS,Zr,XS=y(()=>{ye();YS=v(se());Pi();em();Zr=class extends yo{async serializeRequest(t,r,n){let o=this.serializer,s={},i={},a=await n.endpoint(),d=O.of(t?.input).getSchema(),l,u=new YS.HttpRequest({protocol:"",hostname:"",port:void 0,path:"/",fragment:void 0,query:s,headers:i,body:void 0});a&&(this.updateServiceEndpoint(u,a),this.setHostPrefix(u,t,r));let p={...r};return r&&(o.write(d,p),l=o.flush()),u.headers=i,u.query=s,u.body=l,u.method="POST",u}async deserializeResponse(t,r,n){let o=this.deserializer,s=O.of(t.output),i={};if(n.statusCode>=300){let d=await Ge(n.body,r);throw d.byteLength>0&&Object.assign(i,await o.read(x.DOCUMENT,d)),await this.handleError(t,r,n,i,this.deserializeMetadata(n)),new Error("@smithy/core/protocols - RPC Protocol error handler failed to throw.")}for(let d in n.headers){let l=n.headers[d];delete n.headers[d],n.headers[d.toLowerCase()]=l}let a=await Ge(n.body,r);return a.byteLength>0&&Object.assign(i,await o.read(s,a)),{$metadata:this.deserializeMetadata(n),...i}}}});var tm,rm=y(()=>{Hc();tm=(e,t,r,n,o,s)=>{if(t!=null&&t[r]!==void 0){let i=n();if(i.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");e=e.replace(o,s?i.split("/").map(a=>vt(a)).join("/"):vt(i))}else throw new Error("No value provided for input HTTP label: "+r+".");return e}});function ji(e,t){return new Wc(e,t)}var QS,Wc,ZS=y(()=>{QS=v(se());rm();Wc=class{constructor(t,r){this.input=t,this.context=r,this.query={},this.method="",this.headers={},this.path="",this.body=null,this.hostname="",this.resolvePathStack=[]}async build(){let{hostname:t,protocol:r="https",port:n,path:o}=await this.context.endpoint();this.path=o;for(let s of this.resolvePathStack)s(this.path);return new QS.HttpRequest({protocol:r,hostname:this.hostname||t,port:n,method:this.method,path:this.path,query:this.query,body:this.body,headers:this.headers})}hn(t){return this.hostname=t,this}bp(t){return this.resolvePathStack.push(r=>{this.path=`${r?.endsWith("/")?r.slice(0,-1):r||""}`+t}),this}p(t,r,n,o){return this.resolvePathStack.push(s=>{this.path=tm(s,this.input,t,r,n,o)}),this}h(t){return this.headers=t,this}q(t){return this.query=t,this}b(t){return this.body=t,this}m(t){return this.method=t,this}}});function en(e,t){if(t.timestampFormat.useTrait&&e.isTimestampSchema()&&(e.getSchema()===x.TIMESTAMP_DATE_TIME||e.getSchema()===x.TIMESTAMP_HTTP_DATE||e.getSchema()===x.TIMESTAMP_EPOCH_SECONDS))return e.getSchema();let{httpLabel:r,httpPrefixHeaders:n,httpHeader:o,httpQuery:s}=e.getMergedTraits();return(t.httpBindings?typeof n=="string"||o?x.TIMESTAMP_HTTP_DATE:s||r?x.TIMESTAMP_DATE_TIME:void 0:void 0)??t.timestampFormat.default}var Jc=y(()=>{ye()});var nm,eE,tn,om=y(()=>{ye();We();nm=v(Oe()),eE=v(we());Jc();tn=class{constructor(t){this.settings=t}setSerdeContext(t){this.serdeContext=t}read(t,r){let n=O.of(t);if(n.isListSchema())return Li(r).map(o=>this.read(n.getValueSchema(),o));if(n.isBlobSchema())return(this.serdeContext?.base64Decoder??nm.fromBase64)(r);if(n.isTimestampSchema())switch(en(n,this.settings)){case x.TIMESTAMP_DATE_TIME:return ki(r);case x.TIMESTAMP_HTTP_DATE:return Fi(r);case x.TIMESTAMP_EPOCH_SECONDS:return Ui(r);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",r),new Date(r)}if(n.isStringSchema()){let o=n.getMergedTraits().mediaType,s=r;if(o)return n.getMergedTraits().httpHeader&&(s=this.base64ToUtf8(s)),(o==="application/json"||o.endsWith("+json"))&&(s=Ie.from(s)),s}switch(!0){case n.isNumericSchema():return Number(r);case n.isBigIntegerSchema():return BigInt(r);case n.isBigDecimalSchema():return new be(r,"bigDecimal");case n.isBooleanSchema():return String(r).toLowerCase()==="true"}return r}base64ToUtf8(t){return(this.serdeContext?.utf8Encoder??eE.toUtf8)((this.serdeContext?.base64Decoder??nm.fromBase64)(t))}}});var Yc,rn,tE=y(()=>{ye();Yc=v(we());om();rn=class{constructor(t,r){this.codecDeserializer=t,this.stringDeserializer=new tn(r)}setSerdeContext(t){this.stringDeserializer.setSerdeContext(t),this.codecDeserializer.setSerdeContext(t),this.serdeContext=t}read(t,r){let n=O.of(t),o=n.getMergedTraits(),s=this.serdeContext?.utf8Encoder??Yc.toUtf8;if(o.httpHeader||o.httpResponseCode)return this.stringDeserializer.read(n,s(r));if(o.httpPayload){if(n.isBlobSchema()){let i=this.serdeContext?.utf8Decoder??Yc.fromUtf8;return typeof r=="string"?i(r):r}else if(n.isStringSchema())return"byteLength"in r?s(r):r}return this.codecDeserializer.read(n,r)}}});var sm,Bi,im=y(()=>{ye();We();sm=v(Oe());Jc();Bi=class{constructor(t){this.settings=t,this.stringBuffer="",this.serdeContext=void 0}setSerdeContext(t){this.serdeContext=t}write(t,r){let n=O.of(t);switch(typeof r){case"object":if(r===null){this.stringBuffer="null";return}if(n.isTimestampSchema()){if(!(r instanceof Date))throw new Error(`@smithy/core/protocols - received non-Date value ${r} when schema expected Date in ${n.getName(!0)}`);switch(en(n,this.settings)){case x.TIMESTAMP_DATE_TIME:this.stringBuffer=r.toISOString().replace(".000Z","Z");break;case x.TIMESTAMP_HTTP_DATE:this.stringBuffer=Mi(r);break;case x.TIMESTAMP_EPOCH_SECONDS:this.stringBuffer=String(r.getTime()/1e3);break;default:console.warn("Missing timestamp format, using epoch seconds",r),this.stringBuffer=String(r.getTime()/1e3)}return}if(n.isBlobSchema()&&"byteLength"in r){this.stringBuffer=(this.serdeContext?.base64Encoder??sm.toBase64)(r);return}if(n.isListSchema()&&Array.isArray(r)){let i="";for(let a of r){this.write([n.getValueSchema(),n.getMergedTraits()],a);let c=this.flush(),d=n.getValueSchema().isTimestampSchema()?c:Qp(c);i!==""&&(i+=", "),i+=d}this.stringBuffer=i;return}this.stringBuffer=JSON.stringify(r,null,2);break;case"string":let o=n.getMergedTraits().mediaType,s=r;if(o&&((o==="application/json"||o.endsWith("+json"))&&(s=Ie.from(s)),n.getMergedTraits().httpHeader)){this.stringBuffer=(this.serdeContext?.base64Encoder??sm.toBase64)(s.toString());return}this.stringBuffer=r;break;default:this.stringBuffer=String(r)}}flush(){let t=this.stringBuffer;return this.stringBuffer="",t}}});var nn,rE=y(()=>{ye();im();nn=class{constructor(t,r,n=new Bi(r)){this.codecSerializer=t,this.stringSerializer=n}setSerdeContext(t){this.codecSerializer.setSerdeContext(t),this.stringSerializer.setSerdeContext(t)}write(t,r){let n=O.of(t),o=n.getMergedTraits();if(o.httpHeader||o.httpLabel||o.httpQuery){this.stringSerializer.write(n,r),this.buffer=this.stringSerializer.flush();return}return this.codecSerializer.write(n,r)}flush(){if(this.buffer!==void 0){let t=this.buffer;return this.buffer=void 0,t}return this.codecSerializer.flush()}}});var nE={};ct(nE,{FromStringShapeDeserializer:()=>tn,HttpBindingProtocol:()=>Qr,HttpInterceptingShapeDeserializer:()=>rn,HttpInterceptingShapeSerializer:()=>nn,RequestBuilder:()=>Wc,RpcProtocol:()=>Zr,ToStringShapeSerializer:()=>Bi,collectBody:()=>Ge,determineTimestampFormat:()=>en,extendedEncodeURIComponent:()=>vt,requestBuilder:()=>ji,resolvedPath:()=>tm});var zt=y(()=>{Pi();Hc();JS();XS();ZS();rm();om();tE();rE();im();Jc()});var oE=y(()=>{zt()});function NF(e,t,r){e.__smithy_context?e.__smithy_context.features||(e.__smithy_context.features={}):e.__smithy_context={features:{}},e.__smithy_context.features[t]=r}var sE=y(()=>{});var on,iE=y(()=>{on=class{constructor(t){this.authSchemes=new Map;for(let[r,n]of Object.entries(t))n!==void 0&&this.authSchemes.set(r,n)}getIdentityProvider(t){return this.authSchemes.get(t)}}});var aE,am,cm,cE=y(()=>{aE=v(se()),am=v(yt()),cm=class{async sign(t,r,n){if(!n)throw new Error("request could not be signed with `apiKey` since the `name` and `in` signer properties are missing");if(!n.name)throw new Error("request could not be signed with `apiKey` since the `name` signer property is missing");if(!n.in)throw new Error("request could not be signed with `apiKey` since the `in` signer property is missing");if(!r.apiKey)throw new Error("request could not be signed with `apiKey` since the `apiKey` is not defined");let o=aE.HttpRequest.clone(t);if(n.in===am.HttpApiKeyAuthLocation.QUERY)o.query[n.name]=r.apiKey;else if(n.in===am.HttpApiKeyAuthLocation.HEADER)o.headers[n.name]=n.scheme?`${n.scheme} ${r.apiKey}`:r.apiKey;else throw new Error("request can only be signed with `apiKey` locations `query` or `header`, but found: `"+n.in+"`");return o}}});var dE,dm,uE=y(()=>{dE=v(se()),dm=class{async sign(t,r,n){let o=dE.HttpRequest.clone(t);if(!r.token)throw new Error("request could not be signed with `token` since the `token` is not defined");return o.headers.Authorization=`Bearer ${r.token}`,o}}});var Vt,lE=y(()=>{Vt=class{async sign(t,r,n){return t}}});var pE=y(()=>{cE();uE();lE()});var mE,DF,um,Xc,lm,fE=y(()=>{mE=e=>t=>Xc(t)&&t.expiration.getTime()-Date.now()<e,DF=3e5,um=mE(3e5),Xc=e=>e.expiration!==void 0,lm=(e,t,r)=>{if(e===void 0)return;let n=typeof e!="function"?async()=>Promise.resolve(e):e,o,s,i,a=!1,c=async d=>{s||(s=n(d));try{o=await s,i=!0,a=!1}finally{s=void 0}return o};return t===void 0?async d=>((!i||d?.forceRefresh)&&(o=await c(d)),o):async d=>((!i||d?.forceRefresh)&&(o=await c(d)),a?o:r(o)?(t(o)&&await c(d),o):(a=!0,o))}});var hE=y(()=>{iE();pE();fE()});var _o={};ct(_o,{DefaultIdentityProviderConfig:()=>on,EXPIRATION_MS:()=>DF,HttpApiKeyAuthSigner:()=>cm,HttpBearerAuthSigner:()=>dm,NoAuthSigner:()=>Vt,createIsIdentityExpiredFunction:()=>mE,createPaginator:()=>d_,doesIdentityRequireRefresh:()=>Xc,getHttpAuthSchemeEndpointRuleSetPlugin:()=>wi,getHttpAuthSchemePlugin:()=>TM,getHttpSigningPlugin:()=>bi,getSmithyContext:()=>uM,httpAuthSchemeEndpointRuleSetMiddlewareOptions:()=>zy,httpAuthSchemeMiddleware:()=>vi,httpAuthSchemeMiddlewareOptions:()=>e_,httpSigningMiddleware:()=>sp,httpSigningMiddlewareOptions:()=>s_,isIdentityExpired:()=>um,memoizeIdentityProvider:()=>lm,normalizeProvider:()=>cr,requestBuilder:()=>ji,setFeature:()=>NF});var Ue=y(()=>{Fy();r_();a_();c_();u_();oE();sE();hE()});var vo=w((NY,CE)=>{var Qc=Object.defineProperty,MF=Object.getOwnPropertyDescriptor,kF=Object.getOwnPropertyNames,FF=Object.prototype.hasOwnProperty,te=(e,t)=>Qc(e,"name",{value:t,configurable:!0}),UF=(e,t)=>{for(var r in t)Qc(e,r,{get:t[r],enumerable:!0})},LF=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of kF(t))!FF.call(e,o)&&o!==r&&Qc(e,o,{get:()=>t[o],enumerable:!(n=MF(t,o))||n.enumerable});return e},jF=e=>LF(Qc({},"__esModule",{value:!0}),e),gE={};UF(gE,{EndpointCache:()=>BF,EndpointError:()=>Le,customEndpointFunctions:()=>mm,isIpAddress:()=>yE,isValidHostLabel:()=>hm,resolveEndpoint:()=>sU});CE.exports=jF(gE);var So,BF=(So=class{constructor({size:t,params:r}){this.data=new Map,this.parameters=[],this.capacity=t??50,r&&(this.parameters=r)}get(t,r){let n=this.hash(t);if(n===!1)return r();if(!this.data.has(n)){if(this.data.size>this.capacity+10){let o=this.data.keys(),s=0;for(;;){let{value:i,done:a}=o.next();if(this.data.delete(i),a||++s>10)break}}this.data.set(n,r())}return this.data.get(n)}size(){return this.data.size}hash(t){let r="",{parameters:n}=this;if(n.length===0)return!1;for(let o of n){let s=String(t[o]??"");if(s.includes("|;"))return!1;r+=s+"|;"}return r}},te(So,"EndpointCache"),So),$F=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),yE=te(e=>$F.test(e)||e.startsWith("[")&&e.endsWith("]"),"isIpAddress"),HF=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),hm=te((e,t=!1)=>{if(!t)return HF.test(e);let r=e.split(".");for(let n of r)if(!hm(n))return!1;return!0},"isValidHostLabel"),mm={},$i="endpoints";function Kt(e){return typeof e!="object"||e==null?e:"ref"in e?`$${Kt(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(Kt).join(", ")})`:JSON.stringify(e,null,2)}te(Kt,"toDebugString");var Eo,Le=(Eo=class extends Error{constructor(t){super(t),this.name="EndpointError"}},te(Eo,"EndpointError"),Eo),qF=te((e,t)=>e===t,"booleanEquals"),zF=te(e=>{let t=e.split("."),r=[];for(let n of t){let o=n.indexOf("[");if(o!==-1){if(n.indexOf("]")!==n.length-1)throw new Le(`Path: '${e}' does not end with ']'`);let s=n.slice(o+1,-1);if(Number.isNaN(parseInt(s)))throw new Le(`Invalid array index: '${s}' in path: '${e}'`);o!==0&&r.push(n.slice(0,o)),r.push(s)}else r.push(n)}return r},"getAttrPathList"),_E=te((e,t)=>zF(t).reduce((r,n)=>{if(typeof r!="object")throw new Le(`Index '${n}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},e),"getAttr"),VF=te(e=>e!=null,"isSet"),KF=te(e=>!e,"not"),fm=yt(),pm={[fm.EndpointURLScheme.HTTP]:80,[fm.EndpointURLScheme.HTTPS]:443},GF=te(e=>{let t=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){let{hostname:p,port:h,protocol:g="",path:S="",query:E={}}=e,b=new URL(`${g}//${p}${h?`:${h}`:""}${S}`);return b.search=Object.entries(E).map(([C,N])=>`${C}=${N}`).join("&"),b}return new URL(e)}catch{return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;let r=t.href,{host:n,hostname:o,pathname:s,protocol:i,search:a}=t;if(a)return null;let c=i.slice(0,-1);if(!Object.values(fm.EndpointURLScheme).includes(c))return null;let d=yE(o),l=r.includes(`${n}:${pm[c]}`)||typeof e=="string"&&e.includes(`${n}:${pm[c]}`),u=`${n}${l?`:${pm[c]}`:""}`;return{scheme:c,authority:u,path:s,normalizedPath:s.endsWith("/")?s:`${s}/`,isIp:d}},"parseURL"),WF=te((e,t)=>e===t,"stringEquals"),JF=te((e,t,r,n)=>t>=r||e.length<r?null:n?e.substring(e.length-r,e.length-t):e.substring(t,r),"substring"),YF=te(e=>encodeURIComponent(e).replace(/[!*'()]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),"uriEncode"),XF={booleanEquals:qF,getAttr:_E,isSet:VF,isValidHostLabel:hm,not:KF,parseURL:GF,stringEquals:WF,substring:JF,uriEncode:YF},SE=te((e,t)=>{let r=[],n={...t.endpointParams,...t.referenceRecord},o=0;for(;o<e.length;){let s=e.indexOf("{",o);if(s===-1){r.push(e.slice(o));break}r.push(e.slice(o,s));let i=e.indexOf("}",s);if(i===-1){r.push(e.slice(s));break}e[s+1]==="{"&&e[i+1]==="}"&&(r.push(e.slice(s+1,i)),o=i+2);let a=e.substring(s+1,i);if(a.includes("#")){let[c,d]=a.split("#");r.push(_E(n[c],d))}else r.push(n[a]);o=i+1}return r.join("")},"evaluateTemplate"),QF=te(({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e],"getReferenceValue"),Zc=te((e,t,r)=>{if(typeof e=="string")return SE(e,r);if(e.fn)return EE(e,r);if(e.ref)return QF(e,r);throw new Le(`'${t}': ${String(e)} is not a string, function or reference.`)},"evaluateExpression"),EE=te(({fn:e,argv:t},r)=>{let n=t.map(s=>["boolean","number"].includes(typeof s)?s:Zc(s,"arg",r)),o=e.split(".");return o[0]in mm&&o[1]!=null?mm[o[0]][o[1]](...n):XF[e](...n)},"callFunction"),ZF=te(({assign:e,...t},r)=>{if(e&&e in r.referenceRecord)throw new Le(`'${e}' is already defined in Reference Record.`);let n=EE(t,r);return r.logger?.debug?.(`${$i} evaluateCondition: ${Kt(t)} = ${Kt(n)}`),{result:n===""?!0:!!n,...e!=null&&{toAssign:{name:e,value:n}}}},"evaluateCondition"),gm=te((e=[],t)=>{let r={};for(let n of e){let{result:o,toAssign:s}=ZF(n,{...t,referenceRecord:{...t.referenceRecord,...r}});if(!o)return{result:o};s&&(r[s.name]=s.value,t.logger?.debug?.(`${$i} assign: ${s.name} := ${Kt(s.value)}`))}return{result:!0,referenceRecord:r}},"evaluateConditions"),eU=te((e,t)=>Object.entries(e).reduce((r,[n,o])=>({...r,[n]:o.map(s=>{let i=Zc(s,"Header value entry",t);if(typeof i!="string")throw new Le(`Header '${n}' value '${i}' is not a string`);return i})}),{}),"getEndpointHeaders"),vE=te((e,t)=>{if(Array.isArray(e))return e.map(r=>vE(r,t));switch(typeof e){case"string":return SE(e,t);case"object":if(e===null)throw new Le(`Unexpected endpoint property: ${e}`);return wE(e,t);case"boolean":return e;default:throw new Le(`Unexpected endpoint property type: ${typeof e}`)}},"getEndpointProperty"),wE=te((e,t)=>Object.entries(e).reduce((r,[n,o])=>({...r,[n]:vE(o,t)}),{}),"getEndpointProperties"),tU=te((e,t)=>{let r=Zc(e,"Endpoint URL",t);if(typeof r=="string")try{return new URL(r)}catch(n){throw console.error(`Failed to construct URL with ${r}`,n),n}throw new Le(`Endpoint URL must be a string, got ${typeof r}`)},"getEndpointUrl"),rU=te((e,t)=>{let{conditions:r,endpoint:n}=e,{result:o,referenceRecord:s}=gm(r,t);if(!o)return;let i={...t,referenceRecord:{...t.referenceRecord,...s}},{url:a,properties:c,headers:d}=n;return t.logger?.debug?.(`${$i} Resolving endpoint from template: ${Kt(n)}`),{...d!=null&&{headers:eU(d,i)},...c!=null&&{properties:wE(c,i)},url:tU(a,i)}},"evaluateEndpointRule"),nU=te((e,t)=>{let{conditions:r,error:n}=e,{result:o,referenceRecord:s}=gm(r,t);if(o)throw new Le(Zc(n,"Error",{...t,referenceRecord:{...t.referenceRecord,...s}}))},"evaluateErrorRule"),oU=te((e,t)=>{let{conditions:r,rules:n}=e,{result:o,referenceRecord:s}=gm(r,t);if(o)return bE(n,{...t,referenceRecord:{...t.referenceRecord,...s}})},"evaluateTreeRule"),bE=te((e,t)=>{for(let r of e)if(r.type==="endpoint"){let n=rU(r,t);if(n)return n}else if(r.type==="error")nU(r,t);else if(r.type==="tree"){let n=oU(r,t);if(n)return n}else throw new Le(`Unknown endpoint rule: ${r}`);throw new Le("Rules evaluation failed")},"evaluateRules"),sU=te((e,t)=>{let{endpointParams:r,logger:n}=t,{parameters:o,rules:s}=e;t.logger?.debug?.(`${$i} Initial EndpointParams: ${Kt(r)}`);let i=Object.entries(o).filter(([,d])=>d.default!=null).map(([d,l])=>[d,l.default]);if(i.length>0)for(let[d,l]of i)r[d]=r[d]??l;let a=Object.entries(o).filter(([,d])=>d.required).map(([d])=>d);for(let d of a)if(r[d]==null)throw new Le(`Missing required parameter: '${d}'`);let c=bE(s,{endpointParams:r,logger:n,referenceRecord:{}});return t.logger?.debug?.(`${$i} Resolved endpoint: ${Kt(c)}`),c},"resolveEndpoint")});var RE=w((DY,TE)=>{var ed=Object.defineProperty,iU=Object.getOwnPropertyDescriptor,aU=Object.getOwnPropertyNames,cU=Object.prototype.hasOwnProperty,dU=(e,t)=>ed(e,"name",{value:t,configurable:!0}),uU=(e,t)=>{for(var r in t)ed(e,r,{get:t[r],enumerable:!0})},lU=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of aU(t))!cU.call(e,o)&&o!==r&&ed(e,o,{get:()=>t[o],enumerable:!(n=iU(t,o))||n.enumerable});return e},pU=e=>lU(ed({},"__esModule",{value:!0}),e),PE={};uU(PE,{parseQueryString:()=>xE});TE.exports=pU(PE);function xE(e){let t={};if(e=e.replace(/^\?/,""),e)for(let r of e.split("&")){let[n,o=null]=r.split("=");n=decodeURIComponent(n),o&&(o=decodeURIComponent(o)),n in t?Array.isArray(t[n])?t[n].push(o):t[n]=[t[n],o]:t[n]=o}return t}dU(xE,"parseQueryString")});var mr=w((MY,IE)=>{var td=Object.defineProperty,mU=Object.getOwnPropertyDescriptor,fU=Object.getOwnPropertyNames,hU=Object.prototype.hasOwnProperty,gU=(e,t)=>td(e,"name",{value:t,configurable:!0}),yU=(e,t)=>{for(var r in t)td(e,r,{get:t[r],enumerable:!0})},_U=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of fU(t))!hU.call(e,o)&&o!==r&&td(e,o,{get:()=>t[o],enumerable:!(n=mU(t,o))||n.enumerable});return e},SU=e=>_U(td({},"__esModule",{value:!0}),e),AE={};yU(AE,{parseUrl:()=>OE});IE.exports=SU(AE);var EU=RE(),OE=gU(e=>{if(typeof e=="string")return OE(new URL(e));let{hostname:t,pathname:r,port:n,protocol:o,search:s}=e,i;return s&&(i=(0,EU.parseQueryString)(s)),{hostname:t,port:n?parseInt(n):void 0,protocol:o,path:r,query:i}},"parseUrl")});var wo=w((kY,HE)=>{"use strict";var rd=Object.defineProperty,vU=Object.getOwnPropertyDescriptor,wU=Object.getOwnPropertyNames,bU=Object.prototype.hasOwnProperty,fr=(e,t)=>rd(e,"name",{value:t,configurable:!0}),CU=(e,t)=>{for(var r in t)rd(e,r,{get:t[r],enumerable:!0})},PU=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of wU(t))!bU.call(e,o)&&o!==r&&rd(e,o,{get:()=>t[o],enumerable:!(n=vU(t,o))||n.enumerable});return e},xU=e=>PU(rd({},"__esModule",{value:!0}),e),DE={};CU(DE,{ConditionObject:()=>ae.ConditionObject,DeprecatedObject:()=>ae.DeprecatedObject,EndpointError:()=>ae.EndpointError,EndpointObject:()=>ae.EndpointObject,EndpointObjectHeaders:()=>ae.EndpointObjectHeaders,EndpointObjectProperties:()=>ae.EndpointObjectProperties,EndpointParams:()=>ae.EndpointParams,EndpointResolverOptions:()=>ae.EndpointResolverOptions,EndpointRuleObject:()=>ae.EndpointRuleObject,ErrorRuleObject:()=>ae.ErrorRuleObject,EvaluateOptions:()=>ae.EvaluateOptions,Expression:()=>ae.Expression,FunctionArgv:()=>ae.FunctionArgv,FunctionObject:()=>ae.FunctionObject,FunctionReturn:()=>ae.FunctionReturn,ParameterObject:()=>ae.ParameterObject,ReferenceObject:()=>ae.ReferenceObject,ReferenceRecord:()=>ae.ReferenceRecord,RuleSetObject:()=>ae.RuleSetObject,RuleSetRules:()=>ae.RuleSetRules,TreeRuleObject:()=>ae.TreeRuleObject,awsEndpointFunctions:()=>BE,getUserAgentPrefix:()=>OU,isIpAddress:()=>ae.isIpAddress,partition:()=>LE,resolveDefaultAwsRegionalEndpointsConfig:()=>NU,resolveEndpoint:()=>ae.resolveEndpoint,setPartitionInfo:()=>jE,toEndpointV1:()=>$E,useDefaultPartitionInfo:()=>AU});HE.exports=xU(DE);var ae=vo(),ME=fr((e,t=!1)=>{if(t){for(let r of e.split("."))if(!ME(r))return!1;return!0}return!(!(0,ae.isValidHostLabel)(e)||e.length<3||e.length>63||e!==e.toLowerCase()||(0,ae.isIpAddress)(e))},"isVirtualHostableS3Bucket"),NE=":",TU="/",RU=fr(e=>{let t=e.split(NE);if(t.length<6)return null;let[r,n,o,s,i,...a]=t;if(r!=="arn"||n===""||o===""||a.join(NE)==="")return null;let c=a.map(d=>d.split(TU)).flat();return{partition:n,service:o,region:s,accountId:i,resourceId:c}},"parseArn"),kE={partitions:[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-east-1",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il|mx)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-east-2":{description:"Asia Pacific (Taipei)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"ap-southeast-5":{description:"Asia Pacific (Malaysia)"},"ap-southeast-7":{description:"Asia Pacific (Thailand)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"ca-west-1":{description:"Canada West (Calgary)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"mx-central-1":{description:"Mexico (Central)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",implicitGlobalRegion:"cn-northwest-1",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",implicitGlobalRegion:"us-gov-west-1",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",implicitGlobalRegion:"us-iso-east-1",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",implicitGlobalRegion:"us-isob-east-1",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"cloud.adc-e.uk",implicitGlobalRegion:"eu-isoe-west-1",name:"aws-iso-e",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{"aws-iso-e-global":{description:"AWS ISOE (Europe) global region"},"eu-isoe-west-1":{description:"EU ISOE West"}}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"csp.hci.ic.gov",implicitGlobalRegion:"us-isof-south-1",name:"aws-iso-f",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{"aws-iso-f-global":{description:"AWS ISOF global region"},"us-isof-east-1":{description:"US ISOF EAST"},"us-isof-south-1":{description:"US ISOF SOUTH"}}},{id:"aws-eusc",outputs:{dnsSuffix:"amazonaws.eu",dualStackDnsSuffix:"amazonaws.eu",implicitGlobalRegion:"eusc-de-east-1",name:"aws-eusc",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eusc\\-(de)\\-\\w+\\-\\d+$",regions:{"eusc-de-east-1":{description:"EU (Germany)"}}}],version:"1.1"},FE=kE,UE="",LE=fr(e=>{let{partitions:t}=FE;for(let n of t){let{regions:o,outputs:s}=n;for(let[i,a]of Object.entries(o))if(i===e)return{...s,...a}}for(let n of t){let{regionRegex:o,outputs:s}=n;if(new RegExp(o).test(e))return{...s}}let r=t.find(n=>n.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},"partition"),jE=fr((e,t="")=>{FE=e,UE=t},"setPartitionInfo"),AU=fr(()=>{jE(kE,"")},"useDefaultPartitionInfo"),OU=fr(()=>UE,"getUserAgentPrefix"),BE={isVirtualHostableS3Bucket:ME,parseArn:RU,partition:LE};ae.customEndpointFunctions.aws=BE;var IU=mr(),NU=fr(e=>{if(typeof e.endpointProvider!="function")throw new Error("@aws-sdk/util-endpoint - endpointProvider and endpoint missing in config for this client.");let{endpoint:t}=e;return t===void 0&&(e.endpoint=async()=>$E(e.endpointProvider({Region:typeof e.region=="function"?await e.region():e.region,UseDualStack:typeof e.useDualstackEndpoint=="function"?await e.useDualstackEndpoint():e.useDualstackEndpoint,UseFIPS:typeof e.useFipsEndpoint=="function"?await e.useFipsEndpoint():e.useFipsEndpoint,Endpoint:void 0},{logger:e.logger}))),e},"resolveDefaultAwsRegionalEndpointsConfig"),$E=fr(e=>(0,IU.parseUrl)(e.url),"toEndpointV1")});var nd,bo,qE=y(()=>{nd={warningEmitted:!1},bo=e=>{e&&!nd.warningEmitted&&parseInt(e.substring(1,e.indexOf(".")))<18&&(nd.warningEmitted=!0,process.emitWarning(`NodeDeprecationWarning: The AWS SDK for JavaScript (v3) will
no longer support Node.js 16.x on January 6, 2025.

To continue receiving updates to AWS services, bug fixes, and security
updates please upgrade to a supported Node.js LTS version.

More information can be found at: https://a.co/74kJMmI`))}});function hr(e,t,r){return e.$source||(e.$source={}),e.$source[t]=r,e}var zE=y(()=>{});function VE(e,t,r){e.__aws_sdk_context?e.__aws_sdk_context.features||(e.__aws_sdk_context.features={}):e.__aws_sdk_context={features:{}},e.__aws_sdk_context.features[t]=r}var KE=y(()=>{});function GE(e,t,r){return e.$source||(e.$source={}),e.$source[t]=r,e}var WE=y(()=>{});var gr={};ct(gr,{emitWarningIfUnsupportedVersion:()=>bo,setCredentialFeature:()=>hr,setFeature:()=>VE,setTokenFeature:()=>GE,state:()=>nd});var pt=y(()=>{qE();zE();KE();WE()});var JE,ym,YE=y(()=>{JE=v(se()),ym=e=>JE.HttpResponse.isInstance(e)?e.headers?.date??e.headers?.Date:void 0});var Co,_m=y(()=>{Co=e=>new Date(Date.now()+e)});var XE,QE=y(()=>{_m();XE=(e,t)=>Math.abs(Co(t).getTime()-e)>=3e5});var Sm,ZE=y(()=>{QE();Sm=(e,t)=>{let r=Date.parse(e);return XE(r,t)?r-Date.now():t}});var Em=y(()=>{YE();_m();ZE()});var ev,Hi,Po,je,vm,wm=y(()=>{ev=v(se());Em();Hi=(e,t)=>{if(!t)throw new Error(`Property \`${e}\` is not resolved for AWS SDK SigV4Auth`);return t},Po=async e=>{let t=Hi("context",e.context),r=Hi("config",e.config),n=t.endpointV2?.properties?.authSchemes?.[0],s=await Hi("signer",r.signer)(n),i=e?.signingRegion,a=e?.signingRegionSet,c=e?.signingName;return{config:r,signer:s,signingRegion:i,signingRegionSet:a,signingName:c}},je=class{async sign(t,r,n){if(!ev.HttpRequest.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let o=await Po(n),{config:s,signer:i}=o,{signingRegion:a,signingName:c}=o,d=n.context;if(d?.authSchemes?.length??!1){let[u,p]=d.authSchemes;u?.name==="sigv4a"&&p?.name==="sigv4"&&(a=p?.signingRegion??a,c=p?.signingName??c)}return await i.sign(t,{signingDate:Co(s.systemClockOffset),signingRegion:a,signingService:c})}errorHandler(t){return r=>{let n=r.ServerTime??ym(r.$response);if(n){let o=Hi("config",t.config),s=o.systemClockOffset;o.systemClockOffset=Sm(n,o.systemClockOffset),o.systemClockOffset!==s&&r.$metadata&&(r.$metadata.clockSkewCorrected=!0)}throw r}}successHandler(t,r){let n=ym(t);if(n){let o=Hi("config",r.config);o.systemClockOffset=Sm(n,o.systemClockOffset)}}},vm=je});var tv,qi,rv=y(()=>{tv=v(se());Em();wm();qi=class extends je{async sign(t,r,n){if(!tv.HttpRequest.isInstance(t))throw new Error("The request is not an instance of `HttpRequest` and cannot be signed");let{config:o,signer:s,signingRegion:i,signingRegionSet:a,signingName:c}=await Po(n),l=(await o.sigv4aSigningRegionSet?.()??a??[i]).join(",");return await s.sign(t,{signingDate:Co(o.systemClockOffset),signingRegion:l,signingService:c})}}});var bm,ov=y(()=>{bm=e=>typeof e=="string"&&e.length>0?e.split(",").map(t=>t.trim()):[]});var od,Cm=y(()=>{od=e=>`AWS_BEARER_TOKEN_${e.replace(/[\s-]/g,"_").toUpperCase()}`});var sv,iv,xo,av=y(()=>{ov();Cm();sv="AWS_AUTH_SCHEME_PREFERENCE",iv="auth_scheme_preference",xo={environmentVariableSelector:(e,t)=>{if(t?.signingName&&od(t.signingName)in e)return["httpBearerAuth"];if(sv in e)return bm(e[sv])},configFileSelector:e=>{if(iv in e)return bm(e[iv])},default:[]}});var Ne=w((uX,dv)=>{var sd=Object.defineProperty,DU=Object.getOwnPropertyDescriptor,MU=Object.getOwnPropertyNames,kU=Object.prototype.hasOwnProperty,dn=(e,t)=>sd(e,"name",{value:t,configurable:!0}),FU=(e,t)=>{for(var r in t)sd(e,r,{get:t[r],enumerable:!0})},UU=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of MU(t))!kU.call(e,o)&&o!==r&&sd(e,o,{get:()=>t[o],enumerable:!(n=DU(t,o))||n.enumerable});return e},LU=e=>UU(sd({},"__esModule",{value:!0}),e),cv={};FU(cv,{CredentialsProviderError:()=>jU,ProviderError:()=>id,TokenProviderError:()=>BU,chain:()=>$U,fromStatic:()=>HU,memoize:()=>qU});dv.exports=LU(cv);var sn,id=(sn=class extends Error{constructor(t,r=!0){let n,o=!0;typeof r=="boolean"?(n=void 0,o=r):r!=null&&typeof r=="object"&&(n=r.logger,o=r.tryNextLink??!0),super(t),this.name="ProviderError",this.tryNextLink=o,Object.setPrototypeOf(this,sn.prototype),n?.debug?.(`@smithy/property-provider ${o?"->":"(!)"} ${t}`)}static from(t,r=!0){return Object.assign(new this(t.message,r),t)}},dn(sn,"ProviderError"),sn),an,jU=(an=class extends id{constructor(t,r=!0){super(t,r),this.name="CredentialsProviderError",Object.setPrototypeOf(this,an.prototype)}},dn(an,"CredentialsProviderError"),an),cn,BU=(cn=class extends id{constructor(t,r=!0){super(t,r),this.name="TokenProviderError",Object.setPrototypeOf(this,cn.prototype)}},dn(cn,"TokenProviderError"),cn),$U=dn((...e)=>async()=>{if(e.length===0)throw new id("No providers in chain");let t;for(let r of e)try{return await r()}catch(n){if(t=n,n?.tryNextLink)continue;throw n}throw t},"chain"),HU=dn(e=>()=>Promise.resolve(e),"fromStatic"),qU=dn((e,t,r)=>{let n,o,s,i=!1,a=dn(async()=>{o||(o=e());try{n=await o,s=!0,i=!1}finally{o=void 0}return n},"coalesceProvider");return t===void 0?async c=>((!s||c?.forceRefresh)&&(n=await a()),n):async c=>((!s||c?.forceRefresh)&&(n=await a()),i?n:r&&!r(n)?(i=!0,n):(t(n)&&await a(),n))},"memoize")});var Pm,uv,lv,pv=y(()=>{Ue();Pm=v(Ne()),uv=e=>(e.sigv4aSigningRegionSet=cr(e.sigv4aSigningRegionSet),e),lv={environmentVariableSelector(e){if(e.AWS_SIGV4A_SIGNING_REGION_SET)return e.AWS_SIGV4A_SIGNING_REGION_SET.split(",").map(t=>t.trim());throw new Pm.ProviderError("AWS_SIGV4A_SIGNING_REGION_SET not set in env.",{tryNextLink:!0})},configFileSelector(e){if(e.sigv4a_signing_region_set)return(e.sigv4a_signing_region_set??"").split(",").map(t=>t.trim());throw new Pm.ProviderError("sigv4a_signing_region_set not set in profile.",{tryNextLink:!0})},default:void 0}});var Bv=w((mX,jv)=>{var md=Object.defineProperty,zU=Object.getOwnPropertyDescriptor,VU=Object.getOwnPropertyNames,KU=Object.prototype.hasOwnProperty,Ce=(e,t)=>md(e,"name",{value:t,configurable:!0}),GU=(e,t)=>{for(var r in t)md(e,r,{get:t[r],enumerable:!0})},WU=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of VU(t))!KU.call(e,o)&&o!==r&&md(e,o,{get:()=>t[o],enumerable:!(n=zU(t,o))||n.enumerable});return e},JU=e=>WU(md({},"__esModule",{value:!0}),e),yv={};GU(yv,{ALGORITHM_IDENTIFIER:()=>ad,ALGORITHM_IDENTIFIER_V4A:()=>ZU,ALGORITHM_QUERY_PARAM:()=>_v,ALWAYS_UNSIGNABLE_HEADERS:()=>xv,AMZ_DATE_HEADER:()=>Dm,AMZ_DATE_QUERY_PARAM:()=>Am,AUTH_HEADER:()=>Nm,CREDENTIAL_QUERY_PARAM:()=>Sv,DATE_HEADER:()=>wv,EVENT_ALGORITHM_IDENTIFIER:()=>Av,EXPIRES_QUERY_PARAM:()=>vv,GENERATED_HEADERS:()=>bv,HOST_HEADER:()=>XU,KEY_TYPE_IDENTIFIER:()=>Mm,MAX_CACHE_SIZE:()=>Iv,MAX_PRESIGNED_TTL:()=>Nv,PROXY_HEADER_PATTERN:()=>Tv,REGION_SET_PARAM:()=>YU,SEC_HEADER_PATTERN:()=>Rv,SHA256_HEADER:()=>pd,SIGNATURE_HEADER:()=>Cv,SIGNATURE_QUERY_PARAM:()=>Om,SIGNED_HEADERS_QUERY_PARAM:()=>Ev,SignatureV4:()=>uL,SignatureV4Base:()=>Lv,TOKEN_HEADER:()=>Pv,TOKEN_QUERY_PARAM:()=>Im,UNSIGNABLE_PATTERNS:()=>QU,UNSIGNED_PAYLOAD:()=>Ov,clearCredentialCache:()=>tL,createScope:()=>dd,getCanonicalHeaders:()=>xm,getCanonicalQuery:()=>Uv,getPayloadHash:()=>ud,getSigningKey:()=>Dv,hasHeader:()=>Mv,moveHeadersToQuery:()=>Fv,prepareRequest:()=>Rm,signatureV4aContainer:()=>lL});jv.exports=JU(yv);var mv=we(),_v="X-Amz-Algorithm",Sv="X-Amz-Credential",Am="X-Amz-Date",Ev="X-Amz-SignedHeaders",vv="X-Amz-Expires",Om="X-Amz-Signature",Im="X-Amz-Security-Token",YU="X-Amz-Region-Set",Nm="authorization",Dm=Am.toLowerCase(),wv="date",bv=[Nm,Dm,wv],Cv=Om.toLowerCase(),pd="x-amz-content-sha256",Pv=Im.toLowerCase(),XU="host",xv={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},Tv=/^proxy-/,Rv=/^sec-/,QU=[/^proxy-/i,/^sec-/i],ad="AWS4-HMAC-SHA256",ZU="AWS4-ECDSA-P256-SHA256",Av="AWS4-HMAC-SHA256-PAYLOAD",Ov="UNSIGNED-PAYLOAD",Iv=50,Mm="aws4_request",Nv=60*60*24*7,yr=Fc(),eL=we(),To={},cd=[],dd=Ce((e,t,r)=>`${e}/${t}/${r}/${Mm}`,"createScope"),Dv=Ce(async(e,t,r,n,o)=>{let s=await fv(e,t.secretAccessKey,t.accessKeyId),i=`${r}:${n}:${o}:${(0,yr.toHex)(s)}:${t.sessionToken}`;if(i in To)return To[i];for(cd.push(i);cd.length>Iv;)delete To[cd.shift()];let a=`AWS4${t.secretAccessKey}`;for(let c of[r,n,o,Mm])a=await fv(e,a,c);return To[i]=a},"getSigningKey"),tL=Ce(()=>{cd.length=0,Object.keys(To).forEach(e=>{delete To[e]})},"clearCredentialCache"),fv=Ce((e,t,r)=>{let n=new e(t);return n.update((0,eL.toUint8Array)(r)),n.digest()},"hmac"),xm=Ce(({headers:e},t,r)=>{let n={};for(let o of Object.keys(e).sort()){if(e[o]==null)continue;let s=o.toLowerCase();(s in xv||t?.has(s)||Tv.test(s)||Rv.test(s))&&(!r||r&&!r.has(s))||(n[s]=e[o].trim().replace(/\s+/g," "))}return n},"getCanonicalHeaders"),rL=ap(),nL=we(),ud=Ce(async({headers:e,body:t},r)=>{for(let n of Object.keys(e))if(n.toLowerCase()===pd)return e[n];if(t==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof t=="string"||ArrayBuffer.isView(t)||(0,rL.isArrayBuffer)(t)){let n=new r;return n.update((0,nL.toUint8Array)(t)),(0,yr.toHex)(await n.digest())}return Ov},"getPayloadHash"),hv=we(),Ro,oL=(Ro=class{format(t){let r=[];for(let s of Object.keys(t)){let i=(0,hv.fromUtf8)(s);r.push(Uint8Array.from([i.byteLength]),i,this.formatHeaderValue(t[s]))}let n=new Uint8Array(r.reduce((s,i)=>s+i.byteLength,0)),o=0;for(let s of r)n.set(s,o),o+=s.byteLength;return n}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,t.value,!1),new Uint8Array(n.buffer);case"long":let o=new Uint8Array(9);return o[0]=5,o.set(t.value.bytes,1),o;case"binary":let s=new DataView(new ArrayBuffer(3+t.value.byteLength));s.setUint8(0,6),s.setUint16(1,t.value.byteLength,!1);let i=new Uint8Array(s.buffer);return i.set(t.value,3),i;case"string":let a=(0,hv.fromUtf8)(t.value),c=new DataView(new ArrayBuffer(3+a.byteLength));c.setUint8(0,7),c.setUint16(1,a.byteLength,!1);let d=new Uint8Array(c.buffer);return d.set(a,3),d;case"timestamp":let l=new Uint8Array(9);return l[0]=8,l.set(iL.fromNumber(t.value.valueOf()).bytes,1),l;case"uuid":if(!sL.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);let u=new Uint8Array(17);return u[0]=9,u.set((0,yr.fromHex)(t.value.replace(/\-/g,"")),1),u}}},Ce(Ro,"HeaderFormatter"),Ro),sL=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,un,iL=(un=class{constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,o=Math.abs(Math.round(t));n>-1&&o>0;n--,o/=256)r[n]=o;return t<0&&Tm(r),new un(r)}valueOf(){let t=this.bytes.slice(0),r=t[0]&128;return r&&Tm(t),parseInt((0,yr.toHex)(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}},Ce(un,"Int64"),un);function Tm(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}Ce(Tm,"negate");var Mv=Ce((e,t)=>{e=e.toLowerCase();for(let r of Object.keys(t))if(e===r.toLowerCase())return!0;return!1},"hasHeader"),kv=se(),Fv=Ce((e,t={})=>{let{headers:r,query:n={}}=kv.HttpRequest.clone(e);for(let o of Object.keys(r)){let s=o.toLowerCase();(s.slice(0,6)==="x-amz-"&&!t.unhoistableHeaders?.has(s)||t.hoistableHeaders?.has(s))&&(n[o]=r[o],delete r[o])}return{...e,headers:r,query:n}},"moveHeadersToQuery"),Rm=Ce(e=>{e=kv.HttpRequest.clone(e);for(let t of Object.keys(e.headers))bv.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e},"prepareRequest"),gv=He(),aL=we(),ld=wp(),Uv=Ce(({query:e={}})=>{let t=[],r={};for(let n of Object.keys(e)){if(n.toLowerCase()===Cv)continue;let o=(0,ld.escapeUri)(n);t.push(o);let s=e[n];typeof s=="string"?r[o]=`${o}=${(0,ld.escapeUri)(s)}`:Array.isArray(s)&&(r[o]=s.slice(0).reduce((i,a)=>i.concat([`${o}=${(0,ld.escapeUri)(a)}`]),[]).sort().join("&"))}return t.sort().map(n=>r[n]).filter(n=>n).join("&")},"getCanonicalQuery"),cL=Ce(e=>dL(e).toISOString().replace(/\.\d{3}Z$/,"Z"),"iso8601"),dL=Ce(e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e,"toDate"),Ao,Lv=(Ao=class{constructor({applyChecksum:t,credentials:r,region:n,service:o,sha256:s,uriEscapePath:i=!0}){this.service=o,this.sha256=s,this.uriEscapePath=i,this.applyChecksum=typeof t=="boolean"?t:!0,this.regionProvider=(0,gv.normalizeProvider)(n),this.credentialProvider=(0,gv.normalizeProvider)(r)}createCanonicalRequest(t,r,n){let o=Object.keys(r).sort();return`${t.method}
${this.getCanonicalPath(t)}
${Uv(t)}
${o.map(s=>`${s}:${r[s]}`).join(`
`)}

${o.join(";")}
${n}`}async createStringToSign(t,r,n,o){let s=new this.sha256;s.update((0,aL.toUint8Array)(n));let i=await s.digest();return`${o}
${t}
${r}
${(0,yr.toHex)(i)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){let r=[];for(let s of t.split("/"))s?.length!==0&&s!=="."&&(s===".."?r.pop():r.push(s));let n=`${t?.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&t?.endsWith("/")?"/":""}`;return(0,ld.escapeUri)(n).replace(/%2F/g,"/")}return t}validateResolvedCredentials(t){if(typeof t!="object"||typeof t.accessKeyId!="string"||typeof t.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}formatDate(t){let r=cL(t).replace(/[\-:]/g,"");return{longDate:r,shortDate:r.slice(0,8)}}getCanonicalHeaderList(t){return Object.keys(t).sort().join(";")}},Ce(Ao,"SignatureV4Base"),Ao),Oo,uL=(Oo=class extends Lv{constructor({applyChecksum:t,credentials:r,region:n,service:o,sha256:s,uriEscapePath:i=!0}){super({applyChecksum:t,credentials:r,region:n,service:o,sha256:s,uriEscapePath:i}),this.headerFormatter=new oL}async presign(t,r={}){let{signingDate:n=new Date,expiresIn:o=3600,unsignableHeaders:s,unhoistableHeaders:i,signableHeaders:a,hoistableHeaders:c,signingRegion:d,signingService:l}=r,u=await this.credentialProvider();this.validateResolvedCredentials(u);let p=d??await this.regionProvider(),{longDate:h,shortDate:g}=this.formatDate(n);if(o>Nv)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let S=dd(g,p,l??this.service),E=Fv(Rm(t),{unhoistableHeaders:i,hoistableHeaders:c});u.sessionToken&&(E.query[Im]=u.sessionToken),E.query[_v]=ad,E.query[Sv]=`${u.accessKeyId}/${S}`,E.query[Am]=h,E.query[vv]=o.toString(10);let b=xm(E,s,a);return E.query[Ev]=this.getCanonicalHeaderList(b),E.query[Om]=await this.getSignature(h,S,this.getSigningKey(u,p,g,l),this.createCanonicalRequest(E,b,await ud(t,this.sha256))),E}async sign(t,r){return typeof t=="string"?this.signString(t,r):t.headers&&t.payload?this.signEvent(t,r):t.message?this.signMessage(t,r):this.signRequest(t,r)}async signEvent({headers:t,payload:r},{signingDate:n=new Date,priorSignature:o,signingRegion:s,signingService:i}){let a=s??await this.regionProvider(),{shortDate:c,longDate:d}=this.formatDate(n),l=dd(c,a,i??this.service),u=await ud({headers:{},body:r},this.sha256),p=new this.sha256;p.update(t);let h=(0,yr.toHex)(await p.digest()),g=[Av,d,l,o,h,u].join(`
`);return this.signString(g,{signingDate:n,signingRegion:a,signingService:i})}async signMessage(t,{signingDate:r=new Date,signingRegion:n,signingService:o}){return this.signEvent({headers:this.headerFormatter.format(t.message.headers),payload:t.message.body},{signingDate:r,signingRegion:n,signingService:o,priorSignature:t.priorSignature}).then(i=>({message:t.message,signature:i}))}async signString(t,{signingDate:r=new Date,signingRegion:n,signingService:o}={}){let s=await this.credentialProvider();this.validateResolvedCredentials(s);let i=n??await this.regionProvider(),{shortDate:a}=this.formatDate(r),c=new this.sha256(await this.getSigningKey(s,i,a,o));return c.update((0,mv.toUint8Array)(t)),(0,yr.toHex)(await c.digest())}async signRequest(t,{signingDate:r=new Date,signableHeaders:n,unsignableHeaders:o,signingRegion:s,signingService:i}={}){let a=await this.credentialProvider();this.validateResolvedCredentials(a);let c=s??await this.regionProvider(),d=Rm(t),{longDate:l,shortDate:u}=this.formatDate(r),p=dd(u,c,i??this.service);d.headers[Dm]=l,a.sessionToken&&(d.headers[Pv]=a.sessionToken);let h=await ud(d,this.sha256);!Mv(pd,d.headers)&&this.applyChecksum&&(d.headers[pd]=h);let g=xm(d,o,n),S=await this.getSignature(l,p,this.getSigningKey(a,c,u,i),this.createCanonicalRequest(d,g,h));return d.headers[Nm]=`${ad} Credential=${a.accessKeyId}/${p}, SignedHeaders=${this.getCanonicalHeaderList(g)}, Signature=${S}`,d}async getSignature(t,r,n,o){let s=await this.createStringToSign(t,r,o,ad),i=new this.sha256(await n);return i.update((0,mv.toUint8Array)(s)),(0,yr.toHex)(await i.digest())}getSigningKey(t,r,n,o){return Dv(this.sha256,t,n,r,o||this.service)}},Ce(Oo,"SignatureV4"),Oo),lL={SignatureV4a:null}});function pL(e,{credentials:t,credentialDefaultProvider:r}){let n;return t?t?.memoized?n=t:n=lm(t,um,Xc):r?n=cr(r(Object.assign({},e,{parentClientConfig:e}))):n=async()=>{throw new Error("@aws-sdk/core::resolveAwsSdkSigV4Config - `credentials` not provided and no credentialDefaultProvider was configured.")},n.memoized=!0,n}function mL(e,t){if(t.configBound)return t;let r=async n=>t({...n,callerClientConfig:e});return r.memoized=t.memoized,r.configBound=!0,r}var km,ln,$v,Hv=y(()=>{pt();Ue();km=v(Bv()),ln=e=>{let t=e.credentials,r=!!e.credentials,n;Object.defineProperty(e,"credentials",{set(d){d&&d!==t&&d!==n&&(r=!0),t=d;let l=pL(e,{credentials:t,credentialDefaultProvider:e.credentialDefaultProvider}),u=mL(e,l);r&&!u.attributed?(n=async p=>u(p).then(h=>hr(h,"CREDENTIALS_CODE","e")),n.memoized=u.memoized,n.configBound=u.configBound,n.attributed=!0):n=u},get(){return n},enumerable:!0,configurable:!0}),e.credentials=t;let{signingEscapePath:o=!0,systemClockOffset:s=e.systemClockOffset||0,sha256:i}=e,a;return e.signer?a=cr(e.signer):e.regionInfoProvider?a=()=>cr(e.region)().then(async d=>[await e.regionInfoProvider(d,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},d]).then(([d,l])=>{let{signingRegion:u,signingService:p}=d;e.signingRegion=e.signingRegion||u||l,e.signingName=e.signingName||p||e.serviceId;let h={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:i,uriEscapePath:o},g=e.signerConstructor||km.SignatureV4;return new g(h)}):a=async d=>{d=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await cr(e.region)(),properties:{}},d);let l=d.signingRegion,u=d.signingName;e.signingRegion=e.signingRegion||l,e.signingName=e.signingName||u||e.serviceId;let p={...e,credentials:e.credentials,region:e.signingRegion,service:e.signingName,sha256:i,uriEscapePath:o},h=e.signerConstructor||km.SignatureV4;return new h(p)},Object.assign(e,{systemClockOffset:s,signingEscapePath:o,signer:a})},$v=ln});var qv=y(()=>{wm();rv();av();pv();Hv()});var zv={};ct(zv,{AWSSDKSigV4Signer:()=>vm,AwsSdkSigV4ASigner:()=>qi,AwsSdkSigV4Signer:()=>je,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>xo,NODE_SIGV4A_CONFIG_OPTIONS:()=>lv,getBearerTokenEnvKey:()=>od,resolveAWSSDKSigV4Config:()=>$v,resolveAwsSdkSigV4AConfig:()=>uv,resolveAwsSdkSigV4Config:()=>ln,validateSigningProperties:()=>Po});var Fm=y(()=>{qv();Cm()});var fL,hL,gL,Vv=y(()=>{fL=e=>{if(e==null)return e;if(typeof e=="number"||typeof e=="bigint"){let t=new Error(`Received number ${e} where a string was expected.`);return t.name="Warning",console.warn(t),String(e)}if(typeof e=="boolean"){let t=new Error(`Received boolean ${e} where a string was expected.`);return t.name="Warning",console.warn(t),String(e)}return e},hL=e=>{if(e==null)return e;if(typeof e=="string"){let t=e.toLowerCase();if(e!==""&&t!=="false"&&t!=="true"){let r=new Error(`Received string "${e}" where a boolean was expected.`);r.name="Warning",console.warn(r)}return e!==""&&t!=="false"}return e},gL=e=>{if(e==null)return e;if(typeof e=="string"){let t=Number(e);if(t.toString()!==e){let r=new Error(`Received string "${e}" where a number was expected.`);return r.name="Warning",console.warn(r),e}return t}return e}});var zi=w((xX,Wv)=>{var fd=Object.defineProperty,yL=Object.getOwnPropertyDescriptor,_L=Object.getOwnPropertyNames,SL=Object.prototype.hasOwnProperty,EL=(e,t)=>fd(e,"name",{value:t,configurable:!0}),vL=(e,t)=>{for(var r in t)fd(e,r,{get:t[r],enumerable:!0})},wL=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of _L(t))!SL.call(e,o)&&o!==r&&fd(e,o,{get:()=>t[o],enumerable:!(n=yL(t,o))||n.enumerable});return e},bL=e=>wL(fd({},"__esModule",{value:!0}),e),Gv={};vL(Gv,{calculateBodyLength:()=>CL});Wv.exports=bL(Gv);var Kv=typeof TextEncoder=="function"?new TextEncoder:null,CL=EL(e=>{if(typeof e=="string"){if(Kv)return Kv.encode(e).byteLength;let t=e.length;for(let r=t-1;r>=0;r--){let n=e.charCodeAt(r);n>127&&n<=2047?t++:n>2047&&n<=65535&&(t+=2),n>=56320&&n<=57343&&r--}return t}else{if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size}throw new Error(`Body Length computation failed for ${e}`)},"calculateBodyLength")});var Re,_r=y(()=>{Re=class{constructor(){_(this,"serdeContext")}setSerdeContext(t){this.serdeContext=t}}});function Jv(e,t,r){if(r?.source){let n=r.source;if(typeof t=="number"&&(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER||n!==String(t)))return n.includes(".")?new be(n,"bigDecimal"):BigInt(n)}return t}var Yv=y(()=>{We()});var tw=w((IX,ew)=>{var hd=Object.defineProperty,PL=Object.getOwnPropertyDescriptor,xL=Object.getOwnPropertyNames,TL=Object.prototype.hasOwnProperty,Je=(e,t)=>hd(e,"name",{value:t,configurable:!0}),RL=(e,t)=>{for(var r in t)hd(e,r,{get:t[r],enumerable:!0})},AL=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of xL(t))!TL.call(e,o)&&o!==r&&hd(e,o,{get:()=>t[o],enumerable:!(n=PL(t,o))||n.enumerable});return e},OL=e=>AL(hd({},"__esModule",{value:!0}),e),Zv={};RL(Zv,{constructStack:()=>Um});ew.exports=OL(Zv);var pn=Je((e,t)=>{let r=[];if(e&&r.push(e),t)for(let n of t)r.push(n);return r},"getAllAliases"),Sr=Je((e,t)=>`${e||"anonymous"}${t&&t.length>0?` (a.k.a. ${t.join(",")})`:""}`,"getMiddlewareNameWithAliases"),Um=Je(()=>{let e=[],t=[],r=!1,n=new Set,o=Je(u=>u.sort((p,h)=>Xv[h.step]-Xv[p.step]||Qv[h.priority||"normal"]-Qv[p.priority||"normal"]),"sort"),s=Je(u=>{let p=!1,h=Je(g=>{let S=pn(g.name,g.aliases);if(S.includes(u)){p=!0;for(let E of S)n.delete(E);return!1}return!0},"filterCb");return e=e.filter(h),t=t.filter(h),p},"removeByName"),i=Je(u=>{let p=!1,h=Je(g=>{if(g.middleware===u){p=!0;for(let S of pn(g.name,g.aliases))n.delete(S);return!1}return!0},"filterCb");return e=e.filter(h),t=t.filter(h),p},"removeByReference"),a=Je(u=>(e.forEach(p=>{u.add(p.middleware,{...p})}),t.forEach(p=>{u.addRelativeTo(p.middleware,{...p})}),u.identifyOnResolve?.(l.identifyOnResolve()),u),"cloneTo"),c=Je(u=>{let p=[];return u.before.forEach(h=>{h.before.length===0&&h.after.length===0?p.push(h):p.push(...c(h))}),p.push(u),u.after.reverse().forEach(h=>{h.before.length===0&&h.after.length===0?p.push(h):p.push(...c(h))}),p},"expandRelativeMiddlewareList"),d=Je((u=!1)=>{let p=[],h=[],g={};return e.forEach(E=>{let b={...E,before:[],after:[]};for(let C of pn(b.name,b.aliases))g[C]=b;p.push(b)}),t.forEach(E=>{let b={...E,before:[],after:[]};for(let C of pn(b.name,b.aliases))g[C]=b;h.push(b)}),h.forEach(E=>{if(E.toMiddleware){let b=g[E.toMiddleware];if(b===void 0){if(u)return;throw new Error(`${E.toMiddleware} is not found when adding ${Sr(E.name,E.aliases)} middleware ${E.relation} ${E.toMiddleware}`)}E.relation==="after"&&b.after.push(E),E.relation==="before"&&b.before.push(E)}}),o(p).map(c).reduce((E,b)=>(E.push(...b),E),[])},"getMiddlewareList"),l={add:(u,p={})=>{let{name:h,override:g,aliases:S}=p,E={step:"initialize",priority:"normal",middleware:u,...p},b=pn(h,S);if(b.length>0){if(b.some(C=>n.has(C))){if(!g)throw new Error(`Duplicate middleware name '${Sr(h,S)}'`);for(let C of b){let N=e.findIndex(R=>R.name===C||R.aliases?.some(G=>G===C));if(N===-1)continue;let k=e[N];if(k.step!==E.step||E.priority!==k.priority)throw new Error(`"${Sr(k.name,k.aliases)}" middleware with ${k.priority} priority in ${k.step} step cannot be overridden by "${Sr(h,S)}" middleware with ${E.priority} priority in ${E.step} step.`);e.splice(N,1)}}for(let C of b)n.add(C)}e.push(E)},addRelativeTo:(u,p)=>{let{name:h,override:g,aliases:S}=p,E={middleware:u,...p},b=pn(h,S);if(b.length>0){if(b.some(C=>n.has(C))){if(!g)throw new Error(`Duplicate middleware name '${Sr(h,S)}'`);for(let C of b){let N=t.findIndex(R=>R.name===C||R.aliases?.some(G=>G===C));if(N===-1)continue;let k=t[N];if(k.toMiddleware!==E.toMiddleware||k.relation!==E.relation)throw new Error(`"${Sr(k.name,k.aliases)}" middleware ${k.relation} "${k.toMiddleware}" middleware cannot be overridden by "${Sr(h,S)}" middleware ${E.relation} "${E.toMiddleware}" middleware.`);t.splice(N,1)}}for(let C of b)n.add(C)}t.push(E)},clone:()=>a(Um()),use:u=>{u.applyToStack(l)},remove:u=>typeof u=="string"?s(u):i(u),removeByTag:u=>{let p=!1,h=Je(g=>{let{tags:S,name:E,aliases:b}=g;if(S&&S.includes(u)){let C=pn(E,b);for(let N of C)n.delete(N);return p=!0,!1}return!0},"filterCb");return e=e.filter(h),t=t.filter(h),p},concat:u=>{let p=a(Um());return p.use(u),p.identifyOnResolve(r||p.identifyOnResolve()||(u.identifyOnResolve?.()??!1)),p},applyToStack:a,identify:()=>d(!0).map(u=>{let p=u.step??u.relation+" "+u.toMiddleware;return Sr(u.name,u.aliases)+" - "+p}),identifyOnResolve(u){return typeof u=="boolean"&&(r=u),r},resolve:(u,p)=>{for(let h of d().map(g=>g.middleware).reverse())u=h(u,p);return r&&console.log(l.identify()),u}};return l},"constructStack"),Xv={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},Qv={high:3,normal:2,low:1}});var L=w((NX,zm)=>{var gd=Object.defineProperty,IL=Object.getOwnPropertyDescriptor,NL=Object.getOwnPropertyNames,DL=Object.prototype.hasOwnProperty,W=(e,t)=>gd(e,"name",{value:t,configurable:!0}),ML=(e,t)=>{for(var r in t)gd(e,r,{get:t[r],enumerable:!0})},jm=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of NL(t))!DL.call(e,o)&&o!==r&&gd(e,o,{get:()=>t[o],enumerable:!(n=IL(t,o))||n.enumerable});return e},kL=(e,t,r)=>(jm(e,t,"default"),r&&jm(r,t,"default")),FL=e=>jm(gd({},"__esModule",{value:!0}),e),Hm={};ML(Hm,{Client:()=>UL,Command:()=>ow,NoOpLogger:()=>ej,SENSITIVE_STRING:()=>jL,ServiceException:()=>$L,_json:()=>$m,collectBody:()=>Lm.collectBody,convertMap:()=>tj,createAggregatedClient:()=>BL,decorateServiceException:()=>sw,emitWarningIfUnsupportedVersion:()=>VL,extendedEncodeURIComponent:()=>Lm.extendedEncodeURIComponent,getArrayIfSingleItem:()=>QL,getDefaultClientConfiguration:()=>YL,getDefaultExtensionConfiguration:()=>aw,getValueFromTextNode:()=>cw,isSerializableHeaderValue:()=>ZL,loadConfigsForDefaultMode:()=>zL,map:()=>qm,resolveDefaultRuntimeConfig:()=>XL,resolvedPath:()=>Lm.resolvedPath,serializeDateTime:()=>aj,serializeFloat:()=>ij,take:()=>rj,throwDefaultError:()=>iw,withBaseException:()=>HL});zm.exports=FL(Hm);var nw=tw(),Io,UL=(Io=class{constructor(t){this.config=t,this.middlewareStack=(0,nw.constructStack)()}send(t,r,n){let o=typeof r!="function"?r:void 0,s=typeof r=="function"?r:n,i=o===void 0&&this.config.cacheMiddleware===!0,a;if(i){this.handlers||(this.handlers=new WeakMap);let c=this.handlers;c.has(t.constructor)?a=c.get(t.constructor):(a=t.resolveMiddleware(this.middlewareStack,this.config,o),c.set(t.constructor,a))}else delete this.handlers,a=t.resolveMiddleware(this.middlewareStack,this.config,o);if(s)a(t).then(c=>s(null,c.output),c=>s(c)).catch(()=>{});else return a(t).then(c=>c.output)}destroy(){this.config?.requestHandler?.destroy?.(),delete this.handlers}},W(Io,"Client"),Io),Lm=(zt(),H(nE)),Bm=yt(),No,ow=(No=class{constructor(){this.middlewareStack=(0,nw.constructStack)()}static classBuilder(){return new LL}resolveMiddlewareWithContext(t,r,n,{middlewareFn:o,clientName:s,commandName:i,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,smithyContext:d,additionalContext:l,CommandCtor:u}){for(let E of o.bind(this)(u,t,r,n))this.middlewareStack.use(E);let p=t.concat(this.middlewareStack),{logger:h}=r,g={logger:h,clientName:s,commandName:i,inputFilterSensitiveLog:a,outputFilterSensitiveLog:c,[Bm.SMITHY_CONTEXT_KEY]:{commandInstance:this,...d},...l},{requestHandler:S}=r;return p.resolve(E=>S.handle(E.request,n||{}),g)}},W(No,"Command"),No),Do,LL=(Do=class{constructor(){this._init=()=>{},this._ep={},this._middlewareFn=()=>[],this._commandName="",this._clientName="",this._additionalContext={},this._smithyContext={},this._inputFilterSensitiveLog=t=>t,this._outputFilterSensitiveLog=t=>t,this._serializer=null,this._deserializer=null}init(t){this._init=t}ep(t){return this._ep=t,this}m(t){return this._middlewareFn=t,this}s(t,r,n={}){return this._smithyContext={service:t,operation:r,...n},this}c(t={}){return this._additionalContext=t,this}n(t,r){return this._clientName=t,this._commandName=r,this}f(t=n=>n,r=n=>n){return this._inputFilterSensitiveLog=t,this._outputFilterSensitiveLog=r,this}ser(t){return this._serializer=t,this}de(t){return this._deserializer=t,this}sc(t){return this._operationSchema=t,this._smithyContext.operationSchema=t,this}build(){var n;let t=this,r;return r=(n=class extends ow{constructor(...[s]){super(),this.serialize=t._serializer,this.deserialize=t._deserializer,this.input=s??{},t._init(this),this.schema=t._operationSchema}static getEndpointParameterInstructions(){return t._ep}resolveMiddleware(s,i,a){return this.resolveMiddlewareWithContext(s,i,a,{CommandCtor:r,middlewareFn:t._middlewareFn,clientName:t._clientName,commandName:t._commandName,inputFilterSensitiveLog:t._inputFilterSensitiveLog,outputFilterSensitiveLog:t._outputFilterSensitiveLog,smithyContext:t._smithyContext,additionalContext:t._additionalContext})}},W(n,"CommandRef"),n)}},W(Do,"ClassBuilder"),Do),jL="***SensitiveInformation***",BL=W((e,t)=>{for(let r of Object.keys(e)){let n=e[r],o=W(async function(i,a,c){let d=new n(i);if(typeof a=="function")this.send(d,a);else if(typeof c=="function"){if(typeof a!="object")throw new Error(`Expected http options but got ${typeof a}`);this.send(d,a||{},c)}else return this.send(d,a)},"methodImpl"),s=(r[0].toLowerCase()+r.slice(1)).replace(/Command$/,"");t.prototype[s]=o}},"createAggregatedClient"),bt,$L=(bt=class extends Error{constructor(t){super(t.message),Object.setPrototypeOf(this,Object.getPrototypeOf(this).constructor.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}static isInstance(t){if(!t)return!1;let r=t;return bt.prototype.isPrototypeOf(r)||!!r.$fault&&!!r.$metadata&&(r.$fault==="client"||r.$fault==="server")}static[Symbol.hasInstance](t){if(!t)return!1;let r=t;return this===bt?bt.isInstance(t):bt.isInstance(t)?r.name&&this.name?this.prototype.isPrototypeOf(t)||r.name===this.name:this.prototype.isPrototypeOf(t):!1}},W(bt,"ServiceException"),bt),sw=W((e,t={})=>{Object.entries(t).filter(([,n])=>n!==void 0).forEach(([n,o])=>{(e[n]==null||e[n]==="")&&(e[n]=o)});let r=e.message||e.Message||"UnknownError";return e.message=r,delete e.Message,e},"decorateServiceException"),iw=W(({output:e,parsedBody:t,exceptionCtor:r,errorCode:n})=>{let o=qL(e),s=o.httpStatusCode?o.httpStatusCode+"":void 0,i=new r({name:t?.code||t?.Code||n||s||"UnknownError",$fault:"client",$metadata:o});throw sw(i,t)},"throwDefaultError"),HL=W(e=>({output:t,parsedBody:r,errorCode:n})=>{iw({output:t,parsedBody:r,exceptionCtor:e,errorCode:n})},"withBaseException"),qL=W(e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),"deserializeMetadata"),zL=W(e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}},"loadConfigsForDefaultMode"),rw=!1,VL=W(e=>{e&&!rw&&parseInt(e.substring(1,e.indexOf(".")))<16&&(rw=!0)},"emitWarningIfUnsupportedVersion"),KL=W(e=>{let t=[];for(let r in Bm.AlgorithmId){let n=Bm.AlgorithmId[r];e[n]!==void 0&&t.push({algorithmId:()=>n,checksumConstructor:()=>e[n]})}return{addChecksumAlgorithm(r){t.push(r)},checksumAlgorithms(){return t}}},"getChecksumConfiguration"),GL=W(e=>{let t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t},"resolveChecksumRuntimeConfig"),WL=W(e=>({setRetryStrategy(t){e.retryStrategy=t},retryStrategy(){return e.retryStrategy}}),"getRetryConfiguration"),JL=W(e=>{let t={};return t.retryStrategy=e.retryStrategy(),t},"resolveRetryRuntimeConfig"),aw=W(e=>Object.assign(KL(e),WL(e)),"getDefaultExtensionConfiguration"),YL=aw,XL=W(e=>Object.assign(GL(e),JL(e)),"resolveDefaultRuntimeConfig"),QL=W(e=>Array.isArray(e)?e:[e],"getArrayIfSingleItem"),cw=W(e=>{let t="#text";for(let r in e)e.hasOwnProperty(r)&&e[r][t]!==void 0?e[r]=e[r][t]:typeof e[r]=="object"&&e[r]!==null&&(e[r]=cw(e[r]));return e},"getValueFromTextNode"),ZL=W(e=>e!=null,"isSerializableHeaderValue"),Mo,ej=(Mo=class{trace(){}debug(){}info(){}warn(){}error(){}},W(Mo,"NoOpLogger"),Mo);function qm(e,t,r){let n,o,s;if(typeof t>"u"&&typeof r>"u")n={},s=e;else{if(n=e,typeof t=="function")return o=t,s=r,nj(n,o,s);s=t}for(let i of Object.keys(s)){if(!Array.isArray(s[i])){n[i]=s[i];continue}dw(n,null,s,i)}return n}W(qm,"map");var tj=W(e=>{let t={};for(let[r,n]of Object.entries(e||{}))t[r]=[,n];return t},"convertMap"),rj=W((e,t)=>{let r={};for(let n in t)dw(r,e,t,n);return r},"take"),nj=W((e,t,r)=>qm(e,Object.entries(r).reduce((n,[o,s])=>(Array.isArray(s)?n[o]=s:typeof s=="function"?n[o]=[t,s()]:n[o]=[t,s],n),{})),"mapWithFilter"),dw=W((e,t,r,n)=>{if(t!==null){let i=r[n];typeof i=="function"&&(i=[,i]);let[a=oj,c=sj,d=n]=i;(typeof a=="function"&&a(t[d])||typeof a!="function"&&a)&&(e[n]=c(t[d]));return}let[o,s]=r[n];if(typeof s=="function"){let i,a=o===void 0&&(i=s())!=null,c=typeof o=="function"&&!!o(void 0)||typeof o!="function"&&!!o;a?e[n]=i:c&&(e[n]=s())}else{let i=o===void 0&&s!=null,a=typeof o=="function"&&!!o(s)||typeof o!="function"&&!!o;(i||a)&&(e[n]=s)}},"applyInstruction"),oj=W(e=>e!=null,"nonNullish"),sj=W(e=>e,"pass"),ij=W(e=>{if(e!==e)return"NaN";switch(e){case 1/0:return"Infinity";case-1/0:return"-Infinity";default:return e}},"serializeFloat"),aj=W(e=>e.toISOString().replace(".000Z","Z"),"serializeDateTime"),$m=W(e=>{if(e==null)return{};if(Array.isArray(e))return e.filter(t=>t!=null).map($m);if(typeof e=="object"){let t={};for(let r of Object.keys(e))e[r]!=null&&(t[r]=$m(e[r]));return t}return e},"_json");kL(Hm,(We(),H(KS)),zm.exports)});var uw,yd,Vm=y(()=>{uw=v(L()),yd=(e,t)=>(0,uw.collectBody)(e,t).then(r=>t.utf8Encoder(r))});var ko,Km,mn,Vi=y(()=>{Vm();ko=(e,t)=>yd(e,t).then(r=>{if(r.length)try{return JSON.parse(r)}catch(n){throw n?.name==="SyntaxError"&&Object.defineProperty(n,"$responseBodyText",{value:r}),n}return{}}),Km=async(e,t)=>{let r=await ko(e,t);return r.message=r.message??r.Message,r},mn=(e,t)=>{let r=(s,i)=>Object.keys(s).find(a=>a.toLowerCase()===i.toLowerCase()),n=s=>{let i=s;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},o=r(e.headers,"x-amzn-errortype");if(o!==void 0)return n(e.headers[o]);if(t&&typeof t=="object"){let s=r(t,"code");if(s&&t[s]!==void 0)return n(t[s]);if(t.__type!==void 0)return n(t.__type)}}});var lw,Ki,Gm=y(()=>{ye();We();lw=v(Oe());_r();Yv();Vi();Ki=class extends Re{constructor(r){super();_(this,"settings");this.settings=r}async read(r,n){return this._read(r,typeof n=="string"?JSON.parse(n,Jv):await ko(n,this.serdeContext))}readObject(r,n){return this._read(r,n)}_read(r,n){let o=n!==null&&typeof n=="object",s=O.of(r);if(s.isListSchema()&&Array.isArray(n)){let a=s.getValueSchema(),c=[],d=!!s.getMergedTraits().sparse;for(let l of n)(d||l!=null)&&c.push(this._read(a,l));return c}else if(s.isMapSchema()&&o){let a=s.getValueSchema(),c={},d=!!s.getMergedTraits().sparse;for(let[l,u]of Object.entries(n))(d||u!=null)&&(c[l]=this._read(a,u));return c}else if(s.isStructSchema()&&o){let a={};for(let[c,d]of s.structIterator()){let l=this.settings.jsonName?d.getMergedTraits().jsonName??c:c,u=this._read(d,n[l]);u!=null&&(a[c]=u)}return a}if(s.isBlobSchema()&&typeof n=="string")return(0,lw.fromBase64)(n);let i=s.getMergedTraits().mediaType;if(s.isStringSchema()&&typeof n=="string"&&i&&(i==="application/json"||i.endsWith("+json")))return Ie.from(n);if(s.isTimestampSchema()){let a=this.settings.timestampFormat;switch(a.useTrait?s.getSchema()===x.TIMESTAMP_DEFAULT?a.default:s.getSchema()??a.default:a.default){case x.TIMESTAMP_DATE_TIME:return ki(n);case x.TIMESTAMP_HTTP_DATE:return Fi(n);case x.TIMESTAMP_EPOCH_SECONDS:return Ui(n);default:return console.warn("Missing timestamp format, parsing value with Date constructor:",n),new Date(n)}}if(s.isBigIntegerSchema()&&(typeof n=="number"||typeof n=="string"))return BigInt(n);if(s.isBigDecimalSchema()&&n!=null)return n instanceof be?n:new be(String(n),"bigDecimal");if(s.isNumericSchema()&&typeof n=="string")switch(n){case"Infinity":return 1/0;case"-Infinity":return-1/0;case"NaN":return NaN}return n}}});var pw,_d,mw=y(()=>{We();pw="\u039D",_d=class{constructor(){_(this,"values",new Map);_(this,"counter",0);_(this,"stage",0)}createReplacer(){if(this.stage===1)throw new Error("@aws-sdk/core/protocols - JsonReplacer already created.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");return this.stage=1,(t,r)=>{if(r instanceof be){let n=`${pw+ +"nv"+this.counter++}_`+r.string;return this.values.set(`"${n}"`,r.string),n}if(typeof r=="bigint"){let n=r.toString(),o=`${pw+"b"+this.counter++}_`+n;return this.values.set(`"${o}"`,n),o}return r}}replaceInJson(t){if(this.stage===0)throw new Error("@aws-sdk/core/protocols - JsonReplacer not created yet.");if(this.stage===2)throw new Error("@aws-sdk/core/protocols - JsonReplacer exhausted.");if(this.stage=2,this.counter===0)return t;for(let[r,n]of this.values)t=t.replace(r,n);return t}}});var Gi,Wm=y(()=>{ye();We();We();_r();mw();Gi=class extends Re{constructor(r){super();_(this,"settings");_(this,"buffer");_(this,"rootSchema");this.settings=r}write(r,n){this.rootSchema=O.of(r),this.buffer=this._write(this.rootSchema,n)}flush(){if(this.rootSchema?.isStructSchema()||this.rootSchema?.isDocumentSchema()){let r=new _d;return r.replaceInJson(JSON.stringify(this.buffer,r.createReplacer(),0))}return this.buffer}_write(r,n,o){let s=n!==null&&typeof n=="object",i=O.of(r);if(i.isListSchema()&&Array.isArray(n)){let c=i.getValueSchema(),d=[],l=!!i.getMergedTraits().sparse;for(let u of n)(l||u!=null)&&d.push(this._write(c,u));return d}else if(i.isMapSchema()&&s){let c=i.getValueSchema(),d={},l=!!i.getMergedTraits().sparse;for(let[u,p]of Object.entries(n))(l||p!=null)&&(d[u]=this._write(c,p));return d}else if(i.isStructSchema()&&s){let c={};for(let[d,l]of i.structIterator()){let u=this.settings.jsonName?l.getMergedTraits().jsonName??d:d,p=this._write(l,n[d],i);p!==void 0&&(c[u]=p)}return c}if(n===null&&o?.isStructSchema())return;if(i.isBlobSchema()&&(n instanceof Uint8Array||typeof n=="string")){if(i===this.rootSchema)return n;if(!this.serdeContext?.base64Encoder)throw new Error("Missing base64Encoder in serdeContext");return this.serdeContext?.base64Encoder(n)}if(i.isTimestampSchema()&&n instanceof Date){let c=this.settings.timestampFormat;switch(c.useTrait?i.getSchema()===x.TIMESTAMP_DEFAULT?c.default:i.getSchema()??c.default:c.default){case x.TIMESTAMP_DATE_TIME:return n.toISOString().replace(".000Z","Z");case x.TIMESTAMP_HTTP_DATE:return Mi(n);case x.TIMESTAMP_EPOCH_SECONDS:return n.getTime()/1e3;default:return console.warn("Missing timestamp format, using epoch seconds",n),n.getTime()/1e3}}if(i.isNumericSchema()&&typeof n=="number"&&(Math.abs(n)===1/0||isNaN(n)))return String(n);let a=i.getMergedTraits().mediaType;return i.isStringSchema()&&typeof n=="string"&&a&&(a==="application/json"||a.endsWith("+json"))?Ie.from(n):n}}});var fn,Sd=y(()=>{_r();Gm();Wm();fn=class extends Re{constructor(r){super();_(this,"settings");this.settings=r}createSerializer(){let r=new Gi(this.settings);return r.setSerdeContext(this.serdeContext),r}createDeserializer(){let r=new Ki(this.settings);return r.setSerdeContext(this.serdeContext),r}}});var fw,hn,Ed=y(()=>{zt();ye();fw=v(zi());Sd();Vi();hn=class extends Zr{constructor({defaultNamespace:r}){super({defaultNamespace:r});_(this,"serializer");_(this,"deserializer");_(this,"codec");this.codec=new fn({timestampFormat:{useTrait:!0,default:x.TIMESTAMP_EPOCH_SECONDS},jsonName:!1}),this.serializer=this.codec.createSerializer(),this.deserializer=this.codec.createDeserializer()}async serializeRequest(r,n,o){let s=await super.serializeRequest(r,n,o);s.path.endsWith("/")||(s.path+="/"),Object.assign(s.headers,{"content-type":`application/x-amz-json-${this.getJsonRpcVersion()}`,"x-amz-target":(this.getJsonRpcVersion()==="1.0"?"JsonRpc10.":"JsonProtocol.")+O.of(r).getName()}),(qt(r.input)==="unit"||!s.body)&&(s.body="{}");try{s.headers["content-length"]=String((0,fw.calculateBodyLength)(s.body))}catch{}return s}getPayloadCodec(){return this.codec}async handleError(r,n,o,s,i){let a=mn(o,s)??"Unknown",c=this.options.defaultNamespace,d=a;a.includes("#")&&([c,d]=a.split("#"));let l=le.for(c),u;try{u=l.getSchema(a)}catch{let b=le.for("smithy.ts.sdk.synthetic."+c).getBaseException();if(b){let C=b.ctor;throw Object.assign(new C(d),s)}throw new Error(d)}let p=O.of(u),h=s.message??s.Message??"Unknown",g=new u.ctor(h);await this.deserializeHttpMessage(u,n,o,s);let S={};for(let[E,b]of p.structIterator()){let C=b.getMergedTraits().jsonName??E;S[E]=this.codec.createDeserializer().readObject(b,s[C])}throw Object.assign(g,{$metadata:i,$response:o,$fault:p.getMergedTraits().error,message:h,...S}),g}}});var Jm,hw=y(()=>{Ed();Jm=class extends hn{constructor({defaultNamespace:t}){super({defaultNamespace:t})}getShapeId(){return"aws.protocols#awsJson1_0"}getJsonRpcVersion(){return"1.0"}}});var Ym,gw=y(()=>{Ed();Ym=class extends hn{constructor({defaultNamespace:t}){super({defaultNamespace:t})}getShapeId(){return"aws.protocols#awsJson1_1"}getJsonRpcVersion(){return"1.1"}}});var yw,Xm,_w=y(()=>{zt();ye();yw=v(zi());Sd();Vi();Xm=class extends Qr{constructor({defaultNamespace:r}){super({defaultNamespace:r});_(this,"serializer");_(this,"deserializer");_(this,"codec");let n={timestampFormat:{useTrait:!0,default:x.TIMESTAMP_EPOCH_SECONDS},httpBindings:!0,jsonName:!0};this.codec=new fn(n),this.serializer=new nn(this.codec.createSerializer(),n),this.deserializer=new rn(this.codec.createDeserializer(),n)}getShapeId(){return"aws.protocols#restJson1"}getPayloadCodec(){return this.codec}setSerdeContext(r){this.codec.setSerdeContext(r),super.setSerdeContext(r)}async serializeRequest(r,n,o){let s=await super.serializeRequest(r,n,o),i=O.of(r.input),a=i.getMemberSchemas();if(!s.headers["content-type"]){let c=Object.values(a).find(d=>!!d.getMergedTraits().httpPayload);if(c){let d=c.getMergedTraits().mediaType;d?s.headers["content-type"]=d:c.isStringSchema()?s.headers["content-type"]="text/plain":c.isBlobSchema()?s.headers["content-type"]="application/octet-stream":s.headers["content-type"]="application/json"}else i.isUnitSchema()||Object.values(a).find(l=>{let{httpQuery:u,httpQueryParams:p,httpHeader:h,httpLabel:g,httpPrefixHeaders:S}=l.getMergedTraits();return!u&&!p&&!h&&!g&&S===void 0})&&(s.headers["content-type"]="application/json")}if(s.headers["content-type"]&&!s.body&&(s.body="{}"),s.body)try{s.headers["content-length"]=String((0,yw.calculateBodyLength)(s.body))}catch{}return s}async handleError(r,n,o,s,i){let a=mn(o,s)??"Unknown",c=this.options.defaultNamespace,d=a;a.includes("#")&&([c,d]=a.split("#"));let l=le.for(c),u;try{u=l.getSchema(a)}catch{let b=le.for("smithy.ts.sdk.synthetic."+c).getBaseException();if(b){let C=b.ctor;throw Object.assign(new C(d),s)}throw new Error(d)}let p=O.of(u),h=s.message??s.Message??"Unknown",g=new u.ctor(h);await this.deserializeHttpMessage(u,n,o,s);let S={};for(let[E,b]of p.structIterator()){let C=b.getMergedTraits().jsonName??E;S[E]=this.codec.createDeserializer().readObject(b,s[C])}throw Object.assign(g,{$metadata:i,$response:o,$fault:p.getMergedTraits().error,message:h,...S}),g}}});var Sw,cj,Ew=y(()=>{Sw=v(L()),cj=e=>{if(e!=null)return typeof e=="object"&&"__type"in e&&delete e.__type,(0,Sw.expectUnion)(e)}});function vd(e,t){let r=[],n=t.exec(e);for(;n;){let o=[];o.startIndex=t.lastIndex-n[0].length;let s=n.length;for(let i=0;i<s;i++)o.push(n[i]);r.push(o),n=t.exec(e)}return r}function ww(e){return typeof e<"u"}var vw,dj,uj,lj,Wi,wd=y(()=>{"use strict";vw=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",dj=vw+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",uj="["+vw+"]["+dj+"]*",lj=new RegExp("^"+uj+"$");Wi=function(e){let t=lj.exec(e);return!(t===null||typeof t>"u")}});function Tw(e,t){t=Object.assign({},pj,t);let r=[],n=!1,o=!1;e[0]==="\uFEFF"&&(e=e.substr(1));for(let s=0;s<e.length;s++)if(e[s]==="<"&&e[s+1]==="?"){if(s+=2,s=Cw(e,s),s.err)return s}else if(e[s]==="<"){let i=s;if(s++,e[s]==="!"){s=Pw(e,s);continue}else{let a=!1;e[s]==="/"&&(a=!0,s++);let c="";for(;s<e.length&&e[s]!==">"&&e[s]!==" "&&e[s]!=="	"&&e[s]!==`
`&&e[s]!=="\r";s++)c+=e[s];if(c=c.trim(),c[c.length-1]==="/"&&(c=c.substring(0,c.length-1),s--),!Ej(c)){let u;return c.trim().length===0?u="Invalid space after '<'.":u="Tag '"+c+"' is an invalid name.",pe("InvalidTag",u,De(e,s))}let d=hj(e,s);if(d===!1)return pe("InvalidAttr","Attributes for '"+c+"' have open quote.",De(e,s));let l=d.value;if(s=d.index,l[l.length-1]==="/"){let u=s-l.length;l=l.substring(0,l.length-1);let p=xw(l,t);if(p===!0)n=!0;else return pe(p.err.code,p.err.msg,De(e,u+p.err.line))}else if(a)if(d.tagClosed){if(l.trim().length>0)return pe("InvalidTag","Closing tag '"+c+"' can't have attributes or invalid starting.",De(e,i));if(r.length===0)return pe("InvalidTag","Closing tag '"+c+"' has not been opened.",De(e,i));{let u=r.pop();if(c!==u.tagName){let p=De(e,u.tagStartPos);return pe("InvalidTag","Expected closing tag '"+u.tagName+"' (opened in line "+p.line+", col "+p.col+") instead of closing tag '"+c+"'.",De(e,i))}r.length==0&&(o=!0)}}else return pe("InvalidTag","Closing tag '"+c+"' doesn't have proper closing.",De(e,s));else{let u=xw(l,t);if(u!==!0)return pe(u.err.code,u.err.msg,De(e,s-l.length+u.err.line));if(o===!0)return pe("InvalidXml","Multiple possible root nodes found.",De(e,s));t.unpairedTags.indexOf(c)!==-1||r.push({tagName:c,tagStartPos:i}),n=!0}for(s++;s<e.length;s++)if(e[s]==="<")if(e[s+1]==="!"){s++,s=Pw(e,s);continue}else if(e[s+1]==="?"){if(s=Cw(e,++s),s.err)return s}else break;else if(e[s]==="&"){let u=_j(e,s);if(u==-1)return pe("InvalidChar","char '&' is not expected.",De(e,s));s=u}else if(o===!0&&!bw(e[s]))return pe("InvalidXml","Extra text at the end",De(e,s));e[s]==="<"&&s--}}else{if(bw(e[s]))continue;return pe("InvalidChar","char '"+e[s]+"' is not expected.",De(e,s))}if(n){if(r.length==1)return pe("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",De(e,r[0].tagStartPos));if(r.length>0)return pe("InvalidXml","Invalid '"+JSON.stringify(r.map(s=>s.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return pe("InvalidXml","Start tag expected.",1);return!0}function bw(e){return e===" "||e==="	"||e===`
`||e==="\r"}function Cw(e,t){let r=t;for(;t<e.length;t++)if(e[t]=="?"||e[t]==" "){let n=e.substr(r,t-r);if(t>5&&n==="xml")return pe("InvalidXml","XML declaration allowed only at the start of the document.",De(e,t));if(e[t]=="?"&&e[t+1]==">"){t++;break}else continue}return t}function Pw(e,t){if(e.length>t+5&&e[t+1]==="-"&&e[t+2]==="-"){for(t+=3;t<e.length;t++)if(e[t]==="-"&&e[t+1]==="-"&&e[t+2]===">"){t+=2;break}}else if(e.length>t+8&&e[t+1]==="D"&&e[t+2]==="O"&&e[t+3]==="C"&&e[t+4]==="T"&&e[t+5]==="Y"&&e[t+6]==="P"&&e[t+7]==="E"){let r=1;for(t+=8;t<e.length;t++)if(e[t]==="<")r++;else if(e[t]===">"&&(r--,r===0))break}else if(e.length>t+9&&e[t+1]==="["&&e[t+2]==="C"&&e[t+3]==="D"&&e[t+4]==="A"&&e[t+5]==="T"&&e[t+6]==="A"&&e[t+7]==="["){for(t+=8;t<e.length;t++)if(e[t]==="]"&&e[t+1]==="]"&&e[t+2]===">"){t+=2;break}}return t}function hj(e,t){let r="",n="",o=!1;for(;t<e.length;t++){if(e[t]===mj||e[t]===fj)n===""?n=e[t]:n!==e[t]||(n="");else if(e[t]===">"&&n===""){o=!0;break}r+=e[t]}return n!==""?!1:{value:r,index:t,tagClosed:o}}function xw(e,t){let r=vd(e,gj),n={};for(let o=0;o<r.length;o++){if(r[o][1].length===0)return pe("InvalidAttr","Attribute '"+r[o][2]+"' has no space in starting.",Ji(r[o]));if(r[o][3]!==void 0&&r[o][4]===void 0)return pe("InvalidAttr","Attribute '"+r[o][2]+"' is without value.",Ji(r[o]));if(r[o][3]===void 0&&!t.allowBooleanAttributes)return pe("InvalidAttr","boolean attribute '"+r[o][2]+"' is not allowed.",Ji(r[o]));let s=r[o][2];if(!Sj(s))return pe("InvalidAttr","Attribute '"+s+"' is an invalid name.",Ji(r[o]));if(!n.hasOwnProperty(s))n[s]=1;else return pe("InvalidAttr","Attribute '"+s+"' is repeated.",Ji(r[o]))}return!0}function yj(e,t){let r=/\d/;for(e[t]==="x"&&(t++,r=/[\da-fA-F]/);t<e.length;t++){if(e[t]===";")return t;if(!e[t].match(r))break}return-1}function _j(e,t){if(t++,e[t]===";")return-1;if(e[t]==="#")return t++,yj(e,t);let r=0;for(;t<e.length;t++,r++)if(!(e[t].match(/\w/)&&r<20)){if(e[t]===";")break;return-1}return t}function pe(e,t,r){return{err:{code:e,msg:t,line:r.line||r,col:r.col}}}function Sj(e){return Wi(e)}function Ej(e){return Wi(e)}function De(e,t){let r=e.substring(0,t).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function Ji(e){return e.startIndex+e[1].length}var pj,mj,fj,gj,Rw=y(()=>{"use strict";wd();pj={allowBooleanAttributes:!1,unpairedTags:[]};mj='"',fj="'";gj=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g")});var vj,Aw,Ow=y(()=>{vj={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(e,t,r){return e},captureMetaData:!1},Aw=function(e){return Object.assign({},vj,e)}});var bd,qe,Cd=y(()=>{"use strict";typeof Symbol!="function"?bd="@@xmlMetadata":bd=Symbol("XML Node Metadata");qe=class{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,r){t==="__proto__"&&(t="#__proto__"),this.child.push({[t]:r})}addChild(t,r){t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,":@":t[":@"]}):this.child.push({[t.tagname]:t.child}),r!==void 0&&(this.child[this.child.length-1][bd]={startIndex:r})}static getMetaDataSymbol(){return bd}}});function Qm(e,t){let r={};if(e[t+3]==="O"&&e[t+4]==="C"&&e[t+5]==="T"&&e[t+6]==="Y"&&e[t+7]==="P"&&e[t+8]==="E"){t=t+9;let n=1,o=!1,s=!1,i="";for(;t<e.length;t++)if(e[t]==="<"&&!s){if(o&&gn(e,"!ENTITY",t)){t+=7;let a,c;[a,c,t]=wj(e,t+1),c.indexOf("&")===-1&&(r[a]={regx:RegExp(`&${a};`,"g"),val:c})}else if(o&&gn(e,"!ELEMENT",t)){t+=8;let{index:a}=Cj(e,t+1);t=a}else if(o&&gn(e,"!ATTLIST",t))t+=8;else if(o&&gn(e,"!NOTATION",t)){t+=9;let{index:a}=bj(e,t+1);t=a}else if(gn(e,"!--",t))s=!0;else throw new Error("Invalid DOCTYPE");n++,i=""}else if(e[t]===">"){if(s?e[t-1]==="-"&&e[t-2]==="-"&&(s=!1,n--):n--,n===0)break}else e[t]==="["?o=!0:i+=e[t];if(n!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:r,i:t}}function wj(e,t){t=Er(e,t);let r="";for(;t<e.length&&!/\s/.test(e[t])&&e[t]!=='"'&&e[t]!=="'";)r+=e[t],t++;if(Zm(r),t=Er(e,t),e.substring(t,t+6).toUpperCase()==="SYSTEM")throw new Error("External entities are not supported");if(e[t]==="%")throw new Error("Parameter entities are not supported");let n="";return[t,n]=Pd(e,t,"entity"),t--,[r,n,t]}function bj(e,t){t=Er(e,t);let r="";for(;t<e.length&&!/\s/.test(e[t]);)r+=e[t],t++;Zm(r),t=Er(e,t);let n=e.substring(t,t+6).toUpperCase();if(n!=="SYSTEM"&&n!=="PUBLIC")throw new Error(`Expected SYSTEM or PUBLIC, found "${n}"`);t+=n.length,t=Er(e,t);let o=null,s=null;if(n==="PUBLIC")[t,o]=Pd(e,t,"publicIdentifier"),t=Er(e,t),(e[t]==='"'||e[t]==="'")&&([t,s]=Pd(e,t,"systemIdentifier"));else if(n==="SYSTEM"&&([t,s]=Pd(e,t,"systemIdentifier"),!s))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:r,publicIdentifier:o,systemIdentifier:s,index:--t}}function Pd(e,t,r){let n="",o=e[t];if(o!=='"'&&o!=="'")throw new Error(`Expected quoted string, found "${o}"`);for(t++;t<e.length&&e[t]!==o;)n+=e[t],t++;if(e[t]!==o)throw new Error(`Unterminated ${r} value`);return t++,[t,n]}function Cj(e,t){t=Er(e,t);let r="";for(;t<e.length&&!/\s/.test(e[t]);)r+=e[t],t++;if(!Zm(r))throw new Error(`Invalid element name: "${r}"`);t=Er(e,t);let n="";if(e[t]==="E"&&gn(e,"MPTY",t))t+=4;else if(e[t]==="A"&&gn(e,"NY",t))t+=2;else if(e[t]==="("){for(t++;t<e.length&&e[t]!==")";)n+=e[t],t++;if(e[t]!==")")throw new Error("Unterminated content model")}else throw new Error(`Invalid Element Expression, found "${e[t]}"`);return{elementName:r,contentModel:n.trim(),index:t}}function gn(e,t,r){for(let n=0;n<t.length;n++)if(t[n]!==e[r+n+1])return!1;return!0}function Zm(e){if(Wi(e))return e;throw new Error(`Invalid entity name ${e}`)}var Er,Iw=y(()=>{wd();Er=(e,t)=>{for(;t<e.length&&/\s/.test(e[t]);)t++;return t}});function ef(e,t={}){if(t=Object.assign({},Tj,t),!e||typeof e!="string")return e;let r=e.trim();if(t.skipLike!==void 0&&t.skipLike.test(r))return e;if(e==="0")return 0;if(t.hex&&Pj.test(r))return Ij(r,16);if(r.search(/.+[eE].+/)!==-1)return Aj(e,r,t);{let n=xj.exec(r);if(n){let o=n[1]||"",s=n[2],i=Oj(n[3]),a=o?e[s.length+1]===".":e[s.length]===".";if(!t.leadingZeros&&(s.length>1||s.length===1&&!a))return e;{let c=Number(r),d=String(c);if(c===0)return c;if(d.search(/[eE]/)!==-1)return t.eNotation?c:e;if(r.indexOf(".")!==-1)return d==="0"||d===i||d===`${o}${i}`?c:e;let l=s?i:r;return s?l===d||o+l===d?c:e:l===d||l===o+d?c:e}}else return e}}function Aj(e,t,r){if(!r.eNotation)return e;let n=t.match(Rj);if(n){let o=n[1]||"",s=n[3].indexOf("e")===-1?"E":"e",i=n[2],a=o?e[i.length+1]===s:e[i.length]===s;return i.length>1&&a?e:i.length===1&&(n[3].startsWith(`.${s}`)||n[3][0]===s)?Number(t):r.leadingZeros&&!a?(t=(n[1]||"")+n[3],Number(t)):e}else return e}function Oj(e){return e&&e.indexOf(".")!==-1&&(e=e.replace(/0+$/,""),e==="."?e="0":e[0]==="."?e="0"+e:e[e.length-1]==="."&&(e=e.substring(0,e.length-1))),e}function Ij(e,t){if(parseInt)return parseInt(e,t);if(Number.parseInt)return Number.parseInt(e,t);if(window&&window.parseInt)return window.parseInt(e,t);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}var Pj,xj,Tj,Rj,Nw=y(()=>{Pj=/^[-+]?0x[a-fA-F0-9]+$/,xj=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,Tj={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};Rj=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/});function tf(e){return typeof e=="function"?e:Array.isArray(e)?t=>{for(let r of e)if(typeof r=="string"&&t===r||r instanceof RegExp&&r.test(t))return!0}:()=>!1}var Dw=y(()=>{});function Nj(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];this.lastEntities[n]={regex:new RegExp("&"+n+";","g"),val:e[n]}}}function Dj(e,t,r,n,o,s,i){if(e!==void 0&&(this.options.trimValues&&!n&&(e=e.trim()),e.length>0)){i||(e=this.replaceEntitiesValue(e));let a=this.options.tagValueProcessor(t,e,r,o,s);return a==null?e:typeof a!=typeof e||a!==e?a:this.options.trimValues?nf(e,this.options.parseTagValue,this.options.numberParseOptions):e.trim()===e?nf(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function Mj(e){if(this.options.removeNSPrefix){let t=e.split(":"),r=e.charAt(0)==="/"?"/":"";if(t[0]==="xmlns")return"";t.length===2&&(e=r+t[1])}return e}function Fj(e,t,r){if(this.options.ignoreAttributes!==!0&&typeof e=="string"){let n=vd(e,kj),o=n.length,s={};for(let i=0;i<o;i++){let a=this.resolveNameSpace(n[i][1]);if(this.ignoreAttributesFn(a,t))continue;let c=n[i][4],d=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(d=this.options.transformAttributeName(d)),d==="__proto__"&&(d="#__proto__"),c!==void 0){this.options.trimValues&&(c=c.trim()),c=this.replaceEntitiesValue(c);let l=this.options.attributeValueProcessor(a,c,t);l==null?s[d]=c:typeof l!=typeof c||l!==c?s[d]=l:s[d]=nf(c,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(s[d]=!0)}if(!Object.keys(s).length)return;if(this.options.attributesGroupName){let i={};return i[this.options.attributesGroupName]=s,i}return s}}function Lj(e,t,r,n){this.options.captureMetaData||(n=void 0);let o=this.options.updateTag(t.tagname,r,t[":@"]);o===!1||(typeof o=="string"&&(t.tagname=o),e.addChild(t,n))}function Bj(e,t,r,n){return e&&(n===void 0&&(n=t.child.length===0),e=this.parseTextData(e,t.tagname,r,!1,t[":@"]?Object.keys(t[":@"]).length!==0:!1,n),e!==void 0&&e!==""&&t.add(this.options.textNodeName,e),e=""),e}function $j(e,t,r){let n="*."+r;for(let o in e){let s=e[o];if(n===s||t===s)return!0}return!1}function Hj(e,t,r=">"){let n,o="";for(let s=t;s<e.length;s++){let i=e[s];if(n)i===n&&(n="");else if(i==='"'||i==="'")n=i;else if(i===r[0])if(r[1]){if(e[s+1]===r[1])return{data:o,index:s}}else return{data:o,index:s};else i==="	"&&(i=" ");o+=i}}function yn(e,t,r,n){let o=e.indexOf(t,r);if(o===-1)throw new Error(n);return o+t.length-1}function rf(e,t,r,n=">"){let o=Hj(e,t+1,n);if(!o)return;let s=o.data,i=o.index,a=s.search(/\s/),c=s,d=!0;a!==-1&&(c=s.substring(0,a),s=s.substring(a+1).trimStart());let l=c;if(r){let u=c.indexOf(":");u!==-1&&(c=c.substr(u+1),d=c!==o.data.substr(u+1))}return{tagName:c,tagExp:s,closeIndex:i,attrExpPresent:d,rawTagName:l}}function qj(e,t,r){let n=r,o=1;for(;r<e.length;r++)if(e[r]==="<")if(e[r+1]==="/"){let s=yn(e,">",r,`${t} is not closed`);if(e.substring(r+2,s).trim()===t&&(o--,o===0))return{tagContent:e.substring(n,r),i:s};r=s}else if(e[r+1]==="?")r=yn(e,"?>",r+1,"StopNode is not closed.");else if(e.substr(r+1,3)==="!--")r=yn(e,"-->",r+3,"StopNode is not closed.");else if(e.substr(r+1,2)==="![")r=yn(e,"]]>",r,"StopNode is not closed.")-2;else{let s=rf(e,r,">");s&&((s&&s.tagName)===t&&s.tagExp[s.tagExp.length-1]!=="/"&&o++,r=s.closeIndex)}}function nf(e,t,r){if(t&&typeof e=="string"){let n=e.trim();return n==="true"?!0:n==="false"?!1:ef(e,r)}else return ww(e)?e:""}var Yi,kj,Uj,jj,Mw=y(()=>{"use strict";wd();Cd();Iw();Nw();Dw();Yi=class{constructor(t){this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(r,n)=>String.fromCodePoint(Number.parseInt(n,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(r,n)=>String.fromCodePoint(Number.parseInt(n,16))}},this.addExternalEntities=Nj,this.parseXml=Uj,this.parseTextData=Dj,this.resolveNameSpace=Mj,this.buildAttributesMap=Fj,this.isItStopNode=$j,this.replaceEntitiesValue=jj,this.readStopNodeData=qj,this.saveTextToParentTag=Bj,this.addChild=Lj,this.ignoreAttributesFn=tf(this.options.ignoreAttributes)}};kj=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");Uj=function(e){e=e.replace(/\r\n?/g,`
`);let t=new qe("!xml"),r=t,n="",o="";for(let s=0;s<e.length;s++)if(e[s]==="<")if(e[s+1]==="/"){let a=yn(e,">",s,"Closing Tag is not closed."),c=e.substring(s+2,a).trim();if(this.options.removeNSPrefix){let u=c.indexOf(":");u!==-1&&(c=c.substr(u+1))}this.options.transformTagName&&(c=this.options.transformTagName(c)),r&&(n=this.saveTextToParentTag(n,r,o));let d=o.substring(o.lastIndexOf(".")+1);if(c&&this.options.unpairedTags.indexOf(c)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${c}>`);let l=0;d&&this.options.unpairedTags.indexOf(d)!==-1?(l=o.lastIndexOf(".",o.lastIndexOf(".")-1),this.tagsNodeStack.pop()):l=o.lastIndexOf("."),o=o.substring(0,l),r=this.tagsNodeStack.pop(),n="",s=a}else if(e[s+1]==="?"){let a=rf(e,s,!1,"?>");if(!a)throw new Error("Pi Tag is not closed.");if(n=this.saveTextToParentTag(n,r,o),!(this.options.ignoreDeclaration&&a.tagName==="?xml"||this.options.ignorePiTags)){let c=new qe(a.tagName);c.add(this.options.textNodeName,""),a.tagName!==a.tagExp&&a.attrExpPresent&&(c[":@"]=this.buildAttributesMap(a.tagExp,o,a.tagName)),this.addChild(r,c,o,s)}s=a.closeIndex+1}else if(e.substr(s+1,3)==="!--"){let a=yn(e,"-->",s+4,"Comment is not closed.");if(this.options.commentPropName){let c=e.substring(s+4,a-2);n=this.saveTextToParentTag(n,r,o),r.add(this.options.commentPropName,[{[this.options.textNodeName]:c}])}s=a}else if(e.substr(s+1,2)==="!D"){let a=Qm(e,s);this.docTypeEntities=a.entities,s=a.i}else if(e.substr(s+1,2)==="!["){let a=yn(e,"]]>",s,"CDATA is not closed.")-2,c=e.substring(s+9,a);n=this.saveTextToParentTag(n,r,o);let d=this.parseTextData(c,r.tagname,o,!0,!1,!0,!0);d==null&&(d=""),this.options.cdataPropName?r.add(this.options.cdataPropName,[{[this.options.textNodeName]:c}]):r.add(this.options.textNodeName,d),s=a+2}else{let a=rf(e,s,this.options.removeNSPrefix),c=a.tagName,d=a.rawTagName,l=a.tagExp,u=a.attrExpPresent,p=a.closeIndex;this.options.transformTagName&&(c=this.options.transformTagName(c)),r&&n&&r.tagname!=="!xml"&&(n=this.saveTextToParentTag(n,r,o,!1));let h=r;h&&this.options.unpairedTags.indexOf(h.tagname)!==-1&&(r=this.tagsNodeStack.pop(),o=o.substring(0,o.lastIndexOf("."))),c!==t.tagname&&(o+=o?"."+c:c);let g=s;if(this.isItStopNode(this.options.stopNodes,o,c)){let S="";if(l.length>0&&l.lastIndexOf("/")===l.length-1)c[c.length-1]==="/"?(c=c.substr(0,c.length-1),o=o.substr(0,o.length-1),l=c):l=l.substr(0,l.length-1),s=a.closeIndex;else if(this.options.unpairedTags.indexOf(c)!==-1)s=a.closeIndex;else{let b=this.readStopNodeData(e,d,p+1);if(!b)throw new Error(`Unexpected end of ${d}`);s=b.i,S=b.tagContent}let E=new qe(c);c!==l&&u&&(E[":@"]=this.buildAttributesMap(l,o,c)),S&&(S=this.parseTextData(S,c,o,!0,u,!0,!0)),o=o.substr(0,o.lastIndexOf(".")),E.add(this.options.textNodeName,S),this.addChild(r,E,o,g)}else{if(l.length>0&&l.lastIndexOf("/")===l.length-1){c[c.length-1]==="/"?(c=c.substr(0,c.length-1),o=o.substr(0,o.length-1),l=c):l=l.substr(0,l.length-1),this.options.transformTagName&&(c=this.options.transformTagName(c));let S=new qe(c);c!==l&&u&&(S[":@"]=this.buildAttributesMap(l,o,c)),this.addChild(r,S,o,g),o=o.substr(0,o.lastIndexOf("."))}else{let S=new qe(c);this.tagsNodeStack.push(r),c!==l&&u&&(S[":@"]=this.buildAttributesMap(l,o,c)),this.addChild(r,S,o,g),r=S}n="",s=p}}else n+=e[s];return t.child};jj=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){let r=this.docTypeEntities[t];e=e.replace(r.regx,r.val)}for(let t in this.lastEntities){let r=this.lastEntities[t];e=e.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){let r=this.htmlEntities[t];e=e.replace(r.regex,r.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e}});function sf(e,t){return kw(e,t)}function kw(e,t,r){let n,o={};for(let s=0;s<e.length;s++){let i=e[s],a=zj(i),c="";if(r===void 0?c=a:c=r+"."+a,a===t.textNodeName)n===void 0?n=i[a]:n+=""+i[a];else{if(a===void 0)continue;if(i[a]){let d=kw(i[a],t,c),l=Kj(d,t);i[of]!==void 0&&(d[of]=i[of]),i[":@"]?Vj(d,i[":@"],c,t):Object.keys(d).length===1&&d[t.textNodeName]!==void 0&&!t.alwaysCreateTextNode?d=d[t.textNodeName]:Object.keys(d).length===0&&(t.alwaysCreateTextNode?d[t.textNodeName]="":d=""),o[a]!==void 0&&o.hasOwnProperty(a)?(Array.isArray(o[a])||(o[a]=[o[a]]),o[a].push(d)):t.isArray(a,c,l)?o[a]=[d]:o[a]=d}}}return typeof n=="string"?n.length>0&&(o[t.textNodeName]=n):n!==void 0&&(o[t.textNodeName]=n),o}function zj(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];if(n!==":@")return n}}function Vj(e,t,r,n){if(t){let o=Object.keys(t),s=o.length;for(let i=0;i<s;i++){let a=o[i];n.isArray(a,r+"."+a,!0,!0)?e[a]=[t[a]]:e[a]=t[a]}}}function Kj(e,t){let{textNodeName:r}=t,n=Object.keys(e).length;return!!(n===0||n===1&&(e[r]||typeof e[r]=="boolean"||e[r]===0))}var of,Fw=y(()=>{"use strict";Cd();of=qe.getMetaDataSymbol()});var vr,Uw=y(()=>{Ow();Mw();Fw();Rw();Cd();vr=class{constructor(t){this.externalEntities={},this.options=Aw(t)}parse(t,r){if(typeof t!="string")if(t.toString)t=t.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(r){r===!0&&(r={});let s=Tw(t,r);if(s!==!0)throw Error(`${s.err.msg}:${s.err.line}:${s.err.col}`)}let n=new Yi(this.options);n.addExternalEntities(this.externalEntities);let o=n.parseXml(t);return this.options.preserveOrder||o===void 0?o:sf(o,this.options)}addEntity(t,r){if(r.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(t.indexOf("&")!==-1||t.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(r==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=r}static getMetaDataSymbol(){return qe.getMetaDataSymbol()}}});var af=y(()=>{"use strict";Uw()});var Lw,jw,_n,xd=y(()=>{zt();ye();Lw=v(L()),jw=v(we());af();_r();_n=class extends Re{constructor(r){super();_(this,"settings");_(this,"stringDeserializer");this.settings=r,this.stringDeserializer=new tn(r)}setSerdeContext(r){this.serdeContext=r,this.stringDeserializer.setSerdeContext(r)}read(r,n,o){let s=O.of(r),i=s.getMemberSchemas();if(s.isStructSchema()&&s.isMemberSchema()&&!!Object.values(i).find(l=>!!l.getMemberTraits().eventPayload)){let l={},u=Object.keys(i)[0];return i[u].isBlobSchema()?l[u]=n:l[u]=this.read(i[u],n),l}let c=(this.serdeContext?.utf8Encoder??jw.toUtf8)(n),d=this.parseXml(c);return this.readSchema(r,o?d[o]:d)}readSchema(r,n){let o=O.of(r),s=o.getMergedTraits();if(o.isListSchema()&&!Array.isArray(n))return this.readSchema(o,[n]);if(n==null)return n;if(typeof n=="object"){let i=!!s.sparse,a=!!s.xmlFlattened;if(o.isListSchema()){let d=o.getValueSchema(),l=[],u=d.getMergedTraits().xmlName??"member",p=a?n:(n[0]??n)[u],h=Array.isArray(p)?p:[p];for(let g of h)(g!=null||i)&&l.push(this.readSchema(d,g));return l}let c={};if(o.isMapSchema()){let d=o.getKeySchema(),l=o.getValueSchema(),u;a?u=Array.isArray(n)?n:[n]:u=Array.isArray(n.entry)?n.entry:[n.entry];let p=d.getMergedTraits().xmlName??"key",h=l.getMergedTraits().xmlName??"value";for(let g of u){let S=g[p],E=g[h];(E!=null||i)&&(c[S]=this.readSchema(l,E))}return c}if(o.isStructSchema()){for(let[d,l]of o.structIterator()){let u=l.getMergedTraits(),p=u.httpPayload?u.xmlName??l.getName():l.getMemberTraits().xmlName??d;n[p]!=null&&(c[d]=this.readSchema(l,n[p]))}return c}if(o.isDocumentSchema())return n;throw new Error(`@aws-sdk/core/protocols - xml deserializer unhandled schema type for ${o.getName(!0)}`)}return o.isListSchema()?[]:o.isMapSchema()||o.isStructSchema()?{}:this.stringDeserializer.read(o,n)}parseXml(r){if(r.length){let n=new vr({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(c,d)=>d.trim()===""&&d.includes(`
`)?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10",`
`);let o;try{o=n.parse(r,!0)}catch(c){throw c&&typeof c=="object"&&Object.defineProperty(c,"$responseBodyText",{value:r}),c}let s="#text",i=Object.keys(o)[0],a=o[i];return a[s]&&(a[i]=a[s],delete a[s]),(0,Lw.getValueFromTextNode)(a)}return{}}}});var Bw,$w,Td,Hw=y(()=>{zt();ye();We();Bw=v(L()),$w=v(Oe());_r();Td=class extends Re{constructor(r){super();_(this,"settings");_(this,"buffer");this.settings=r}write(r,n,o=""){this.buffer===void 0&&(this.buffer="");let s=O.of(r);if(o&&!o.endsWith(".")&&(o+="."),s.isBlobSchema())(typeof n=="string"||n instanceof Uint8Array)&&(this.writeKey(o),this.writeValue((this.serdeContext?.base64Encoder??$w.toBase64)(n)));else if(s.isBooleanSchema()||s.isNumericSchema()||s.isStringSchema())n!=null&&(this.writeKey(o),this.writeValue(String(n)));else if(s.isBigIntegerSchema())n!=null&&(this.writeKey(o),this.writeValue(String(n)));else if(s.isBigDecimalSchema())n!=null&&(this.writeKey(o),this.writeValue(n instanceof be?n.string:String(n)));else if(s.isTimestampSchema()){if(n instanceof Date)switch(this.writeKey(o),en(s,this.settings)){case x.TIMESTAMP_DATE_TIME:this.writeValue(n.toISOString().replace(".000Z","Z"));break;case x.TIMESTAMP_HTTP_DATE:this.writeValue((0,Bw.dateToUtcString)(n));break;case x.TIMESTAMP_EPOCH_SECONDS:this.writeValue(String(n.getTime()/1e3));break}}else{if(s.isDocumentSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unsupported document type ${s.getName(!0)}`);if(s.isListSchema()){if(Array.isArray(n))if(n.length===0)this.settings.serializeEmptyLists&&(this.writeKey(o),this.writeValue(""));else{let i=s.getValueSchema(),a=this.settings.flattenLists||s.getMergedTraits().xmlFlattened,c=1;for(let d of n){if(d==null)continue;let l=this.getKey("member",i.getMergedTraits().xmlName),u=a?`${o}${c}`:`${o}${l}.${c}`;this.write(i,d,u),++c}}}else if(s.isMapSchema()){if(n&&typeof n=="object"){let i=s.getKeySchema(),a=s.getValueSchema(),c=s.getMergedTraits().xmlFlattened,d=1;for(let[l,u]of Object.entries(n)){if(u==null)continue;let p=this.getKey("key",i.getMergedTraits().xmlName),h=c?`${o}${d}.${p}`:`${o}entry.${d}.${p}`,g=this.getKey("value",a.getMergedTraits().xmlName),S=c?`${o}${d}.${g}`:`${o}entry.${d}.${g}`;this.write(i,l,h),this.write(a,u,S),++d}}}else if(s.isStructSchema()){if(n&&typeof n=="object")for(let[i,a]of s.structIterator()){if(n[i]==null)continue;let c=this.getKey(i,a.getMergedTraits().xmlName),d=`${o}${c}`;this.write(a,n[i],d)}}else if(!s.isUnitSchema())throw new Error(`@aws-sdk/core/protocols - QuerySerializer unrecognized schema type ${s.getName(!0)}`)}}flush(){if(this.buffer===void 0)throw new Error("@aws-sdk/core/protocols - QuerySerializer cannot flush with nothing written to buffer.");let r=this.buffer;return delete this.buffer,r}getKey(r,n){let o=n??r;return this.settings.capitalizeKeys?o[0].toUpperCase()+o.slice(1):o}writeKey(r){r.endsWith(".")&&(r=r.slice(0,r.length-1)),this.buffer+=`&${vt(r)}=`}writeValue(r){this.buffer+=vt(r)}}});var qw,Xi,cf=y(()=>{zt();ye();qw=v(zi());xd();Hw();Xi=class extends Zr{constructor(r){super({defaultNamespace:r.defaultNamespace});_(this,"options");_(this,"serializer");_(this,"deserializer");this.options=r;let n={timestampFormat:{useTrait:!0,default:x.TIMESTAMP_DATE_TIME},httpBindings:!1,xmlNamespace:r.xmlNamespace,serviceNamespace:r.defaultNamespace,serializeEmptyLists:!0};this.serializer=new Td(n),this.deserializer=new _n(n)}getShapeId(){return"aws.protocols#awsQuery"}setSerdeContext(r){this.serializer.setSerdeContext(r),this.deserializer.setSerdeContext(r)}getPayloadCodec(){throw new Error("AWSQuery protocol has no payload codec.")}async serializeRequest(r,n,o){let s=await super.serializeRequest(r,n,o);s.path.endsWith("/")||(s.path+="/"),Object.assign(s.headers,{"content-type":"application/x-www-form-urlencoded"}),(qt(r.input)==="unit"||!s.body)&&(s.body=""),s.body=`Action=${r.name.split("#")[1]}&Version=${this.options.version}`+s.body,s.body.endsWith("&")&&(s.body=s.body.slice(-1));try{s.headers["content-length"]=String((0,qw.calculateBodyLength)(s.body))}catch{}return s}async deserializeResponse(r,n,o){let s=this.deserializer,i=O.of(r.output),a={};if(o.statusCode>=300){let u=await Ge(o.body,n);u.byteLength>0&&Object.assign(a,await s.read(x.DOCUMENT,u)),await this.handleError(r,n,o,a,this.deserializeMetadata(o))}for(let u in o.headers){let p=o.headers[u];delete o.headers[u],o.headers[u.toLowerCase()]=p}let c=i.isStructSchema()&&this.useNestedResult()?r.name.split("#")[1]+"Result":void 0,d=await Ge(o.body,n);return d.byteLength>0&&Object.assign(a,await s.read(i,d,c)),{$metadata:this.deserializeMetadata(o),...a}}useNestedResult(){return!0}async handleError(r,n,o,s,i){let a=this.loadQueryErrorCode(o,s)??"Unknown",c=this.options.defaultNamespace,d=a;a.includes("#")&&([c,d]=a.split("#"));let l=this.loadQueryError(s),u=le.for(c),p;try{p=u.find(b=>O.of(b).getMergedTraits().awsQueryError?.[0]===d),p||(p=u.getSchema(a))}catch{let C=le.for("smithy.ts.sdk.synthetic."+c).getBaseException();if(C){let N=C.ctor;throw Object.assign(new N(d),l)}throw new Error(d)}let h=O.of(p),g=this.loadQueryErrorMessage(s),S=new p.ctor(g),E={};for(let[b,C]of h.structIterator()){let N=C.getMergedTraits().xmlName??b,k=l[N]??s[N];E[b]=this.deserializer.readSchema(C,k)}throw Object.assign(S,{$metadata:i,$response:o,$fault:h.getMergedTraits().error,message:g,...E}),S}loadQueryErrorCode(r,n){let o=(n.Errors?.[0]?.Error??n.Errors?.Error??n.Error)?.Code;if(o!==void 0)return o;if(r.statusCode==404)return"NotFound"}loadQueryError(r){return r.Errors?.[0]?.Error??r.Errors?.Error??r.Error}loadQueryErrorMessage(r){let n=this.loadQueryError(r);return n?.message??n?.Message??r.message??r.Message??"Unknown"}}});var df,zw=y(()=>{cf();df=class extends Xi{constructor(r){super(r);_(this,"options");this.options=r;let n={capitalizeKeys:!0,flattenLists:!0,serializeEmptyLists:!1};Object.assign(this.serializer.settings,n)}useNestedResult(){return!1}}});var Vw,Qi,uf,lf,pf=y(()=>{Vw=v(L());af();Vm();Qi=(e,t)=>yd(e,t).then(r=>{if(r.length){let n=new vr({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(c,d)=>d.trim()===""&&d.includes(`
`)?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10",`
`);let o;try{o=n.parse(r,!0)}catch(c){throw c&&typeof c=="object"&&Object.defineProperty(c,"$responseBodyText",{value:r}),c}let s="#text",i=Object.keys(o)[0],a=o[i];return a[s]&&(a[i]=a[s],delete a[s]),(0,Vw.getValueFromTextNode)(a)}return{}}),uf=async(e,t)=>{let r=await Qi(e,t);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},lf=(e,t)=>{if(t?.Error?.Code!==void 0)return t.Error.Code;if(t?.Code!==void 0)return t.Code;if(e.statusCode==404)return"NotFound"}});var Xw=w((gZ,Yw)=>{"use strict";var Rd=Object.defineProperty,Gj=Object.getOwnPropertyDescriptor,Wj=Object.getOwnPropertyNames,Jj=Object.prototype.hasOwnProperty,Ad=(e,t)=>Rd(e,"name",{value:t,configurable:!0}),Yj=(e,t)=>{for(var r in t)Rd(e,r,{get:t[r],enumerable:!0})},Xj=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Wj(t))!Jj.call(e,o)&&o!==r&&Rd(e,o,{get:()=>t[o],enumerable:!(n=Gj(t,o))||n.enumerable});return e},Qj=e=>Xj(Rd({},"__esModule",{value:!0}),e),Kw={};Yj(Kw,{XmlNode:()=>Zj,XmlText:()=>Jw});Yw.exports=Qj(Kw);function Gw(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}Ad(Gw,"escapeAttribute");function Ww(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r/g,"&#x0D;").replace(/\n/g,"&#x0A;").replace(/\u0085/g,"&#x85;").replace(/\u2028/,"&#x2028;")}Ad(Ww,"escapeElement");var Fo,Jw=(Fo=class{constructor(t){this.value=t}toString(){return Ww(""+this.value)}},Ad(Fo,"XmlText"),Fo),Gt,Zj=(Gt=class{constructor(t,r=[]){_(this,"attributes",{});this.name=t,this.children=r}static of(t,r,n){let o=new Gt(t);return r!==void 0&&o.addChildNode(new Jw(r)),n!==void 0&&o.withName(n),o}withName(t){return this.name=t,this}addAttribute(t,r){return this.attributes[t]=r,this}addChildNode(t){return this.children.push(t),this}removeAttribute(t){return delete this.attributes[t],this}n(t){return this.name=t,this}c(t){return this.children.push(t),this}a(t,r){return r!=null&&(this.attributes[t]=r),this}cc(t,r,n=r){if(t[r]!=null){let o=Gt.of(r,t[r]).withName(n);this.c(o)}}l(t,r,n,o){t[r]!=null&&o().map(i=>{i.withName(n),this.c(i)})}lc(t,r,n,o){if(t[r]!=null){let s=o(),i=new Gt(n);s.map(a=>{i.c(a)}),this.c(i)}}toString(){let t=!!this.children.length,r=`<${this.name}`,n=this.attributes;for(let o of Object.keys(n)){let s=n[o];s!=null&&(r+=` ${o}="${Gw(""+s)}"`)}return r+=t?`>${this.children.map(o=>o.toString()).join("")}</${this.name}>`:"/>"}},Ad(Gt,"XmlNode"),Gt)});var Ye,mf,Od,Zi,ff=y(()=>{Ye=v(Xw());ye();We();mf=v(L()),Od=v(Oe());_r();Zi=class extends Re{constructor(r){super();_(this,"settings");_(this,"stringBuffer");_(this,"byteBuffer");_(this,"buffer");this.settings=r}write(r,n){let o=O.of(r);if(o.isStringSchema()&&typeof n=="string")this.stringBuffer=n;else if(o.isBlobSchema())this.byteBuffer="byteLength"in n?n:(this.serdeContext?.base64Decoder??Od.fromBase64)(n);else{this.buffer=this.writeStruct(o,n,void 0);let s=o.getMergedTraits();s.httpPayload&&!s.xmlName&&this.buffer.withName(o.getName())}}flush(){if(this.byteBuffer!==void 0){let n=this.byteBuffer;return delete this.byteBuffer,n}if(this.stringBuffer!==void 0){let n=this.stringBuffer;return delete this.stringBuffer,n}let r=this.buffer;return this.settings.xmlNamespace&&(r?.attributes?.xmlns||r.addAttribute("xmlns",this.settings.xmlNamespace)),delete this.buffer,r.toString()}writeStruct(r,n,o){let s=r.getMergedTraits(),i=r.isMemberSchema()&&!s.httpPayload?r.getMemberTraits().xmlName??r.getMemberName():s.xmlName??r.getName();if(!i||!r.isStructSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write struct with empty name or non-struct, schema=${r.getName(!0)}.`);let a=Ye.XmlNode.of(i),[c,d]=this.getXmlnsAttribute(r,o);d&&a.addAttribute(c,d);for(let[l,u]of r.structIterator()){let p=n[l];if(p!=null){if(u.getMergedTraits().xmlAttribute){a.addAttribute(u.getMergedTraits().xmlName??l,this.writeSimple(u,p));continue}if(u.isListSchema())this.writeList(u,p,a,d);else if(u.isMapSchema())this.writeMap(u,p,a,d);else if(u.isStructSchema())a.addChildNode(this.writeStruct(u,p,d));else{let h=Ye.XmlNode.of(u.getMergedTraits().xmlName??u.getMemberName());this.writeSimpleInto(u,p,h,d),a.addChildNode(h)}}}return a}writeList(r,n,o,s){if(!r.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member list: ${r.getName(!0)}`);let i=r.getMergedTraits(),a=r.getValueSchema(),c=a.getMergedTraits(),d=!!c.sparse,l=!!i.xmlFlattened,[u,p]=this.getXmlnsAttribute(r,s),h=(g,S)=>{if(a.isListSchema())this.writeList(a,Array.isArray(S)?S:[S],g,p);else if(a.isMapSchema())this.writeMap(a,S,g,p);else if(a.isStructSchema()){let E=this.writeStruct(a,S,p);g.addChildNode(E.withName(l?i.xmlName??r.getMemberName():c.xmlName??"member"))}else{let E=Ye.XmlNode.of(l?i.xmlName??r.getMemberName():c.xmlName??"member");this.writeSimpleInto(a,S,E,p),g.addChildNode(E)}};if(l)for(let g of n)(d||g!=null)&&h(o,g);else{let g=Ye.XmlNode.of(i.xmlName??r.getMemberName());p&&g.addAttribute(u,p);for(let S of n)(d||S!=null)&&h(g,S);o.addChildNode(g)}}writeMap(r,n,o,s,i=!1){if(!r.isMemberSchema())throw new Error(`@aws-sdk/core/protocols - xml serializer, cannot write non-member map: ${r.getName(!0)}`);let a=r.getMergedTraits(),c=r.getKeySchema(),l=c.getMergedTraits().xmlName??"key",u=r.getValueSchema(),p=u.getMergedTraits(),h=p.xmlName??"value",g=!!p.sparse,S=!!a.xmlFlattened,[E,b]=this.getXmlnsAttribute(r,s),C=(N,k,R)=>{let G=Ye.XmlNode.of(l,k),[nr,ke]=this.getXmlnsAttribute(c,b);ke&&G.addAttribute(nr,ke),N.addChildNode(G);let _e=Ye.XmlNode.of(h);u.isListSchema()?this.writeList(u,R,_e,b):u.isMapSchema()?this.writeMap(u,R,_e,b,!0):u.isStructSchema()?_e=this.writeStruct(u,R,b):this.writeSimpleInto(u,R,_e,b),N.addChildNode(_e)};if(S){for(let[N,k]of Object.entries(n))if(g||k!=null){let R=Ye.XmlNode.of(a.xmlName??r.getMemberName());C(R,N,k),o.addChildNode(R)}}else{let N;i||(N=Ye.XmlNode.of(a.xmlName??r.getMemberName()),b&&N.addAttribute(E,b),o.addChildNode(N));for(let[k,R]of Object.entries(n))if(g||R!=null){let G=Ye.XmlNode.of("entry");C(G,k,R),(i?o:N).addChildNode(G)}}}writeSimple(r,n){if(n===null)throw new Error("@aws-sdk/core/protocols - (XML serializer) cannot write null value.");let o=O.of(r),s=null;if(n&&typeof n=="object")if(o.isBlobSchema())s=(this.serdeContext?.base64Encoder??Od.toBase64)(n);else if(o.isTimestampSchema()&&n instanceof Date){let i=this.settings.timestampFormat;switch(i.useTrait?o.getSchema()===x.TIMESTAMP_DEFAULT?i.default:o.getSchema()??i.default:i.default){case x.TIMESTAMP_DATE_TIME:s=n.toISOString().replace(".000Z","Z");break;case x.TIMESTAMP_HTTP_DATE:s=(0,mf.dateToUtcString)(n);break;case x.TIMESTAMP_EPOCH_SECONDS:s=String(n.getTime()/1e3);break;default:console.warn("Missing timestamp format, using http date",n),s=(0,mf.dateToUtcString)(n);break}}else{if(o.isBigDecimalSchema()&&n)return n instanceof be?n.string:String(n);throw o.isMapSchema()||o.isListSchema()?new Error("@aws-sdk/core/protocols - xml serializer, cannot call _write() on List/Map schema, call writeList or writeMap() instead."):new Error(`@aws-sdk/core/protocols - xml serializer, unhandled schema type for object value and schema: ${o.getName(!0)}`)}if((o.isStringSchema()||o.isBooleanSchema()||o.isNumericSchema()||o.isBigIntegerSchema()||o.isBigDecimalSchema())&&(s=String(n)),s===null)throw new Error(`Unhandled schema-value pair ${o.getName(!0)}=${n}`);return s}writeSimpleInto(r,n,o,s){let i=this.writeSimple(r,n),a=O.of(r),c=new Ye.XmlText(i),[d,l]=this.getXmlnsAttribute(a,s);l&&o.addAttribute(d,l),o.addChildNode(c)}getXmlnsAttribute(r,n){let o=r.getMergedTraits(),[s,i]=o.xmlNamespace??[];return i&&i!==n?[s?`xmlns:${s}`:"xmlns",i]:[void 0,void 0]}}});var ea,hf=y(()=>{_r();xd();ff();ea=class extends Re{constructor(r){super();_(this,"settings");this.settings=r}createSerializer(){let r=new Zi(this.settings);return r.setSerdeContext(this.serdeContext),r}createDeserializer(){let r=new _n(this.settings);return r.setSerdeContext(this.serdeContext),r}}});var Qw,gf,Zw=y(()=>{zt();ye();Qw=v(zi());pf();hf();gf=class extends Qr{constructor(r){super(r);_(this,"codec");_(this,"serializer");_(this,"deserializer");let n={timestampFormat:{useTrait:!0,default:x.TIMESTAMP_DATE_TIME},httpBindings:!0,xmlNamespace:r.xmlNamespace,serviceNamespace:r.defaultNamespace};this.codec=new ea(n),this.serializer=new nn(this.codec.createSerializer(),n),this.deserializer=new rn(this.codec.createDeserializer(),n)}getPayloadCodec(){return this.codec}getShapeId(){return"aws.protocols#restXml"}async serializeRequest(r,n,o){let s=await super.serializeRequest(r,n,o),i=O.of(r.input),a=i.getMemberSchemas();if(s.path=String(s.path).split("/").filter(c=>c!=="{Bucket}").join("/")||"/",!s.headers["content-type"]){let c=Object.values(a).find(d=>!!d.getMergedTraits().httpPayload);if(c){let d=c.getMergedTraits().mediaType;d?s.headers["content-type"]=d:c.isStringSchema()?s.headers["content-type"]="text/plain":c.isBlobSchema()?s.headers["content-type"]="application/octet-stream":s.headers["content-type"]="application/xml"}else i.isUnitSchema()||Object.values(a).find(l=>{let{httpQuery:u,httpQueryParams:p,httpHeader:h,httpLabel:g,httpPrefixHeaders:S}=l.getMergedTraits();return!u&&!p&&!h&&!g&&S===void 0})&&(s.headers["content-type"]="application/xml")}if(s.headers["content-type"]==="application/xml"&&typeof s.body=="string"&&(s.body='<?xml version="1.0" encoding="UTF-8"?>'+s.body),s.body)try{s.headers["content-length"]=String((0,Qw.calculateBodyLength)(s.body))}catch{}return s}async deserializeResponse(r,n,o){return super.deserializeResponse(r,n,o)}async handleError(r,n,o,s,i){let a=lf(o,s)??"Unknown",c=this.options.defaultNamespace,d=a;a.includes("#")&&([c,d]=a.split("#"));let l=le.for(c),u;try{u=l.getSchema(a)}catch{let b=le.for("smithy.ts.sdk.synthetic."+c).getBaseException();if(b){let C=b.ctor;throw Object.assign(new C(d),s)}throw new Error(d)}let p=O.of(u),h=s.Error?.message??s.Error?.Message??s.message??s.Message??"Unknown",g=new u.ctor(h);await this.deserializeHttpMessage(u,n,o,s);let S={};for(let[E,b]of p.structIterator()){let C=b.getMergedTraits().xmlName??E,N=s.Error?.[C]??s[C];S[E]=this.codec.createDeserializer().readSchema(b,N)}throw Object.assign(g,{$metadata:i,$response:o,$fault:p.getMergedTraits().error,message:h,...S}),g}}});var eb=y(()=>{Vv();hw();gw();Ed();_w();Sd();Gm();Wm();Ew();Vi();zw();cf();Zw();hf();xd();ff();pf()});var Ct={};ct(Ct,{AWSSDKSigV4Signer:()=>vm,AwsEc2QueryProtocol:()=>df,AwsJson1_0Protocol:()=>Jm,AwsJson1_1Protocol:()=>Ym,AwsJsonRpcProtocol:()=>hn,AwsQueryProtocol:()=>Xi,AwsRestJsonProtocol:()=>Xm,AwsRestXmlProtocol:()=>gf,AwsSdkSigV4ASigner:()=>qi,AwsSdkSigV4Signer:()=>je,JsonCodec:()=>fn,JsonShapeDeserializer:()=>Ki,JsonShapeSerializer:()=>Gi,NODE_AUTH_SCHEME_PREFERENCE_OPTIONS:()=>xo,NODE_SIGV4A_CONFIG_OPTIONS:()=>lv,XmlCodec:()=>ea,XmlShapeDeserializer:()=>_n,XmlShapeSerializer:()=>Zi,_toBool:()=>hL,_toNum:()=>gL,_toStr:()=>fL,awsExpectUnion:()=>cj,emitWarningIfUnsupportedVersion:()=>bo,getBearerTokenEnvKey:()=>od,loadRestJsonErrorCode:()=>mn,loadRestXmlErrorCode:()=>lf,parseJsonBody:()=>ko,parseJsonErrorBody:()=>Km,parseXmlBody:()=>Qi,parseXmlErrorBody:()=>uf,resolveAWSSDKSigV4Config:()=>$v,resolveAwsSdkSigV4AConfig:()=>uv,resolveAwsSdkSigV4Config:()=>ln,setCredentialFeature:()=>hr,setFeature:()=>VE,setTokenFeature:()=>GE,state:()=>nd,validateSigningProperties:()=>Po});var Se=y(()=>{pt();Fm();eb()});var Uo=w((tee,pb)=>{"use strict";var Nd=Object.defineProperty,eB=Object.getOwnPropertyDescriptor,tB=Object.getOwnPropertyNames,rB=Object.prototype.hasOwnProperty,Wt=(e,t)=>Nd(e,"name",{value:t,configurable:!0}),nB=(e,t)=>{for(var r in t)Nd(e,r,{get:t[r],enumerable:!0})},oB=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of tB(t))!rB.call(e,o)&&o!==r&&Nd(e,o,{get:()=>t[o],enumerable:!(n=eB(t,o))||n.enumerable});return e},sB=e=>oB(Nd({},"__esModule",{value:!0}),e),ob={};nB(ob,{DEFAULT_UA_APP_ID:()=>sb,getUserAgentMiddlewareOptions:()=>lb,getUserAgentPlugin:()=>mB,resolveUserAgentConfig:()=>ab,userAgentMiddleware:()=>ub});pb.exports=sB(ob);var iB=(Ue(),H(_o)),sb=void 0;function ib(e){return e===void 0?!0:typeof e=="string"&&e.length<=50}Wt(ib,"isValidUserAgentAppId");function ab(e){let t=(0,iB.normalizeProvider)(e.userAgentAppId??sb),{customUserAgent:r}=e;return Object.assign(e,{customUserAgent:typeof r=="string"?[[r]]:r,userAgentAppId:Wt(async()=>{let n=await t();if(!ib(n)){let o=e.logger?.constructor?.name==="NoOpLogger"||!e.logger?console:e.logger;typeof n!="string"?o?.warn("userAgentAppId must be a string or undefined."):n.length>50&&o?.warn("The provided userAgentAppId exceeds the maximum length of 50 characters.")}return n},"userAgentAppId")})}Wt(ab,"resolveUserAgentConfig");var aB=wo(),cB=se(),Pt=(Se(),H(Ct)),dB=/\d{12}\.ddb/;async function cb(e,t,r){if(r.request?.headers?.["smithy-protocol"]==="rpc-v2-cbor"&&(0,Pt.setFeature)(e,"PROTOCOL_RPC_V2_CBOR","M"),typeof t.retryStrategy=="function"){let s=await t.retryStrategy();typeof s.acquireInitialRetryToken=="function"?s.constructor?.name?.includes("Adaptive")?(0,Pt.setFeature)(e,"RETRY_MODE_ADAPTIVE","F"):(0,Pt.setFeature)(e,"RETRY_MODE_STANDARD","E"):(0,Pt.setFeature)(e,"RETRY_MODE_LEGACY","D")}if(typeof t.accountIdEndpointMode=="function"){let s=e.endpointV2;switch(String(s?.url?.hostname).match(dB)&&(0,Pt.setFeature)(e,"ACCOUNT_ID_ENDPOINT","O"),await t.accountIdEndpointMode?.()){case"disabled":(0,Pt.setFeature)(e,"ACCOUNT_ID_MODE_DISABLED","Q");break;case"preferred":(0,Pt.setFeature)(e,"ACCOUNT_ID_MODE_PREFERRED","P");break;case"required":(0,Pt.setFeature)(e,"ACCOUNT_ID_MODE_REQUIRED","R");break}}let o=e.__smithy_context?.selectedHttpAuthScheme?.identity;if(o?.$source){let s=o;s.accountId&&(0,Pt.setFeature)(e,"RESOLVED_ACCOUNT_ID","T");for(let[i,a]of Object.entries(s.$source??{}))(0,Pt.setFeature)(e,i,a)}}Wt(cb,"checkFeatures");var tb="user-agent",yf="x-amz-user-agent",rb=" ",_f="/",uB=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,lB=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,nb="-",pB=1024;function db(e){let t="";for(let r in e){let n=e[r];if(t.length+n.length+1<=pB){t.length?t+=","+n:t+=n;continue}break}return t}Wt(db,"encodeFeatures");var ub=Wt(e=>(t,r)=>async n=>{let{request:o}=n;if(!cB.HttpRequest.isInstance(o))return t(n);let{headers:s}=o,i=r?.userAgent?.map(Id)||[],a=(await e.defaultUserAgentProvider()).map(Id);await cb(r,e,n);let c=r;a.push(`m/${db(Object.assign({},r.__smithy_context?.features,c.__aws_sdk_context?.features))}`);let d=e?.customUserAgent?.map(Id)||[],l=await e.userAgentAppId();l&&a.push(Id([`app/${l}`]));let u=(0,aB.getUserAgentPrefix)(),p=(u?[u]:[]).concat([...a,...i,...d]).join(rb),h=[...a.filter(g=>g.startsWith("aws-sdk-")),...d].join(rb);return e.runtime!=="browser"?(h&&(s[yf]=s[yf]?`${s[tb]} ${h}`:h),s[tb]=p):s[yf]=p,t({...n,request:o})},"userAgentMiddleware"),Id=Wt(e=>{let t=e[0].split(_f).map(i=>i.replace(uB,nb)).join(_f),r=e[1]?.replace(lB,nb),n=t.indexOf(_f),o=t.substring(0,n),s=t.substring(n+1);return o==="api"&&(s=s.toLowerCase()),[o,s,r].filter(i=>i&&i.length>0).reduce((i,a,c)=>{switch(c){case 0:return a;case 1:return`${i}/${a}`;default:return`${i}#${a}`}},"")},"escapeUserAgent"),lb={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},mB=Wt(e=>({applyToStack:Wt(t=>{t.add(ub(e),lb)},"applyToStack")}),"getUserAgentPlugin")});var yb=w((ree,gb)=>{var Dd=Object.defineProperty,fB=Object.getOwnPropertyDescriptor,hB=Object.getOwnPropertyNames,gB=Object.prototype.hasOwnProperty,mb=(e,t)=>Dd(e,"name",{value:t,configurable:!0}),yB=(e,t)=>{for(var r in t)Dd(e,r,{get:t[r],enumerable:!0})},_B=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of hB(t))!gB.call(e,o)&&o!==r&&Dd(e,o,{get:()=>t[o],enumerable:!(n=fB(t,o))||n.enumerable});return e},SB=e=>_B(Dd({},"__esModule",{value:!0}),e),fb={};yB(fb,{SelectorType:()=>hb,booleanSelector:()=>EB,numberSelector:()=>vB});gb.exports=SB(fb);var EB=mb((e,t,r)=>{if(t in e){if(e[t]==="true")return!0;if(e[t]==="false")return!1;throw new Error(`Cannot load ${r} "${t}". Expected "true" or "false", got ${e[t]}.`)}},"booleanSelector"),vB=mb((e,t,r)=>{if(!(t in e))return;let n=parseInt(e[t],10);if(Number.isNaN(n))throw new TypeError(`Cannot load ${r} '${t}'. Expected number, got '${e[t]}'.`);return n},"numberSelector"),hb=(e=>(e.ENV="env",e.CONFIG="shared config entry",e))(hb||{})});var xt=w((nee,Rb)=>{var kd=Object.defineProperty,wB=Object.getOwnPropertyDescriptor,bB=Object.getOwnPropertyNames,CB=Object.prototype.hasOwnProperty,mt=(e,t)=>kd(e,"name",{value:t,configurable:!0}),PB=(e,t)=>{for(var r in t)kd(e,r,{get:t[r],enumerable:!0})},xB=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of bB(t))!CB.call(e,o)&&o!==r&&kd(e,o,{get:()=>t[o],enumerable:!(n=wB(t,o))||n.enumerable});return e},TB=e=>xB(kd({},"__esModule",{value:!0}),e),Eb={};PB(Eb,{CONFIG_USE_DUALSTACK_ENDPOINT:()=>wb,CONFIG_USE_FIPS_ENDPOINT:()=>Cb,DEFAULT_USE_DUALSTACK_ENDPOINT:()=>RB,DEFAULT_USE_FIPS_ENDPOINT:()=>OB,ENV_USE_DUALSTACK_ENDPOINT:()=>vb,ENV_USE_FIPS_ENDPOINT:()=>bb,NODE_REGION_CONFIG_FILE_OPTIONS:()=>FB,NODE_REGION_CONFIG_OPTIONS:()=>kB,NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS:()=>AB,NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS:()=>IB,REGION_ENV_NAME:()=>Pb,REGION_INI_NAME:()=>xb,getRegionInfo:()=>$B,resolveCustomEndpointsConfig:()=>NB,resolveEndpointsConfig:()=>MB,resolveRegionConfig:()=>UB});Rb.exports=TB(Eb);var wr=yb(),vb="AWS_USE_DUALSTACK_ENDPOINT",wb="use_dualstack_endpoint",RB=!1,AB={environmentVariableSelector:e=>(0,wr.booleanSelector)(e,vb,wr.SelectorType.ENV),configFileSelector:e=>(0,wr.booleanSelector)(e,wb,wr.SelectorType.CONFIG),default:!1},bb="AWS_USE_FIPS_ENDPOINT",Cb="use_fips_endpoint",OB=!1,IB={environmentVariableSelector:e=>(0,wr.booleanSelector)(e,bb,wr.SelectorType.ENV),configFileSelector:e=>(0,wr.booleanSelector)(e,Cb,wr.SelectorType.CONFIG),default:!1},Md=He(),NB=mt(e=>{let{tls:t,endpoint:r,urlParser:n,useDualstackEndpoint:o}=e;return Object.assign(e,{tls:t??!0,endpoint:(0,Md.normalizeProvider)(typeof r=="string"?n(r):r),isCustomEndpoint:!0,useDualstackEndpoint:(0,Md.normalizeProvider)(o??!1)})},"resolveCustomEndpointsConfig"),DB=mt(async e=>{let{tls:t=!0}=e,r=await e.region();if(!new RegExp(/^([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9-]{0,61}[a-zA-Z0-9])$/).test(r))throw new Error("Invalid region in client config");let o=await e.useDualstackEndpoint(),s=await e.useFipsEndpoint(),{hostname:i}=await e.regionInfoProvider(r,{useDualstackEndpoint:o,useFipsEndpoint:s})??{};if(!i)throw new Error("Cannot resolve hostname from client config");return e.urlParser(`${t?"https:":"http:"}//${i}`)},"getEndpointFromRegion"),MB=mt(e=>{let t=(0,Md.normalizeProvider)(e.useDualstackEndpoint??!1),{endpoint:r,useFipsEndpoint:n,urlParser:o,tls:s}=e;return Object.assign(e,{tls:s??!0,endpoint:r?(0,Md.normalizeProvider)(typeof r=="string"?o(r):r):()=>DB({...e,useDualstackEndpoint:t,useFipsEndpoint:n}),isCustomEndpoint:!!r,useDualstackEndpoint:t})},"resolveEndpointsConfig"),Pb="AWS_REGION",xb="region",kB={environmentVariableSelector:e=>e[Pb],configFileSelector:e=>e[xb],default:()=>{throw new Error("Region is missing")}},FB={preferredFile:"credentials"},Tb=mt(e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips")),"isFipsRegion"),_b=mt(e=>Tb(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e,"getRealRegion"),UB=mt(e=>{let{region:t,useFipsEndpoint:r}=e;if(!t)throw new Error("Region is missing");return Object.assign(e,{region:async()=>{if(typeof t=="string")return _b(t);let n=await t();return _b(n)},useFipsEndpoint:async()=>{let n=typeof t=="string"?t:await t();return Tb(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}})},"resolveRegionConfig"),Sb=mt((e=[],{useFipsEndpoint:t,useDualstackEndpoint:r})=>e.find(({tags:n})=>t===n.includes("fips")&&r===n.includes("dualstack"))?.hostname,"getHostnameFromVariants"),LB=mt((e,{regionHostname:t,partitionHostname:r})=>t||(r?r.replace("{region}",e):void 0),"getResolvedHostname"),jB=mt((e,{partitionHash:t})=>Object.keys(t||{}).find(r=>t[r].regions.includes(e))??"aws","getResolvedPartition"),BB=mt((e,{signingRegion:t,regionRegex:r,useFipsEndpoint:n})=>{if(t)return t;if(n){let o=r.replace("\\\\","\\").replace(/^\^/g,"\\.").replace(/\$$/g,"\\."),s=e.match(o);if(s)return s[0].slice(1,-1)}},"getResolvedSigningRegion"),$B=mt((e,{useFipsEndpoint:t=!1,useDualstackEndpoint:r=!1,signingService:n,regionHash:o,partitionHash:s})=>{let i=jB(e,{partitionHash:s}),a=e in o?e:s[i]?.endpoint??e,c={useFipsEndpoint:t,useDualstackEndpoint:r},d=Sb(o[a]?.variants,c),l=Sb(s[i]?.variants,c),u=LB(a,{regionHostname:d,partitionHostname:l});if(u===void 0)throw new Error(`Endpoint resolution failed for: ${{resolvedRegion:a,useFipsEndpoint:t,useDualstackEndpoint:r}}`);let p=BB(u,{signingRegion:o[a]?.signingRegion,regionRegex:s[i].regionRegex,useFipsEndpoint:t});return{partition:i,signingService:n,hostname:u,...p&&{signingRegion:p},...o[a]?.signingService&&{signingService:o[a].signingService}}},"getRegionInfo")});var Ib=w((oee,Ob)=>{var Fd=Object.defineProperty,HB=Object.getOwnPropertyDescriptor,qB=Object.getOwnPropertyNames,zB=Object.prototype.hasOwnProperty,VB=(e,t)=>Fd(e,"name",{value:t,configurable:!0}),KB=(e,t)=>{for(var r in t)Fd(e,r,{get:t[r],enumerable:!0})},GB=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of qB(t))!zB.call(e,o)&&o!==r&&Fd(e,o,{get:()=>t[o],enumerable:!(n=HB(t,o))||n.enumerable});return e},WB=e=>GB(Fd({},"__esModule",{value:!0}),e),Ab={};KB(Ab,{resolveEventStreamSerdeConfig:()=>JB});Ob.exports=WB(Ab);var JB=VB(e=>Object.assign(e,{eventStreamMarshaller:e.eventStreamSerdeProvider(e)}),"resolveEventStreamSerdeConfig")});var ta=w((see,Fb)=>{var Ud=Object.defineProperty,YB=Object.getOwnPropertyDescriptor,XB=Object.getOwnPropertyNames,QB=Object.prototype.hasOwnProperty,Db=(e,t)=>Ud(e,"name",{value:t,configurable:!0}),ZB=(e,t)=>{for(var r in t)Ud(e,r,{get:t[r],enumerable:!0})},e$=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of XB(t))!QB.call(e,o)&&o!==r&&Ud(e,o,{get:()=>t[o],enumerable:!(n=YB(t,o))||n.enumerable});return e},t$=e=>e$(Ud({},"__esModule",{value:!0}),e),Mb={};ZB(Mb,{contentLengthMiddleware:()=>Sf,contentLengthMiddlewareOptions:()=>kb,getContentLengthPlugin:()=>n$});Fb.exports=t$(Mb);var r$=se(),Nb="content-length";function Sf(e){return t=>async r=>{let n=r.request;if(r$.HttpRequest.isInstance(n)){let{body:o,headers:s}=n;if(o&&Object.keys(s).map(i=>i.toLowerCase()).indexOf(Nb)===-1)try{let i=e(o);n.headers={...n.headers,[Nb]:String(i)}}catch{}}return t({...r,request:n})}}Db(Sf,"contentLengthMiddleware");var kb={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},n$=Db(e=>({applyToStack:t=>{t.add(Sf(e.bodyLengthChecker),kb)}}),"getContentLengthPlugin")});var Lo=w(Ld=>{"use strict";Object.defineProperty(Ld,"__esModule",{value:!0});Ld.getHomeDir=void 0;var o$=require("os"),s$=require("path"),Ef={},i$=()=>process&&process.geteuid?`${process.geteuid()}`:"DEFAULT",a$=()=>{let{HOME:e,USERPROFILE:t,HOMEPATH:r,HOMEDRIVE:n=`C:${s$.sep}`}=process.env;if(e)return e;if(t)return t;if(r)return`${n}${r}`;let o=i$();return Ef[o]||(Ef[o]=(0,o$.homedir)()),Ef[o]};Ld.getHomeDir=a$});var vf=w(jd=>{"use strict";Object.defineProperty(jd,"__esModule",{value:!0});jd.getSSOTokenFilepath=void 0;var c$=require("crypto"),d$=require("path"),u$=Lo(),l$=e=>{let r=(0,c$.createHash)("sha1").update(e).digest("hex");return(0,d$.join)((0,u$.getHomeDir)(),".aws","sso","cache",`${r}.json`)};jd.getSSOTokenFilepath=l$});var Ub=w(Bd=>{"use strict";Object.defineProperty(Bd,"__esModule",{value:!0});Bd.getSSOTokenFromFile=void 0;var p$=require("fs"),m$=vf(),{readFile:f$}=p$.promises,h$=async e=>{let t=(0,m$.getSSOTokenFilepath)(e),r=await f$(t,"utf8");return JSON.parse(r)};Bd.getSSOTokenFromFile=h$});var bf=w($d=>{"use strict";Object.defineProperty($d,"__esModule",{value:!0});$d.slurpFile=void 0;var g$=require("fs"),{readFile:y$}=g$.promises,wf={},_$=(e,t)=>((!wf[e]||t?.ignoreCache)&&(wf[e]=y$(e,"utf8")),wf[e]);$d.slurpFile=_$});var br=w((uee,na)=>{var zd=Object.defineProperty,S$=Object.getOwnPropertyDescriptor,E$=Object.getOwnPropertyNames,v$=Object.prototype.hasOwnProperty,Xe=(e,t)=>zd(e,"name",{value:t,configurable:!0}),w$=(e,t)=>{for(var r in t)zd(e,r,{get:t[r],enumerable:!0})},Cf=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of E$(t))!v$.call(e,o)&&o!==r&&zd(e,o,{get:()=>t[o],enumerable:!(n=S$(t,o))||n.enumerable});return e},xf=(e,t,r)=>(Cf(e,t,"default"),r&&Cf(r,t,"default")),b$=e=>Cf(zd({},"__esModule",{value:!0}),e),ra={};w$(ra,{CONFIG_PREFIX_SEPARATOR:()=>Sn,DEFAULT_PROFILE:()=>$b,ENV_PROFILE:()=>Bb,getProfileName:()=>C$,loadSharedConfigFiles:()=>qb,loadSsoSessionData:()=>U$,parseKnownFiles:()=>j$});na.exports=b$(ra);xf(ra,Lo(),na.exports);var Bb="AWS_PROFILE",$b="default",C$=Xe(e=>e.profile||process.env[Bb]||$b,"getProfileName");xf(ra,vf(),na.exports);xf(ra,Ub(),na.exports);var Hd=yt(),P$=Xe(e=>Object.entries(e).filter(([t])=>{let r=t.indexOf(Sn);return r===-1?!1:Object.values(Hd.IniSectionType).includes(t.substring(0,r))}).reduce((t,[r,n])=>{let o=r.indexOf(Sn),s=r.substring(0,o)===Hd.IniSectionType.PROFILE?r.substring(o+1):r;return t[s]=n,t},{...e.default&&{default:e.default}}),"getConfigData"),qd=require("path"),x$=Lo(),T$="AWS_CONFIG_FILE",Hb=Xe(()=>process.env[T$]||(0,qd.join)((0,x$.getHomeDir)(),".aws","config"),"getConfigFilepath"),R$=Lo(),A$="AWS_SHARED_CREDENTIALS_FILE",O$=Xe(()=>process.env[A$]||(0,qd.join)((0,R$.getHomeDir)(),".aws","credentials"),"getCredentialsFilepath"),I$=Lo(),N$=/^([\w-]+)\s(["'])?([\w-@\+\.%:/]+)\2$/,D$=["__proto__","profile __proto__"],Pf=Xe(e=>{let t={},r,n;for(let o of e.split(/\r?\n/)){let s=o.split(/(^|\s)[;#]/)[0].trim();if(s[0]==="["&&s[s.length-1]==="]"){r=void 0,n=void 0;let a=s.substring(1,s.length-1),c=N$.exec(a);if(c){let[,d,,l]=c;Object.values(Hd.IniSectionType).includes(d)&&(r=[d,l].join(Sn))}else r=a;if(D$.includes(a))throw new Error(`Found invalid profile name "${a}"`)}else if(r){let a=s.indexOf("=");if(![0,-1].includes(a)){let[c,d]=[s.substring(0,a).trim(),s.substring(a+1).trim()];if(d==="")n=c;else{n&&o.trimStart()===o&&(n=void 0),t[r]=t[r]||{};let l=n?[n,c].join(Sn):c;t[r][l]=d}}}}return t},"parseIni"),Lb=bf(),jb=Xe(()=>({}),"swallowError"),Sn=".",qb=Xe(async(e={})=>{let{filepath:t=O$(),configFilepath:r=Hb()}=e,n=(0,I$.getHomeDir)(),o="~/",s=t;t.startsWith(o)&&(s=(0,qd.join)(n,t.slice(2)));let i=r;r.startsWith(o)&&(i=(0,qd.join)(n,r.slice(2)));let a=await Promise.all([(0,Lb.slurpFile)(i,{ignoreCache:e.ignoreCache}).then(Pf).then(P$).catch(jb),(0,Lb.slurpFile)(s,{ignoreCache:e.ignoreCache}).then(Pf).catch(jb)]);return{configFile:a[0],credentialsFile:a[1]}},"loadSharedConfigFiles"),M$=Xe(e=>Object.entries(e).filter(([t])=>t.startsWith(Hd.IniSectionType.SSO_SESSION+Sn)).reduce((t,[r,n])=>({...t,[r.substring(r.indexOf(Sn)+1)]:n}),{}),"getSsoSessionData"),k$=bf(),F$=Xe(()=>({}),"swallowError"),U$=Xe(async(e={})=>(0,k$.slurpFile)(e.configFilepath??Hb()).then(Pf).then(M$).catch(F$),"loadSsoSessionData"),L$=Xe((...e)=>{let t={};for(let r of e)for(let[n,o]of Object.entries(r))t[n]!==void 0?Object.assign(t[n],o):t[n]=o;return t},"mergeConfigFiles"),j$=Xe(async e=>{let t=await qb(e);return L$(t.configFile,t.credentialsFile)},"parseKnownFiles")});var Cr=w((lee,Kb)=>{var Vd=Object.defineProperty,B$=Object.getOwnPropertyDescriptor,$$=Object.getOwnPropertyNames,H$=Object.prototype.hasOwnProperty,jo=(e,t)=>Vd(e,"name",{value:t,configurable:!0}),q$=(e,t)=>{for(var r in t)Vd(e,r,{get:t[r],enumerable:!0})},z$=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of $$(t))!H$.call(e,o)&&o!==r&&Vd(e,o,{get:()=>t[o],enumerable:!(n=B$(t,o))||n.enumerable});return e},V$=e=>z$(Vd({},"__esModule",{value:!0}),e),Vb={};q$(Vb,{loadConfig:()=>Y$});Kb.exports=V$(Vb);var oa=Ne();function Tf(e){try{let t=new Set(Array.from(e.match(/([A-Z_]){3,}/g)??[]));return t.delete("CONFIG"),t.delete("CONFIG_PREFIX_SEPARATOR"),t.delete("ENV"),[...t].join(", ")}catch{return e}}jo(Tf,"getSelectorName");var K$=jo((e,t)=>async()=>{try{let r=e(process.env,t);if(r===void 0)throw new Error;return r}catch(r){throw new oa.CredentialsProviderError(r.message||`Not found in ENV: ${Tf(e.toString())}`,{logger:t?.logger})}},"fromEnv"),zb=br(),G$=jo((e,{preferredFile:t="config",...r}={})=>async()=>{let n=(0,zb.getProfileName)(r),{configFile:o,credentialsFile:s}=await(0,zb.loadSharedConfigFiles)(r),i=s[n]||{},a=o[n]||{},c=t==="config"?{...i,...a}:{...a,...i};try{let l=e(c,t==="config"?o:s);if(l===void 0)throw new Error;return l}catch(d){throw new oa.CredentialsProviderError(d.message||`Not found in config files w/ profile [${n}]: ${Tf(e.toString())}`,{logger:r.logger})}},"fromSharedConfigFiles"),W$=jo(e=>typeof e=="function","isFunction"),J$=jo(e=>W$(e)?async()=>await e():(0,oa.fromStatic)(e),"fromStatic"),Y$=jo(({environmentVariableSelector:e,configFileSelector:t,default:r},n={})=>{let{signingName:o,logger:s}=n,i={signingName:o,logger:s};return(0,oa.memoize)((0,oa.chain)(K$(e,i),G$(t,n),J$(r)))},"loadConfig")});var Yb=w(Kd=>{"use strict";Object.defineProperty(Kd,"__esModule",{value:!0});Kd.getEndpointUrlConfig=void 0;var Gb=br(),Wb="AWS_ENDPOINT_URL",Jb="endpoint_url",X$=e=>({environmentVariableSelector:t=>{let r=e.split(" ").map(s=>s.toUpperCase()),n=t[[Wb,...r].join("_")];if(n)return n;let o=t[Wb];if(o)return o},configFileSelector:(t,r)=>{if(r&&t.services){let o=r[["services",t.services].join(Gb.CONFIG_PREFIX_SEPARATOR)];if(o){let s=e.split(" ").map(a=>a.toLowerCase()),i=o[[s.join("_"),Jb].join(Gb.CONFIG_PREFIX_SEPARATOR)];if(i)return i}}let n=t[Jb];if(n)return n},default:void 0});Kd.getEndpointUrlConfig=X$});var Rf=w(Gd=>{"use strict";Object.defineProperty(Gd,"__esModule",{value:!0});Gd.getEndpointFromConfig=void 0;var Q$=Cr(),Z$=Yb(),eH=async e=>(0,Q$.loadConfig)((0,Z$.getEndpointUrlConfig)(e??""))();Gd.getEndpointFromConfig=eH});var Pr=w((fee,nC)=>{var Jd=Object.defineProperty,tH=Object.getOwnPropertyDescriptor,rH=Object.getOwnPropertyNames,nH=Object.prototype.hasOwnProperty,Qe=(e,t)=>Jd(e,"name",{value:t,configurable:!0}),oH=(e,t)=>{for(var r in t)Jd(e,r,{get:t[r],enumerable:!0})},sH=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of rH(t))!nH.call(e,o)&&o!==r&&Jd(e,o,{get:()=>t[o],enumerable:!(n=tH(t,o))||n.enumerable});return e},iH=e=>sH(Jd({},"__esModule",{value:!0}),e),Qb={};oH(Qb,{endpointMiddleware:()=>tC,endpointMiddlewareOptions:()=>rC,getEndpointFromInstructions:()=>Zb,getEndpointPlugin:()=>yH,resolveEndpointConfig:()=>SH,resolveEndpointRequiredConfig:()=>EH,resolveParams:()=>eC,toEndpointV1:()=>Af});nC.exports=iH(Qb);var aH=Qe(async e=>{let t=e?.Bucket||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),pH(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!lH(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},"resolveParamsForS3"),cH=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,dH=/(\d+\.){3}\d+/,uH=/\.\./,lH=Qe(e=>cH.test(e)&&!dH.test(e)&&!uH.test(e),"isDnsCompatibleBucketName"),pH=Qe(e=>{let[t,r,n,,,o]=e.split(":"),s=t==="arn"&&e.split(":").length>=6,i=!!(s&&r&&n&&o);if(s&&!i)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return i},"isArnBucketName"),mH=Qe((e,t,r)=>{let n=Qe(async()=>{let o=r[e]??r[t];return typeof o=="function"?o():o},"configProvider");return e==="credentialScope"||t==="CredentialScope"?async()=>{let o=typeof r.credentials=="function"?await r.credentials():r.credentials;return o?.credentialScope??o?.CredentialScope}:e==="accountId"||t==="AccountId"?async()=>{let o=typeof r.credentials=="function"?await r.credentials():r.credentials;return o?.accountId??o?.AccountId}:e==="endpoint"||t==="endpoint"?async()=>{if(r.isCustomEndpoint===!1)return;let o=await n();if(o&&typeof o=="object"){if("url"in o)return o.url.href;if("hostname"in o){let{protocol:s,hostname:i,port:a,path:c}=o;return`${s}//${i}${a?":"+a:""}${c}`}}return o}:n},"createConfigValueProvider"),fH=Rf(),Xb=mr(),Af=Qe(e=>typeof e=="object"?"url"in e?(0,Xb.parseUrl)(e.url):e:(0,Xb.parseUrl)(e),"toEndpointV1"),Zb=Qe(async(e,t,r,n)=>{if(!r.isCustomEndpoint){let i;r.serviceConfiguredEndpoint?i=await r.serviceConfiguredEndpoint():i=await(0,fH.getEndpointFromConfig)(r.serviceId),i&&(r.endpoint=()=>Promise.resolve(Af(i)),r.isCustomEndpoint=!0)}let o=await eC(e,t,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(o,n)},"getEndpointFromInstructions"),eC=Qe(async(e,t,r)=>{let n={},o=t?.getEndpointParameterInstructions?.()||{};for(let[s,i]of Object.entries(o))switch(i.type){case"staticContextParams":n[s]=i.value;break;case"contextParams":n[s]=e[i.name];break;case"clientContextParams":case"builtInParams":n[s]=await mH(i.name,s,r)();break;case"operationContextParams":n[s]=i.get(e);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(i))}return Object.keys(o).length===0&&Object.assign(n,r),String(r.serviceId).toLowerCase()==="s3"&&await aH(n),n},"resolveParams"),hH=(Ue(),H(_o)),Wd=He(),tC=Qe(({config:e,instructions:t})=>(r,n)=>async o=>{e.isCustomEndpoint&&(0,hH.setFeature)(n,"ENDPOINT_OVERRIDE","N");let s=await Zb(o.input,{getEndpointParameterInstructions(){return t}},{...e},n);n.endpointV2=s,n.authSchemes=s.properties?.authSchemes;let i=n.authSchemes?.[0];if(i){n.signing_region=i.signingRegion,n.signing_service=i.signingName;let c=(0,Wd.getSmithyContext)(n)?.selectedHttpAuthScheme?.httpAuthOption;c&&(c.signingProperties=Object.assign(c.signingProperties||{},{signing_region:i.signingRegion,signingRegion:i.signingRegion,signing_service:i.signingName,signingName:i.signingName,signingRegionSet:i.signingRegionSet},i.properties))}return r({...o})},"endpointMiddleware"),gH=ar(),rC={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:gH.serializerMiddlewareOption.name},yH=Qe((e,t)=>({applyToStack:r=>{r.addRelativeTo(tC({config:e,instructions:t}),rC)}}),"getEndpointPlugin"),_H=Rf(),SH=Qe(e=>{let t=e.tls??!0,{endpoint:r,useDualstackEndpoint:n,useFipsEndpoint:o}=e,s=r!=null?async()=>Af(await(0,Wd.normalizeProvider)(r)()):void 0,a=Object.assign(e,{endpoint:s,tls:t,isCustomEndpoint:!!r,useDualstackEndpoint:(0,Wd.normalizeProvider)(n??!1),useFipsEndpoint:(0,Wd.normalizeProvider)(o??!1)}),c;return a.serviceConfiguredEndpoint=async()=>(e.serviceId&&!c&&(c=(0,_H.getEndpointFromConfig)(e.serviceId)),c),a},"resolveEndpointConfig"),EH=Qe(e=>{let{endpoint:t}=e;return t===void 0&&(e.endpoint=async()=>{throw new Error("@smithy/middleware-endpoint: (default endpointRuleSet) endpoint is not set - you must configure an endpoint.")}),e},"resolveEndpointRequiredConfig")});function sa(){return Yd>Xd.length-16&&(oC.default.randomFillSync(Xd),Yd=0),Xd.slice(Yd,Yd+=16)}var oC,Xd,Yd,Of=y(()=>{oC=v(require("crypto")),Xd=new Uint8Array(256),Yd=Xd.length});var sC,iC=y(()=>{sC=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function vH(e){return typeof e=="string"&&sC.test(e)}var xr,ia=y(()=>{iC();xr=vH});function En(e,t=0){return Pe[e[t+0]]+Pe[e[t+1]]+Pe[e[t+2]]+Pe[e[t+3]]+"-"+Pe[e[t+4]]+Pe[e[t+5]]+"-"+Pe[e[t+6]]+Pe[e[t+7]]+"-"+Pe[e[t+8]]+Pe[e[t+9]]+"-"+Pe[e[t+10]]+Pe[e[t+11]]+Pe[e[t+12]]+Pe[e[t+13]]+Pe[e[t+14]]+Pe[e[t+15]]}function wH(e,t=0){let r=En(e,t);if(!xr(r))throw TypeError("Stringified UUID is invalid");return r}var Pe,aC,aa=y(()=>{ia();Pe=[];for(let e=0;e<256;++e)Pe.push((e+256).toString(16).slice(1));aC=wH});function bH(e,t,r){let n=t&&r||0,o=t||new Array(16);e=e||{};let s=e.node||cC,i=e.clockseq!==void 0?e.clockseq:If;if(s==null||i==null){let p=e.random||(e.rng||sa)();s==null&&(s=cC=[p[0]|1,p[1],p[2],p[3],p[4],p[5]]),i==null&&(i=If=(p[6]<<8|p[7])&16383)}let a=e.msecs!==void 0?e.msecs:Date.now(),c=e.nsecs!==void 0?e.nsecs:Df+1,d=a-Nf+(c-Df)/1e4;if(d<0&&e.clockseq===void 0&&(i=i+1&16383),(d<0||a>Nf)&&e.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Nf=a,Df=c,If=i,a+=122192928e5;let l=((a&268435455)*1e4+c)%4294967296;o[n++]=l>>>24&255,o[n++]=l>>>16&255,o[n++]=l>>>8&255,o[n++]=l&255;let u=a/4294967296*1e4&268435455;o[n++]=u>>>8&255,o[n++]=u&255,o[n++]=u>>>24&15|16,o[n++]=u>>>16&255,o[n++]=i>>>8|128,o[n++]=i&255;for(let p=0;p<6;++p)o[n+p]=s[p];return t||En(o)}var cC,If,Nf,Df,dC,uC=y(()=>{Of();aa();Nf=0,Df=0;dC=bH});function CH(e){if(!xr(e))throw TypeError("Invalid UUID");let t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=t&255,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=t&255,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=t&255,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=t&255,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=t&255,r}var Qd,Mf=y(()=>{ia();Qd=CH});function PH(e){e=unescape(encodeURIComponent(e));let t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}function ca(e,t,r){function n(o,s,i,a){var c;if(typeof o=="string"&&(o=PH(o)),typeof s=="string"&&(s=Qd(s)),((c=s)===null||c===void 0?void 0:c.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let d=new Uint8Array(16+o.length);if(d.set(s),d.set(o,s.length),d=r(d),d[6]=d[6]&15|t,d[8]=d[8]&63|128,i){a=a||0;for(let l=0;l<16;++l)i[a+l]=d[l];return i}return En(d)}try{n.name=e}catch{}return n.DNS=xH,n.URL=TH,n}var xH,TH,kf=y(()=>{aa();Mf();xH="6ba7b810-9dad-11d1-80b4-00c04fd430c8",TH="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});function RH(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),lC.default.createHash("md5").update(e).digest()}var lC,pC,mC=y(()=>{lC=v(require("crypto"));pC=RH});var AH,fC,hC=y(()=>{kf();mC();AH=ca("v3",48,pC),fC=AH});var gC,Ff,yC=y(()=>{gC=v(require("crypto")),Ff={randomUUID:gC.default.randomUUID}});function OH(e,t,r){if(Ff.randomUUID&&!t&&!e)return Ff.randomUUID();e=e||{};let n=e.random||(e.rng||sa)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let o=0;o<16;++o)t[r+o]=n[o];return t}return En(n)}var _C,SC=y(()=>{yC();Of();aa();_C=OH});function IH(e){return Array.isArray(e)?e=Buffer.from(e):typeof e=="string"&&(e=Buffer.from(e,"utf8")),EC.default.createHash("sha1").update(e).digest()}var EC,vC,wC=y(()=>{EC=v(require("crypto"));vC=IH});var NH,bC,CC=y(()=>{kf();wC();NH=ca("v5",80,vC),bC=NH});var PC,xC=y(()=>{PC="00000000-0000-0000-0000-000000000000"});function DH(e){if(!xr(e))throw TypeError("Invalid UUID");return parseInt(e.slice(14,15),16)}var TC,RC=y(()=>{ia();TC=DH});var AC={};ct(AC,{NIL:()=>PC,parse:()=>Qd,stringify:()=>aC,v1:()=>dC,v3:()=>fC,v4:()=>_C,v5:()=>bC,validate:()=>xr,version:()=>TC});var OC=y(()=>{uC();hC();SC();CC();xC();RC();ia();aa();Mf()});var Lf=w((ete,MC)=>{var Zd=Object.defineProperty,MH=Object.getOwnPropertyDescriptor,kH=Object.getOwnPropertyNames,FH=Object.prototype.hasOwnProperty,vn=(e,t)=>Zd(e,"name",{value:t,configurable:!0}),UH=(e,t)=>{for(var r in t)Zd(e,r,{get:t[r],enumerable:!0})},LH=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of kH(t))!FH.call(e,o)&&o!==r&&Zd(e,o,{get:()=>t[o],enumerable:!(n=MH(t,o))||n.enumerable});return e},jH=e=>LH(Zd({},"__esModule",{value:!0}),e),IC={};UH(IC,{isBrowserNetworkError:()=>DC,isClockSkewCorrectedError:()=>NC,isClockSkewError:()=>GH,isRetryableByTrait:()=>KH,isServerError:()=>JH,isThrottlingError:()=>WH,isTransientError:()=>Uf});MC.exports=jH(IC);var BH=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch"],$H=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],HH=["TimeoutError","RequestTimeout","RequestTimeoutException"],qH=[500,502,503,504],zH=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],VH=["EHOSTUNREACH","ENETUNREACH","ENOTFOUND"],KH=vn(e=>e.$retryable!==void 0,"isRetryableByTrait"),GH=vn(e=>BH.includes(e.name),"isClockSkewError"),NC=vn(e=>e.$metadata?.clockSkewCorrected,"isClockSkewCorrectedError"),DC=vn(e=>{let t=new Set(["Failed to fetch","NetworkError when attempting to fetch resource","The Internet connection appears to be offline","Load failed","Network request failed"]);return e&&e instanceof TypeError?t.has(e.message):!1},"isBrowserNetworkError"),WH=vn(e=>e.$metadata?.httpStatusCode===429||$H.includes(e.name)||e.$retryable?.throttling==!0,"isThrottlingError"),Uf=vn((e,t=0)=>NC(e)||HH.includes(e.name)||zH.includes(e?.code||"")||VH.includes(e?.code||"")||qH.includes(e.$metadata?.httpStatusCode||0)||DC(e)||e.cause!==void 0&&t<=10&&Uf(e.cause,t+1),"isTransientError"),JH=vn(e=>{if(e.$metadata?.httpStatusCode!==void 0){let t=e.$metadata.httpStatusCode;return 500<=t&&t<=599&&!Uf(e)}return!1},"isServerError")});var qo=w((tte,qC)=>{var eu=Object.defineProperty,YH=Object.getOwnPropertyDescriptor,XH=Object.getOwnPropertyNames,QH=Object.prototype.hasOwnProperty,ft=(e,t)=>eu(e,"name",{value:t,configurable:!0}),ZH=(e,t)=>{for(var r in t)eu(e,r,{get:t[r],enumerable:!0})},eq=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of XH(t))!QH.call(e,o)&&o!==r&&eu(e,o,{get:()=>t[o],enumerable:!(n=YH(t,o))||n.enumerable});return e},tq=e=>eq(eu({},"__esModule",{value:!0}),e),FC={};ZH(FC,{AdaptiveRetryStrategy:()=>aq,ConfiguredRetryStrategy:()=>cq,DEFAULT_MAX_ATTEMPTS:()=>jf,DEFAULT_RETRY_DELAY_BASE:()=>da,DEFAULT_RETRY_MODE:()=>rq,DefaultRateLimiter:()=>LC,INITIAL_RETRY_TOKENS:()=>Bf,INVOCATION_ID_HEADER:()=>oq,MAXIMUM_RETRY_DELAY:()=>$f,NO_RETRY_INCREMENT:()=>HC,REQUEST_HEADER:()=>sq,RETRY_COST:()=>BC,RETRY_MODES:()=>UC,StandardRetryStrategy:()=>Hf,THROTTLING_RETRY_DELAY_BASE:()=>jC,TIMEOUT_RETRY_COST:()=>$C});qC.exports=tq(FC);var UC=(e=>(e.STANDARD="standard",e.ADAPTIVE="adaptive",e))(UC||{}),jf=3,rq="standard",nq=Lf(),Tr,LC=(Tr=class{constructor(t){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=t?.beta??.7,this.minCapacity=t?.minCapacity??1,this.minFillRate=t?.minFillRate??.5,this.scaleConstant=t?.scaleConstant??.4,this.smooth=t?.smooth??.8;let r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){let r=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>Tr.setTimeoutFn(n,r))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){let t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}let r=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=t}updateClientSendingRate(t){let r;if(this.updateMeasuredRate(),(0,nq.isThrottlingError)(t)){let o=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=o,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(o),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let t=this.getCurrentTimeInSeconds(),r=Math.floor(t*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(t){return parseFloat(t.toFixed(8))}},ft(Tr,"DefaultRateLimiter"),Tr.setTimeoutFn=setTimeout,Tr),da=100,$f=20*1e3,jC=500,Bf=500,BC=5,$C=10,HC=1,oq="amz-sdk-invocation-id",sq="amz-sdk-request",iq=ft(()=>{let e=da;return{computeNextBackoffDelay:ft(n=>Math.floor(Math.min($f,Math.random()*2**n*e)),"computeNextBackoffDelay"),setDelayBase:ft(n=>{e=n},"setDelayBase")}},"getDefaultRetryBackoffStrategy"),kC=ft(({retryDelay:e,retryCount:t,retryCost:r})=>({getRetryCount:ft(()=>t,"getRetryCount"),getRetryDelay:ft(()=>Math.min($f,e),"getRetryDelay"),getRetryCost:ft(()=>r,"getRetryCost")}),"createDefaultRetryToken"),Bo,Hf=(Bo=class{constructor(t){this.maxAttempts=t,this.mode="standard",this.capacity=Bf,this.retryBackoffStrategy=iq(),this.maxAttemptsProvider=typeof t=="function"?t:async()=>t}async acquireInitialRetryToken(t){return kC({retryDelay:da,retryCount:0})}async refreshRetryTokenForRetry(t,r){let n=await this.getMaxAttempts();if(this.shouldRetry(t,r,n)){let o=r.errorType;this.retryBackoffStrategy.setDelayBase(o==="THROTTLING"?jC:da);let s=this.retryBackoffStrategy.computeNextBackoffDelay(t.getRetryCount()),i=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,s):s,a=this.getCapacityCost(o);return this.capacity-=a,kC({retryDelay:i,retryCount:t.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(t){this.capacity=Math.max(Bf,this.capacity+(t.getRetryCost()??HC))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${jf}`),jf}}shouldRetry(t,r,n){return t.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(t){return t==="TRANSIENT"?$C:BC}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}},ft(Bo,"StandardRetryStrategy"),Bo),$o,aq=($o=class{constructor(t,r){this.maxAttemptsProvider=t,this.mode="adaptive";let{rateLimiter:n}=r??{};this.rateLimiter=n??new LC,this.standardRetryStrategy=new Hf(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(t,r)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}},ft($o,"AdaptiveRetryStrategy"),$o),Ho,cq=(Ho=class extends Hf{constructor(t,r=da){super(typeof t=="function"?t:async()=>t),typeof r=="number"?this.computeNextBackoffDelay=()=>r:this.computeNextBackoffDelay=r}async refreshRetryTokenForRetry(t,r){let n=await super.refreshRetryTokenForRetry(t,r);return n.getRetryDelay=()=>this.computeNextBackoffDelay(n.getRetryCount()),n}},ft(Ho,"ConfiguredRetryStrategy"),Ho)});var zC=w(tu=>{"use strict";Object.defineProperty(tu,"__esModule",{value:!0});tu.isStreamingPayload=void 0;var dq=require("stream"),uq=e=>e?.body instanceof dq.Readable||typeof ReadableStream<"u"&&e?.body instanceof ReadableStream;tu.isStreamingPayload=uq});var Jt=w((nte,s0)=>{var ru=Object.defineProperty,lq=Object.getOwnPropertyDescriptor,pq=Object.getOwnPropertyNames,mq=Object.prototype.hasOwnProperty,fe=(e,t)=>ru(e,"name",{value:t,configurable:!0}),fq=(e,t)=>{for(var r in t)ru(e,r,{get:t[r],enumerable:!0})},hq=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of pq(t))!mq.call(e,o)&&o!==r&&ru(e,o,{get:()=>t[o],enumerable:!(n=lq(t,o))||n.enumerable});return e},gq=e=>hq(ru({},"__esModule",{value:!0}),e),KC={};fq(KC,{AdaptiveRetryStrategy:()=>Sq,CONFIG_MAX_ATTEMPTS:()=>zf,CONFIG_RETRY_MODE:()=>ZC,ENV_MAX_ATTEMPTS:()=>qf,ENV_RETRY_MODE:()=>QC,NODE_MAX_ATTEMPT_CONFIG_OPTIONS:()=>Eq,NODE_RETRY_MODE_CONFIG_OPTIONS:()=>wq,StandardRetryStrategy:()=>XC,defaultDelayDecider:()=>WC,defaultRetryDecider:()=>JC,getOmitRetryHeadersPlugin:()=>bq,getRetryAfterHint:()=>o0,getRetryPlugin:()=>Aq,omitRetryHeadersMiddleware:()=>e0,omitRetryHeadersMiddlewareOptions:()=>t0,resolveRetryConfig:()=>vq,retryMiddleware:()=>r0,retryMiddlewareOptions:()=>n0});s0.exports=gq(KC);var Ko=se(),GC=(OC(),H(AC)),de=qo(),yq=fe((e,t)=>{let r=e,n=t?.noRetryIncrement??de.NO_RETRY_INCREMENT,o=t?.retryCost??de.RETRY_COST,s=t?.timeoutRetryCost??de.TIMEOUT_RETRY_COST,i=e,a=fe(u=>u.name==="TimeoutError"?s:o,"getCapacityAmount"),c=fe(u=>a(u)<=i,"hasRetryTokens");return Object.freeze({hasRetryTokens:c,retrieveRetryTokens:fe(u=>{if(!c(u))throw new Error("No retry token available");let p=a(u);return i-=p,p},"retrieveRetryTokens"),releaseRetryTokens:fe(u=>{i+=u??n,i=Math.min(i,r)},"releaseRetryTokens")})},"getDefaultRetryQuota"),WC=fe((e,t)=>Math.floor(Math.min(de.MAXIMUM_RETRY_DELAY,Math.random()*2**t*e)),"defaultDelayDecider"),Rr=Lf(),JC=fe(e=>e?(0,Rr.isRetryableByTrait)(e)||(0,Rr.isClockSkewError)(e)||(0,Rr.isThrottlingError)(e)||(0,Rr.isTransientError)(e):!1,"defaultRetryDecider"),YC=fe(e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`),"asSdkError"),zo,XC=(zo=class{constructor(t,r){this.maxAttemptsProvider=t,this.mode=de.RETRY_MODES.STANDARD,this.retryDecider=r?.retryDecider??JC,this.delayDecider=r?.delayDecider??WC,this.retryQuota=r?.retryQuota??yq(de.INITIAL_RETRY_TOKENS)}shouldRetry(t,r,n){return r<n&&this.retryDecider(t)&&this.retryQuota.hasRetryTokens(t)}async getMaxAttempts(){let t;try{t=await this.maxAttemptsProvider()}catch{t=de.DEFAULT_MAX_ATTEMPTS}return t}async retry(t,r,n){let o,s=0,i=0,a=await this.getMaxAttempts(),{request:c}=r;for(Ko.HttpRequest.isInstance(c)&&(c.headers[de.INVOCATION_ID_HEADER]=(0,GC.v4)());;)try{Ko.HttpRequest.isInstance(c)&&(c.headers[de.REQUEST_HEADER]=`attempt=${s+1}; max=${a}`),n?.beforeRequest&&await n.beforeRequest();let{response:d,output:l}=await t(r);return n?.afterRequest&&n.afterRequest(d),this.retryQuota.releaseRetryTokens(o),l.$metadata.attempts=s+1,l.$metadata.totalRetryDelay=i,{response:d,output:l}}catch(d){let l=YC(d);if(s++,this.shouldRetry(l,s,a)){o=this.retryQuota.retrieveRetryTokens(l);let u=this.delayDecider((0,Rr.isThrottlingError)(l)?de.THROTTLING_RETRY_DELAY_BASE:de.DEFAULT_RETRY_DELAY_BASE,s),p=_q(l.$response),h=Math.max(p||0,u);i+=h,await new Promise(g=>setTimeout(g,h));continue}throw l.$metadata||(l.$metadata={}),l.$metadata.attempts=s,l.$metadata.totalRetryDelay=i,l}}},fe(zo,"StandardRetryStrategy"),zo),_q=fe(e=>{if(!Ko.HttpResponse.isInstance(e))return;let t=Object.keys(e.headers).find(s=>s.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],n=Number(r);return Number.isNaN(n)?new Date(r).getTime()-Date.now():n*1e3},"getDelayFromRetryAfterHeader"),Vo,Sq=(Vo=class extends XC{constructor(t,r){let{rateLimiter:n,...o}=r??{};super(t,o),this.rateLimiter=n??new de.DefaultRateLimiter,this.mode=de.RETRY_MODES.ADAPTIVE}async retry(t,r){return super.retry(t,r,{beforeRequest:async()=>this.rateLimiter.getSendToken(),afterRequest:n=>{this.rateLimiter.updateClientSendingRate(n)}})}},fe(Vo,"AdaptiveRetryStrategy"),Vo),VC=He(),qf="AWS_MAX_ATTEMPTS",zf="max_attempts",Eq={environmentVariableSelector:e=>{let t=e[qf];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Environment variable ${qf} mast be a number, got "${t}"`);return r},configFileSelector:e=>{let t=e[zf];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Shared config file entry ${zf} mast be a number, got "${t}"`);return r},default:de.DEFAULT_MAX_ATTEMPTS},vq=fe(e=>{let{retryStrategy:t,retryMode:r,maxAttempts:n}=e,o=(0,VC.normalizeProvider)(n??de.DEFAULT_MAX_ATTEMPTS);return Object.assign(e,{maxAttempts:o,retryStrategy:async()=>t||(await(0,VC.normalizeProvider)(r)()===de.RETRY_MODES.ADAPTIVE?new de.AdaptiveRetryStrategy(o):new de.StandardRetryStrategy(o))})},"resolveRetryConfig"),QC="AWS_RETRY_MODE",ZC="retry_mode",wq={environmentVariableSelector:e=>e[QC],configFileSelector:e=>e[ZC],default:de.DEFAULT_RETRY_MODE},e0=fe(()=>e=>async t=>{let{request:r}=t;return Ko.HttpRequest.isInstance(r)&&(delete r.headers[de.INVOCATION_ID_HEADER],delete r.headers[de.REQUEST_HEADER]),e(t)},"omitRetryHeadersMiddleware"),t0={name:"omitRetryHeadersMiddleware",tags:["RETRY","HEADERS","OMIT_RETRY_HEADERS"],relation:"before",toMiddleware:"awsAuthMiddleware",override:!0},bq=fe(e=>({applyToStack:t=>{t.addRelativeTo(e0(),t0)}}),"getOmitRetryHeadersPlugin"),Cq=L(),Pq=zC(),r0=fe(e=>(t,r)=>async n=>{let o=await e.retryStrategy(),s=await e.maxAttempts();if(xq(o)){o=o;let i=await o.acquireInitialRetryToken(r.partition_id),a=new Error,c=0,d=0,{request:l}=n,u=Ko.HttpRequest.isInstance(l);for(u&&(l.headers[de.INVOCATION_ID_HEADER]=(0,GC.v4)());;)try{u&&(l.headers[de.REQUEST_HEADER]=`attempt=${c+1}; max=${s}`);let{response:p,output:h}=await t(n);return o.recordSuccess(i),h.$metadata.attempts=c+1,h.$metadata.totalRetryDelay=d,{response:p,output:h}}catch(p){let h=Tq(p);if(a=YC(p),u&&(0,Pq.isStreamingPayload)(l))throw(r.logger instanceof Cq.NoOpLogger?console:r.logger)?.warn("An error was encountered in a non-retryable streaming request."),a;try{i=await o.refreshRetryTokenForRetry(i,h)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=c+1,a.$metadata.totalRetryDelay=d,a}c=i.getRetryCount();let g=i.getRetryDelay();d+=g,await new Promise(S=>setTimeout(S,g))}}else return o=o,o?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",o.mode]]),o.retry(t,n)},"retryMiddleware"),xq=fe(e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u","isRetryStrategyV2"),Tq=fe(e=>{let t={error:e,errorType:Rq(e)},r=o0(e.$response);return r&&(t.retryAfterHint=r),t},"getRetryErrorInfo"),Rq=fe(e=>(0,Rr.isThrottlingError)(e)?"THROTTLING":(0,Rr.isTransientError)(e)?"TRANSIENT":(0,Rr.isServerError)(e)?"SERVER_ERROR":"CLIENT_ERROR","getRetryErrorType"),n0={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},Aq=fe(e=>({applyToStack:t=>{t.add(r0(e),n0)}}),"getRetryPlugin"),o0=fe(e=>{if(!Ko.HttpResponse.isInstance(e))return;let t=Object.keys(e.headers).find(s=>s.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)},"getRetryAfterHint")});var Kf=w(Ar=>{"use strict";Object.defineProperty(Ar,"__esModule",{value:!0});Ar.resolveHttpAuthSchemeConfig=Ar.defaultKinesisHttpAuthSchemeProvider=Ar.defaultKinesisHttpAuthSchemeParametersProvider=void 0;var Oq=(Se(),H(Ct)),Vf=He(),Iq=async(e,t,r)=>({operation:(0,Vf.getSmithyContext)(t).operation,region:await(0,Vf.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});Ar.defaultKinesisHttpAuthSchemeParametersProvider=Iq;function Nq(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"kinesis",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}var Dq=e=>{let t=[];switch(e.operation){default:t.push(Nq(e))}return t};Ar.defaultKinesisHttpAuthSchemeProvider=Dq;var Mq=e=>{let t=(0,Oq.resolveAwsSdkSigV4Config)(e);return Object.assign(t,{authSchemePreference:(0,Vf.normalizeProvider)(e.authSchemePreference??[])})};Ar.resolveHttpAuthSchemeConfig=Mq});var Wo={};ct(Wo,{__addDisposableResource:()=>O0,__assign:()=>nu,__asyncDelegator:()=>w0,__asyncGenerator:()=>v0,__asyncValues:()=>b0,__await:()=>Go,__awaiter:()=>h0,__classPrivateFieldGet:()=>T0,__classPrivateFieldIn:()=>A0,__classPrivateFieldSet:()=>R0,__createBinding:()=>su,__decorate:()=>c0,__disposeResources:()=>I0,__esDecorate:()=>u0,__exportStar:()=>y0,__extends:()=>i0,__generator:()=>g0,__importDefault:()=>x0,__importStar:()=>P0,__makeTemplateObject:()=>C0,__metadata:()=>f0,__param:()=>d0,__propKey:()=>p0,__read:()=>Jf,__rest:()=>a0,__rewriteRelativeImportExtension:()=>N0,__runInitializers:()=>l0,__setFunctionName:()=>m0,__spread:()=>_0,__spreadArray:()=>E0,__spreadArrays:()=>S0,__values:()=>ou,default:()=>Uq});function i0(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");Gf(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function a0(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function c0(e,t,r,n){var o=arguments.length,s=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}function d0(e,t){return function(r,n){t(r,n,e)}}function u0(e,t,r,n,o,s){function i(b){if(b!==void 0&&typeof b!="function")throw new TypeError("Function expected");return b}for(var a=n.kind,c=a==="getter"?"get":a==="setter"?"set":"value",d=!t&&e?n.static?e:e.prototype:null,l=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),u,p=!1,h=r.length-1;h>=0;h--){var g={};for(var S in n)g[S]=S==="access"?{}:n[S];for(var S in n.access)g.access[S]=n.access[S];g.addInitializer=function(b){if(p)throw new TypeError("Cannot add initializers after decoration has completed");s.push(i(b||null))};var E=(0,r[h])(a==="accessor"?{get:l.get,set:l.set}:l[c],g);if(a==="accessor"){if(E===void 0)continue;if(E===null||typeof E!="object")throw new TypeError("Object expected");(u=i(E.get))&&(l.get=u),(u=i(E.set))&&(l.set=u),(u=i(E.init))&&o.unshift(u)}else(u=i(E))&&(a==="field"?o.unshift(u):l[c]=u)}d&&Object.defineProperty(d,n.name,l),p=!0}function l0(e,t,r){for(var n=arguments.length>2,o=0;o<t.length;o++)r=n?t[o].call(e,r):t[o].call(e);return n?r:void 0}function p0(e){return typeof e=="symbol"?e:"".concat(e)}function m0(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function f0(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function h0(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(u){i(u)}}function c(l){try{d(n.throw(l))}catch(u){i(u)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})}function g0(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,o,s,i=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return i.next=a(0),i.throw=a(1),i.return=a(2),typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(d){return function(l){return c([d,l])}}function c(d){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,d[0]&&(r=0)),r;)try{if(n=1,o&&(s=d[0]&2?o.return:d[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,d[1])).done)return s;switch(o=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,o=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(l){d=[6,l],o=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function y0(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&su(t,e,r)}function ou(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Jf(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,s=[],i;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)s.push(o.value)}catch(a){i={error:a}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return s}function _0(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Jf(arguments[t]));return e}function S0(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var s=arguments[t],i=0,a=s.length;i<a;i++,o++)n[o]=s[i];return n}function E0(e,t,r){if(r||arguments.length===2)for(var n=0,o=t.length,s;n<o;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))}function Go(e){return this instanceof Go?(this.v=e,this):new Go(e)}function v0(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),o,s=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",i),o[Symbol.asyncIterator]=function(){return this},o;function i(h){return function(g){return Promise.resolve(g).then(h,u)}}function a(h,g){n[h]&&(o[h]=function(S){return new Promise(function(E,b){s.push([h,S,E,b])>1||c(h,S)})},g&&(o[h]=g(o[h])))}function c(h,g){try{d(n[h](g))}catch(S){p(s[0][3],S)}}function d(h){h.value instanceof Go?Promise.resolve(h.value.v).then(l,u):p(s[0][2],h)}function l(h){c("next",h)}function u(h){c("throw",h)}function p(h,g){h(g),s.shift(),s.length&&c(s[0][0],s[0][1])}}function w0(e){var t,r;return t={},n("next"),n("throw",function(o){throw o}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(o,s){t[o]=e[o]?function(i){return(r=!r)?{value:Go(e[o](i)),done:!1}:s?s(i):i}:s}}function b0(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof ou=="function"?ou(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=e[s]&&function(i){return new Promise(function(a,c){i=e[s](i),o(a,c,i.done,i.value)})}}function o(s,i,a,c){Promise.resolve(c).then(function(d){s({value:d,done:a})},i)}}function C0(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function P0(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=Wf(e),n=0;n<r.length;n++)r[n]!=="default"&&su(t,e,r[n]);return kq(t,e),t}function x0(e){return e&&e.__esModule?e:{default:e}}function T0(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function R0(e,t,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,r):o?o.value=r:t.set(e,r),r}function A0(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function O0(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,o;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(o=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");o&&(n=function(){try{o.call(this)}catch(s){return Promise.reject(s)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}function I0(e){function t(s){e.error=e.hasError?new Fq(s,e.error,"An error was suppressed during disposal."):s,e.hasError=!0}var r,n=0;function o(){for(;r=e.stack.pop();)try{if(!r.async&&n===1)return n=0,e.stack.push(r),Promise.resolve().then(o);if(r.dispose){var s=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(s).then(o,function(i){return t(i),o()})}else n|=1}catch(i){t(i)}if(n===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return o()}function N0(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,o,s,i){return n?t?".jsx":".js":o&&(!s||!i)?r:o+s+"."+i.toLowerCase()+"js"}):e}var Gf,nu,su,kq,Wf,Fq,Uq,Jo=y(()=>{Gf=function(e,t){return Gf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(r[o]=n[o])},Gf(e,t)};nu=function(){return nu=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},nu.apply(this,arguments)};su=Object.create?function(e,t,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]};kq=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},Wf=function(e){return Wf=Object.getOwnPropertyNames||function(t){var r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[r.length]=n);return r},Wf(e)};Fq=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};Uq={__extends:i0,__assign:nu,__rest:a0,__decorate:c0,__param:d0,__esDecorate:u0,__runInitializers:l0,__propKey:p0,__setFunctionName:m0,__metadata:f0,__awaiter:h0,__generator:g0,__createBinding:su,__exportStar:y0,__values:ou,__read:Jf,__spread:_0,__spreadArrays:S0,__spreadArray:E0,__await:Go,__asyncGenerator:v0,__asyncDelegator:w0,__asyncValues:b0,__makeTemplateObject:C0,__importStar:P0,__importDefault:x0,__classPrivateFieldGet:T0,__classPrivateFieldSet:R0,__classPrivateFieldIn:A0,__addDisposableResource:O0,__disposeResources:I0,__rewriteRelativeImportExtension:N0}});var D0=w((ste,Lq)=>{Lq.exports={name:"@aws-sdk/client-kinesis",description:"AWS SDK for JavaScript Kinesis Client for Node.js, Browser and React Native",version:"3.846.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-kinesis","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo kinesis","test:e2e":"yarn g:vitest run -c vitest.config.e2e.ts --mode development","test:e2e:watch":"yarn g:vitest watch -c vitest.config.e2e.ts"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.846.0","@aws-sdk/credential-provider-node":"3.846.0","@aws-sdk/middleware-host-header":"3.840.0","@aws-sdk/middleware-logger":"3.840.0","@aws-sdk/middleware-recursion-detection":"3.840.0","@aws-sdk/middleware-user-agent":"3.846.0","@aws-sdk/region-config-resolver":"3.840.0","@aws-sdk/types":"3.840.0","@aws-sdk/util-endpoints":"3.845.0","@aws-sdk/util-user-agent-browser":"3.840.0","@aws-sdk/util-user-agent-node":"3.846.0","@smithy/config-resolver":"^4.1.4","@smithy/core":"^3.7.0","@smithy/eventstream-serde-browser":"^4.0.4","@smithy/eventstream-serde-config-resolver":"^4.1.2","@smithy/eventstream-serde-node":"^4.0.4","@smithy/fetch-http-handler":"^5.1.0","@smithy/hash-node":"^4.0.4","@smithy/invalid-dependency":"^4.0.4","@smithy/middleware-content-length":"^4.0.4","@smithy/middleware-endpoint":"^4.1.15","@smithy/middleware-retry":"^4.1.16","@smithy/middleware-serde":"^4.0.8","@smithy/middleware-stack":"^4.0.4","@smithy/node-config-provider":"^4.1.3","@smithy/node-http-handler":"^4.1.0","@smithy/protocol-http":"^5.1.2","@smithy/smithy-client":"^4.4.7","@smithy/types":"^4.3.1","@smithy/url-parser":"^4.0.4","@smithy/util-base64":"^4.0.0","@smithy/util-body-length-browser":"^4.0.0","@smithy/util-body-length-node":"^4.0.0","@smithy/util-defaults-mode-browser":"^4.0.23","@smithy/util-defaults-mode-node":"^4.0.23","@smithy/util-endpoints":"^3.0.6","@smithy/util-middleware":"^4.0.4","@smithy/util-retry":"^4.0.6","@smithy/util-utf8":"^4.0.0","@smithy/util-waiter":"^4.0.6",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-kinesis",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-kinesis"}}});var Yf=w((ite,$0)=>{"use strict";var iu=Object.defineProperty,jq=Object.getOwnPropertyDescriptor,Bq=Object.getOwnPropertyNames,$q=Object.prototype.hasOwnProperty,Hq=(e,t)=>iu(e,"name",{value:t,configurable:!0}),qq=(e,t)=>{for(var r in t)iu(e,r,{get:t[r],enumerable:!0})},zq=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Bq(t))!$q.call(e,o)&&o!==r&&iu(e,o,{get:()=>t[o],enumerable:!(n=jq(t,o))||n.enumerable});return e},Vq=e=>zq(iu({},"__esModule",{value:!0}),e),M0={};qq(M0,{ENV_ACCOUNT_ID:()=>B0,ENV_CREDENTIAL_SCOPE:()=>j0,ENV_EXPIRATION:()=>L0,ENV_KEY:()=>k0,ENV_SECRET:()=>F0,ENV_SESSION:()=>U0,fromEnv:()=>Wq});$0.exports=Vq(M0);var Kq=(pt(),H(gr)),Gq=Ne(),k0="AWS_ACCESS_KEY_ID",F0="AWS_SECRET_ACCESS_KEY",U0="AWS_SESSION_TOKEN",L0="AWS_CREDENTIAL_EXPIRATION",j0="AWS_CREDENTIAL_SCOPE",B0="AWS_ACCOUNT_ID",Wq=Hq(e=>async()=>{e?.logger?.debug("@aws-sdk/credential-provider-env - fromEnv");let t=process.env[k0],r=process.env[F0],n=process.env[U0],o=process.env[L0],s=process.env[j0],i=process.env[B0];if(t&&r){let a={accessKeyId:t,secretAccessKey:r,...n&&{sessionToken:n},...o&&{expiration:new Date(o)},...s&&{credentialScope:s},...i&&{accountId:i}};return(0,Kq.setCredentialFeature)(a,"CREDENTIALS_ENV_VARS","g"),a}throw new Gq.CredentialsProviderError("Unable to find environment variable credentials.",{logger:e?.logger})},"fromEnv")});var ua=w((ate,eP)=>{var du=Object.defineProperty,Jq=Object.getOwnPropertyDescriptor,Yq=Object.getOwnPropertyNames,Xq=Object.prototype.hasOwnProperty,he=(e,t)=>du(e,"name",{value:t,configurable:!0}),Qq=(e,t)=>{for(var r in t)du(e,r,{get:t[r],enumerable:!0})},Zq=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Yq(t))!Xq.call(e,o)&&o!==r&&du(e,o,{get:()=>t[o],enumerable:!(n=Jq(t,o))||n.enumerable});return e},e2=e=>Zq(du({},"__esModule",{value:!0}),e),V0={};Qq(V0,{DEFAULT_MAX_RETRIES:()=>J0,DEFAULT_TIMEOUT:()=>W0,ENV_CMDS_AUTH_TOKEN:()=>Zf,ENV_CMDS_FULL_URI:()=>au,ENV_CMDS_RELATIVE_URI:()=>cu,Endpoint:()=>Y0,fromContainerMetadata:()=>o2,fromInstanceMetadata:()=>P2,getInstanceMetadataEndpoint:()=>Q0,httpRequest:()=>Yo,providerConfigFromInit:()=>eh});eP.exports=e2(V0);var t2=require("url"),Tt=Ne(),r2=require("buffer"),n2=require("http");function Yo(e){return new Promise((t,r)=>{let n=(0,n2.request)({method:"GET",...e,hostname:e.hostname?.replace(/^\[(.+)\]$/,"$1")});n.on("error",o=>{r(Object.assign(new Tt.ProviderError("Unable to connect to instance metadata service"),o)),n.destroy()}),n.on("timeout",()=>{r(new Tt.ProviderError("TimeoutError from instance metadata service")),n.destroy()}),n.on("response",o=>{let{statusCode:s=400}=o;(s<200||300<=s)&&(r(Object.assign(new Tt.ProviderError("Error response received from instance metadata service"),{statusCode:s})),n.destroy());let i=[];o.on("data",a=>{i.push(a)}),o.on("end",()=>{t(r2.Buffer.concat(i)),n.destroy()})}),n.end()})}he(Yo,"httpRequest");var K0=he(e=>!!e&&typeof e=="object"&&typeof e.AccessKeyId=="string"&&typeof e.SecretAccessKey=="string"&&typeof e.Token=="string"&&typeof e.Expiration=="string","isImdsCredentials"),G0=he(e=>({accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration),...e.AccountId&&{accountId:e.AccountId}}),"fromImdsCredentials"),W0=1e3,J0=0,eh=he(({maxRetries:e=J0,timeout:t=W0})=>({maxRetries:e,timeout:t}),"providerConfigFromInit"),Qf=he((e,t)=>{let r=e();for(let n=0;n<t;n++)r=r.catch(e);return r},"retry"),au="AWS_CONTAINER_CREDENTIALS_FULL_URI",cu="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",Zf="AWS_CONTAINER_AUTHORIZATION_TOKEN",o2=he((e={})=>{let{timeout:t,maxRetries:r}=eh(e);return()=>Qf(async()=>{let n=await d2({logger:e.logger}),o=JSON.parse(await s2(t,n));if(!K0(o))throw new Tt.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:e.logger});return G0(o)},r)},"fromContainerMetadata"),s2=he(async(e,t)=>(process.env[Zf]&&(t.headers={...t.headers,Authorization:process.env[Zf]}),(await Yo({...t,timeout:e})).toString()),"requestFromEcsImds"),i2="169.254.170.2",a2={localhost:!0,"127.0.0.1":!0},c2={"http:":!0,"https:":!0},d2=he(async({logger:e})=>{if(process.env[cu])return{hostname:i2,path:process.env[cu]};if(process.env[au]){let t=(0,t2.parse)(process.env[au]);if(!t.hostname||!(t.hostname in a2))throw new Tt.CredentialsProviderError(`${t.hostname} is not a valid container metadata service hostname`,{tryNextLink:!1,logger:e});if(!t.protocol||!(t.protocol in c2))throw new Tt.CredentialsProviderError(`${t.protocol} is not a valid container metadata service protocol`,{tryNextLink:!1,logger:e});return{...t,port:t.port?parseInt(t.port,10):void 0}}throw new Tt.CredentialsProviderError(`The container metadata credential provider cannot be used unless the ${cu} or ${au} environment variable is set`,{tryNextLink:!1,logger:e})},"getCmdsUri"),wn,u2=(wn=class extends Tt.CredentialsProviderError{constructor(t,r=!0){super(t,r),this.tryNextLink=r,this.name="InstanceMetadataV1FallbackError",Object.setPrototypeOf(this,wn.prototype)}},he(wn,"InstanceMetadataV1FallbackError"),wn),th=Cr(),l2=mr(),Y0=(e=>(e.IPv4="http://169.254.169.254",e.IPv6="http://[fd00:ec2::254]",e))(Y0||{}),p2="AWS_EC2_METADATA_SERVICE_ENDPOINT",m2="ec2_metadata_service_endpoint",f2={environmentVariableSelector:e=>e[p2],configFileSelector:e=>e[m2],default:void 0},X0=(e=>(e.IPv4="IPv4",e.IPv6="IPv6",e))(X0||{}),h2="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",g2="ec2_metadata_service_endpoint_mode",y2={environmentVariableSelector:e=>e[h2],configFileSelector:e=>e[g2],default:"IPv4"},Q0=he(async()=>(0,l2.parseUrl)(await _2()||await S2()),"getInstanceMetadataEndpoint"),_2=he(async()=>(0,th.loadConfig)(f2)(),"getFromEndpointConfig"),S2=he(async()=>{let e=await(0,th.loadConfig)(y2)();switch(e){case"IPv4":return"http://169.254.169.254";case"IPv6":return"http://[fd00:ec2::254]";default:throw new Error(`Unsupported endpoint mode: ${e}. Select from ${Object.values(X0)}`)}},"getFromEndpointModeConfig"),E2=5*60,v2=5*60,w2="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",H0=he((e,t)=>{let r=E2+Math.floor(Math.random()*v2),n=new Date(Date.now()+r*1e3);t.warn(`Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(n)}.
For more information, please visit: `+w2);let o=e.originalExpiration??e.expiration;return{...e,...o?{originalExpiration:o}:{},expiration:n}},"getExtendedInstanceMetadataCredentials"),b2=he((e,t={})=>{let r=t?.logger||console,n;return async()=>{let o;try{o=await e(),o.expiration&&o.expiration.getTime()<Date.now()&&(o=H0(o,r))}catch(s){if(n)r.warn("Credential renew failed: ",s),o=H0(n,r);else throw s}return n=o,o}},"staticStabilityProvider"),Z0="/latest/meta-data/iam/security-credentials/",C2="/latest/api/token",Xf="AWS_EC2_METADATA_V1_DISABLED",q0="ec2_metadata_v1_disabled",z0="x-aws-ec2-metadata-token",P2=he((e={})=>b2(x2(e),{logger:e.logger}),"fromInstanceMetadata"),x2=he((e={})=>{let t=!1,{logger:r,profile:n}=e,{timeout:o,maxRetries:s}=eh(e),i=he(async(a,c)=>{if(t||c.headers?.[z0]==null){let u=!1,p=!1,h=await(0,th.loadConfig)({environmentVariableSelector:g=>{let S=g[Xf];if(p=!!S&&S!=="false",S===void 0)throw new Tt.CredentialsProviderError(`${Xf} not set in env, checking config file next.`,{logger:e.logger});return p},configFileSelector:g=>{let S=g[q0];return u=!!S&&S!=="false",u},default:!1},{profile:n})();if(e.ec2MetadataV1Disabled||h){let g=[];throw e.ec2MetadataV1Disabled&&g.push("credential provider initialization (runtime option ec2MetadataV1Disabled)"),u&&g.push(`config file profile (${q0})`),p&&g.push(`process environment variable (${Xf})`),new u2(`AWS EC2 Metadata v1 fallback has been blocked by AWS SDK configuration in the following: [${g.join(", ")}].`)}}let l=(await Qf(async()=>{let u;try{u=await R2(c)}catch(p){throw p.statusCode===401&&(t=!1),p}return u},a)).trim();return Qf(async()=>{let u;try{u=await A2(l,c,e)}catch(p){throw p.statusCode===401&&(t=!1),p}return u},a)},"getCredentials");return async()=>{let a=await Q0();if(t)return r?.debug("AWS SDK Instance Metadata","using v1 fallback (no token fetch)"),i(s,{...a,timeout:o});{let c;try{c=(await T2({...a,timeout:o})).toString()}catch(d){if(d?.statusCode===400)throw Object.assign(d,{message:"EC2 Metadata token request returned error"});return(d.message==="TimeoutError"||[403,404,405].includes(d.statusCode))&&(t=!0),r?.debug("AWS SDK Instance Metadata","using v1 fallback (initial)"),i(s,{...a,timeout:o})}return i(s,{...a,headers:{[z0]:c},timeout:o})}}},"getInstanceMetadataProvider"),T2=he(async e=>Yo({...e,path:C2,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),"getMetadataToken"),R2=he(async e=>(await Yo({...e,path:Z0})).toString(),"getProfile"),A2=he(async(e,t,r)=>{let n=JSON.parse((await Yo({...t,path:Z0+e})).toString());if(!K0(n))throw new Tt.CredentialsProviderError("Invalid response received from instance metadata service.",{logger:r.logger});return G0(n)},"getCredentialsFromProfile")});var tP=w(uu=>{"use strict";Object.defineProperty(uu,"__esModule",{value:!0});uu.checkUrl=void 0;var O2=Ne(),I2="169.254.170.2",N2="169.254.170.23",D2="[fd00:ec2::23]",M2=(e,t)=>{if(e.protocol!=="https:"&&!(e.hostname===I2||e.hostname===N2||e.hostname===D2)){if(e.hostname.includes("[")){if(e.hostname==="[::1]"||e.hostname==="[0000:0000:0000:0000:0000:0000:0000:0001]")return}else{if(e.hostname==="localhost")return;let r=e.hostname.split("."),n=o=>{let s=parseInt(o,10);return 0<=s&&s<=255};if(r[0]==="127"&&n(r[1])&&n(r[2])&&n(r[3])&&r.length===4)return}throw new O2.CredentialsProviderError(`URL not accepted. It must either be HTTPS or match one of the following:
  - loopback CIDR 127.0.0.0/8 or [::1/128]
  - ECS container host 169.254.170.2
  - EKS container host 169.254.170.23 or [fd00:ec2::23]`,{logger:t})}};uu.checkUrl=M2});var rP=w(lu=>{"use strict";Object.defineProperty(lu,"__esModule",{value:!0});lu.createGetRequest=L2;lu.getCredentials=j2;var rh=Ne(),k2=se(),F2=L(),U2=Bc();function L2(e){return new k2.HttpRequest({protocol:e.protocol,hostname:e.hostname,port:Number(e.port),path:e.pathname,query:Array.from(e.searchParams.entries()).reduce((t,[r,n])=>(t[r]=n,t),{}),fragment:e.hash})}async function j2(e,t){let n=await(0,U2.sdkStreamMixin)(e.body).transformToString();if(e.statusCode===200){let o=JSON.parse(n);if(typeof o.AccessKeyId!="string"||typeof o.SecretAccessKey!="string"||typeof o.Token!="string"||typeof o.Expiration!="string")throw new rh.CredentialsProviderError("HTTP credential provider response not of the required format, an object matching: { AccessKeyId: string, SecretAccessKey: string, Token: string, Expiration: string(rfc3339) }",{logger:t});return{accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.Token,expiration:(0,F2.parseRfc3339DateTime)(o.Expiration)}}if(e.statusCode>=400&&e.statusCode<500){let o={};try{o=JSON.parse(n)}catch{}throw Object.assign(new rh.CredentialsProviderError(`Server responded with status: ${e.statusCode}`,{logger:t}),{Code:o.Code,Message:o.Message})}throw new rh.CredentialsProviderError(`Server responded with status: ${e.statusCode}`,{logger:t})}});var nP=w(pu=>{"use strict";Object.defineProperty(pu,"__esModule",{value:!0});pu.retryWrapper=void 0;var B2=(e,t,r)=>async()=>{for(let n=0;n<t;++n)try{return await e()}catch{await new Promise(s=>setTimeout(s,r))}return await e()};pu.retryWrapper=B2});var iP=w(mu=>{"use strict";Object.defineProperty(mu,"__esModule",{value:!0});mu.fromHttp=void 0;var $2=(Jo(),H(Wo)),H2=(pt(),H(gr)),q2=Kr(),oP=Ne(),z2=$2.__importDefault(require("fs/promises")),V2=tP(),sP=rP(),K2=nP(),G2="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",W2="http://169.254.170.2",J2="AWS_CONTAINER_CREDENTIALS_FULL_URI",Y2="AWS_CONTAINER_AUTHORIZATION_TOKEN_FILE",X2="AWS_CONTAINER_AUTHORIZATION_TOKEN",Q2=(e={})=>{e.logger?.debug("@aws-sdk/credential-provider-http - fromHttp");let t,r=e.awsContainerCredentialsRelativeUri??process.env[G2],n=e.awsContainerCredentialsFullUri??process.env[J2],o=e.awsContainerAuthorizationToken??process.env[X2],s=e.awsContainerAuthorizationTokenFile??process.env[Y2],i=e.logger?.constructor?.name==="NoOpLogger"||!e.logger?console.warn:e.logger.warn;if(r&&n&&(i("@aws-sdk/credential-provider-http: you have set both awsContainerCredentialsRelativeUri and awsContainerCredentialsFullUri."),i("awsContainerCredentialsFullUri will take precedence.")),o&&s&&(i("@aws-sdk/credential-provider-http: you have set both awsContainerAuthorizationToken and awsContainerAuthorizationTokenFile."),i("awsContainerAuthorizationToken will take precedence.")),n)t=n;else if(r)t=`${W2}${r}`;else throw new oP.CredentialsProviderError(`No HTTP credential provider host provided.
Set AWS_CONTAINER_CREDENTIALS_FULL_URI or AWS_CONTAINER_CREDENTIALS_RELATIVE_URI.`,{logger:e.logger});let a=new URL(t);(0,V2.checkUrl)(a,e.logger);let c=new q2.NodeHttpHandler({requestTimeout:e.timeout??1e3,connectionTimeout:e.timeout??1e3});return(0,K2.retryWrapper)(async()=>{let d=(0,sP.createGetRequest)(a);o?d.headers.Authorization=o:s&&(d.headers.Authorization=(await z2.default.readFile(s)).toString());try{let l=await c.handle(d);return(0,sP.getCredentials)(l.response).then(u=>(0,H2.setCredentialFeature)(u,"CREDENTIALS_HTTP","z"))}catch(l){throw new oP.CredentialsProviderError(String(l),{logger:e.logger})}},e.maxRetries??3,e.timeout??1e3)};mu.fromHttp=Q2});var nh=w(fu=>{"use strict";Object.defineProperty(fu,"__esModule",{value:!0});fu.fromHttp=void 0;var Z2=iP();Object.defineProperty(fu,"fromHttp",{enumerable:!0,get:function(){return Z2.fromHttp}})});var sh=w(Or=>{"use strict";Object.defineProperty(Or,"__esModule",{value:!0});Or.resolveHttpAuthSchemeConfig=Or.defaultSSOHttpAuthSchemeProvider=Or.defaultSSOHttpAuthSchemeParametersProvider=void 0;var ez=(Se(),H(Ct)),oh=He(),tz=async(e,t,r)=>({operation:(0,oh.getSmithyContext)(t).operation,region:await(0,oh.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});Or.defaultSSOHttpAuthSchemeParametersProvider=tz;function rz(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"awsssoportal",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function hu(e){return{schemeId:"smithy.api#noAuth"}}var nz=e=>{let t=[];switch(e.operation){case"GetRoleCredentials":{t.push(hu(e));break}case"ListAccountRoles":{t.push(hu(e));break}case"ListAccounts":{t.push(hu(e));break}case"Logout":{t.push(hu(e));break}default:t.push(rz(e))}return t};Or.defaultSSOHttpAuthSchemeProvider=nz;var oz=e=>{let t=(0,ez.resolveAwsSdkSigV4Config)(e);return Object.assign(t,{authSchemePreference:(0,oh.normalizeProvider)(e.authSchemePreference??[])})};Or.resolveHttpAuthSchemeConfig=oz});var aP=w((fte,sz)=>{sz.exports={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.846.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline client-sso","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.846.0","@aws-sdk/middleware-host-header":"3.840.0","@aws-sdk/middleware-logger":"3.840.0","@aws-sdk/middleware-recursion-detection":"3.840.0","@aws-sdk/middleware-user-agent":"3.846.0","@aws-sdk/region-config-resolver":"3.840.0","@aws-sdk/types":"3.840.0","@aws-sdk/util-endpoints":"3.845.0","@aws-sdk/util-user-agent-browser":"3.840.0","@aws-sdk/util-user-agent-node":"3.846.0","@smithy/config-resolver":"^4.1.4","@smithy/core":"^3.7.0","@smithy/fetch-http-handler":"^5.1.0","@smithy/hash-node":"^4.0.4","@smithy/invalid-dependency":"^4.0.4","@smithy/middleware-content-length":"^4.0.4","@smithy/middleware-endpoint":"^4.1.15","@smithy/middleware-retry":"^4.1.16","@smithy/middleware-serde":"^4.0.8","@smithy/middleware-stack":"^4.0.4","@smithy/node-config-provider":"^4.1.3","@smithy/node-http-handler":"^4.1.0","@smithy/protocol-http":"^5.1.2","@smithy/smithy-client":"^4.4.7","@smithy/types":"^4.3.1","@smithy/url-parser":"^4.0.4","@smithy/util-base64":"^4.0.0","@smithy/util-body-length-browser":"^4.0.0","@smithy/util-body-length-node":"^4.0.0","@smithy/util-defaults-mode-browser":"^4.0.23","@smithy/util-defaults-mode-node":"^4.0.23","@smithy/util-endpoints":"^3.0.6","@smithy/util-middleware":"^4.0.4","@smithy/util-retry":"^4.0.6","@smithy/util-utf8":"^4.0.0",tslib:"^2.6.2"},devDependencies:{"@tsconfig/node18":"18.2.4","@types/node":"^18.19.69",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},engines:{node:">=18.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}}});var la=w((hte,fP)=>{"use strict";var yu=Object.defineProperty,iz=Object.getOwnPropertyDescriptor,az=Object.getOwnPropertyNames,cz=Object.prototype.hasOwnProperty,gu=(e,t)=>yu(e,"name",{value:t,configurable:!0}),dz=(e,t)=>{for(var r in t)yu(e,r,{get:t[r],enumerable:!0})},uz=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of az(t))!cz.call(e,o)&&o!==r&&yu(e,o,{get:()=>t[o],enumerable:!(n=iz(t,o))||n.enumerable});return e},lz=e=>uz(yu({},"__esModule",{value:!0}),e),dP={};dz(dP,{NODE_APP_ID_CONFIG_OPTIONS:()=>gz,UA_APP_ID_ENV_NAME:()=>pP,UA_APP_ID_INI_NAME:()=>mP,createDefaultUserAgentProvider:()=>lP,crtAvailability:()=>uP,defaultUserAgent:()=>mz});fP.exports=lz(dP);var cP=require("os"),ih=require("process"),uP={isCrtAvailable:!1},pz=gu(()=>uP.isCrtAvailable?["md/crt-avail"]:null,"isCrtAvailable"),lP=gu(({serviceId:e,clientVersion:t})=>async r=>{let n=[["aws-sdk-js",t],["ua","2.1"],[`os/${(0,cP.platform)()}`,(0,cP.release)()],["lang/js"],["md/nodejs",`${ih.versions.node}`]],o=pz();o&&n.push(o),e&&n.push([`api/${e}`,t]),ih.env.AWS_EXECUTION_ENV&&n.push([`exec-env/${ih.env.AWS_EXECUTION_ENV}`]);let s=await r?.userAgentAppId?.();return s?[...n,[`app/${s}`]]:[...n]},"createDefaultUserAgentProvider"),mz=lP,fz=Uo(),pP="AWS_SDK_UA_APP_ID",mP="sdk_ua_app_id",hz="sdk-ua-app-id",gz={environmentVariableSelector:gu(e=>e[pP],"environmentVariableSelector"),configFileSelector:gu(e=>e[mP]??e[hz],"configFileSelector"),default:fz.DEFAULT_UA_APP_ID}});var pa=w((gte,_P)=>{var _u=Object.defineProperty,yz=Object.getOwnPropertyDescriptor,_z=Object.getOwnPropertyNames,Sz=Object.prototype.hasOwnProperty,gP=(e,t)=>_u(e,"name",{value:t,configurable:!0}),Ez=(e,t)=>{for(var r in t)_u(e,r,{get:t[r],enumerable:!0})},vz=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of _z(t))!Sz.call(e,o)&&o!==r&&_u(e,o,{get:()=>t[o],enumerable:!(n=yz(t,o))||n.enumerable});return e},wz=e=>vz(_u({},"__esModule",{value:!0}),e),yP={};Ez(yP,{Hash:()=>Pz});_P.exports=wz(yP);var ah=co(),bz=we(),Cz=require("buffer"),hP=require("crypto"),Xo,Pz=(Xo=class{constructor(t,r){this.algorithmIdentifier=t,this.secret=r,this.reset()}update(t,r){this.hash.update((0,bz.toUint8Array)(ch(t,r)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?(0,hP.createHmac)(this.algorithmIdentifier,ch(this.secret)):(0,hP.createHash)(this.algorithmIdentifier)}},gP(Xo,"Hash"),Xo);function ch(e,t){return Cz.Buffer.isBuffer(e)?e:typeof e=="string"?(0,ah.fromString)(e,t):ArrayBuffer.isView(e)?(0,ah.fromArrayBuffer)(e.buffer,e.byteOffset,e.byteLength):(0,ah.fromArrayBuffer)(e)}gP(ch,"castSourceData")});var ma=w((yte,vP)=>{var Su=Object.defineProperty,xz=Object.getOwnPropertyDescriptor,Tz=Object.getOwnPropertyNames,Rz=Object.prototype.hasOwnProperty,Az=(e,t)=>Su(e,"name",{value:t,configurable:!0}),Oz=(e,t)=>{for(var r in t)Su(e,r,{get:t[r],enumerable:!0})},Iz=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Tz(t))!Rz.call(e,o)&&o!==r&&Su(e,o,{get:()=>t[o],enumerable:!(n=xz(t,o))||n.enumerable});return e},Nz=e=>Iz(Su({},"__esModule",{value:!0}),e),EP={};Oz(EP,{calculateBodyLength:()=>Dz});vP.exports=Nz(EP);var SP=require("fs"),Dz=Az(e=>{if(!e)return 0;if(typeof e=="string")return Buffer.byteLength(e);if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size;if(typeof e.start=="number"&&typeof e.end=="number")return e.end+1-e.start;if(typeof e.path=="string"||Buffer.isBuffer(e.path))return(0,SP.lstatSync)(e.path).size;if(typeof e.fd=="number")return(0,SP.fstatSync)(e.fd).size;throw new Error(`Body Length computation failed for ${e}`)},"calculateBodyLength")});var FP=w(Eu=>{"use strict";Object.defineProperty(Eu,"__esModule",{value:!0});Eu.ruleSet=void 0;var NP="required",et="fn",tt="argv",es="ref",wP=!0,bP="isSet",fa="booleanEquals",Qo="error",Zo="endpoint",Yt="tree",dh="PartitionResult",uh="getAttr",CP={[NP]:!1,type:"String"},PP={[NP]:!0,default:!1,type:"Boolean"},xP={[es]:"Endpoint"},DP={[et]:fa,[tt]:[{[es]:"UseFIPS"},!0]},MP={[et]:fa,[tt]:[{[es]:"UseDualStack"},!0]},Ze={},TP={[et]:uh,[tt]:[{[es]:dh},"supportsFIPS"]},kP={[es]:dh},RP={[et]:fa,[tt]:[!0,{[et]:uh,[tt]:[kP,"supportsDualStack"]}]},AP=[DP],OP=[MP],IP=[{[es]:"Region"}],Mz={version:"1.0",parameters:{Region:CP,UseDualStack:PP,UseFIPS:PP,Endpoint:CP},rules:[{conditions:[{[et]:bP,[tt]:[xP]}],rules:[{conditions:AP,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Qo},{conditions:OP,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Qo},{endpoint:{url:xP,properties:Ze,headers:Ze},type:Zo}],type:Yt},{conditions:[{[et]:bP,[tt]:IP}],rules:[{conditions:[{[et]:"aws.partition",[tt]:IP,assign:dh}],rules:[{conditions:[DP,MP],rules:[{conditions:[{[et]:fa,[tt]:[wP,TP]},RP],rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ze,headers:Ze},type:Zo}],type:Yt},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Qo}],type:Yt},{conditions:AP,rules:[{conditions:[{[et]:fa,[tt]:[TP,wP]}],rules:[{conditions:[{[et]:"stringEquals",[tt]:[{[et]:uh,[tt]:[kP,"name"]},"aws-us-gov"]}],endpoint:{url:"https://portal.sso.{Region}.amazonaws.com",properties:Ze,headers:Ze},type:Zo},{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Ze,headers:Ze},type:Zo}],type:Yt},{error:"FIPS is enabled but this partition does not support FIPS",type:Qo}],type:Yt},{conditions:OP,rules:[{conditions:[RP],rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ze,headers:Ze},type:Zo}],type:Yt},{error:"DualStack is enabled but this partition does not support DualStack",type:Qo}],type:Yt},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:Ze,headers:Ze},type:Zo}],type:Yt}],type:Yt},{error:"Invalid Configuration: Missing Region",type:Qo}]};Eu.ruleSet=Mz});var UP=w(vu=>{"use strict";Object.defineProperty(vu,"__esModule",{value:!0});vu.defaultEndpointResolver=void 0;var kz=wo(),lh=vo(),Fz=FP(),Uz=new lh.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),Lz=(e,t={})=>Uz.get(e,()=>(0,lh.resolveEndpoint)(Fz.ruleSet,{endpointParams:e,logger:t.logger}));vu.defaultEndpointResolver=Lz;lh.customEndpointFunctions.aws=kz.awsEndpointFunctions});var BP=w(wu=>{"use strict";Object.defineProperty(wu,"__esModule",{value:!0});wu.getRuntimeConfig=void 0;var jz=(Se(),H(Ct)),Bz=(Ue(),H(_o)),$z=L(),Hz=mr(),LP=Oe(),jP=we(),qz=sh(),zz=UP(),Vz=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??LP.fromBase64,base64Encoder:e?.base64Encoder??LP.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??zz.defaultEndpointResolver,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??qz.defaultSSOHttpAuthSchemeProvider,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new jz.AwsSdkSigV4Signer},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Bz.NoAuthSigner}],logger:e?.logger??new $z.NoOpLogger,serviceId:e?.serviceId??"SSO",urlParser:e?.urlParser??Hz.parseUrl,utf8Decoder:e?.utf8Decoder??jP.fromUtf8,utf8Encoder:e?.utf8Encoder??jP.toUtf8});wu.getRuntimeConfig=Vz});var ga=w((vte,KP)=>{var Kz=Object.create,ha=Object.defineProperty,Gz=Object.getOwnPropertyDescriptor,Wz=Object.getOwnPropertyNames,Jz=Object.getPrototypeOf,Yz=Object.prototype.hasOwnProperty,ph=(e,t)=>ha(e,"name",{value:t,configurable:!0}),Xz=(e,t)=>{for(var r in t)ha(e,r,{get:t[r],enumerable:!0})},zP=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Wz(t))!Yz.call(e,o)&&o!==r&&ha(e,o,{get:()=>t[o],enumerable:!(n=Gz(t,o))||n.enumerable});return e},Qz=(e,t,r)=>(r=e!=null?Kz(Jz(e)):{},zP(t||!e||!e.__esModule?ha(r,"default",{value:e,enumerable:!0}):r,e)),Zz=e=>zP(ha({},"__esModule",{value:!0}),e),VP={};Xz(VP,{resolveDefaultsModeConfig:()=>d3});KP.exports=Zz(VP);var e3=xt(),$P=Cr(),t3=Ne(),r3="AWS_EXECUTION_ENV",HP="AWS_REGION",qP="AWS_DEFAULT_REGION",n3="AWS_EC2_METADATA_DISABLED",o3=["in-region","cross-region","mobile","standard","legacy"],s3="/latest/meta-data/placement/region",i3="AWS_DEFAULTS_MODE",a3="defaults_mode",c3={environmentVariableSelector:e=>e[i3],configFileSelector:e=>e[a3],default:"legacy"},d3=ph(({region:e=(0,$P.loadConfig)(e3.NODE_REGION_CONFIG_OPTIONS),defaultsMode:t=(0,$P.loadConfig)(c3)}={})=>(0,t3.memoize)(async()=>{let r=typeof t=="function"?await t():t;switch(r?.toLowerCase()){case"auto":return u3(e);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${o3.join(", ")}, got ${r}`)}}),"resolveDefaultsModeConfig"),u3=ph(async e=>{if(e){let t=typeof e=="function"?await e():e,r=await l3();return r?t===r?"in-region":"cross-region":"standard"}return"standard"},"resolveNodeDefaultsModeAuto"),l3=ph(async()=>{if(process.env[r3]&&(process.env[HP]||process.env[qP]))return process.env[HP]??process.env[qP];if(!process.env[n3])try{let{getInstanceMetadataEndpoint:e,httpRequest:t}=await Promise.resolve().then(()=>Qz(ua())),r=await e();return(await t({...r,path:s3})).toString()}catch{}},"inferPhysicalRegion")});var XP=w(Cu=>{"use strict";Object.defineProperty(Cu,"__esModule",{value:!0});Cu.getRuntimeConfig=void 0;var p3=(Jo(),H(Wo)),m3=p3.__importDefault(aP()),GP=(Se(),H(Ct)),WP=la(),bu=xt(),f3=pa(),JP=Jt(),bn=Cr(),YP=Kr(),h3=ma(),g3=qo(),y3=BP(),_3=L(),S3=ga(),E3=L(),v3=e=>{(0,E3.emitWarningIfUnsupportedVersion)(process.version);let t=(0,S3.resolveDefaultsModeConfig)(e),r=()=>t().then(_3.loadConfigsForDefaultMode),n=(0,y3.getRuntimeConfig)(e);(0,GP.emitWarningIfUnsupportedVersion)(process.version);let o={profile:e?.profile,logger:n.logger};return{...n,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,bn.loadConfig)(GP.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,o),bodyLengthChecker:e?.bodyLengthChecker??h3.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,WP.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:m3.default.version}),maxAttempts:e?.maxAttempts??(0,bn.loadConfig)(JP.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,bn.loadConfig)(bu.NODE_REGION_CONFIG_OPTIONS,{...bu.NODE_REGION_CONFIG_FILE_OPTIONS,...o}),requestHandler:YP.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,bn.loadConfig)({...JP.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||g3.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??f3.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??YP.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,bn.loadConfig)(bu.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,o),useFipsEndpoint:e?.useFipsEndpoint??(0,bn.loadConfig)(bu.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,o),userAgentAppId:e?.userAgentAppId??(0,bn.loadConfig)(WP.NODE_APP_ID_CONFIG_OPTIONS,o)}};Cu.getRuntimeConfig=v3});var ya=w((bte,nx)=>{"use strict";var Pu=Object.defineProperty,w3=Object.getOwnPropertyDescriptor,b3=Object.getOwnPropertyNames,C3=Object.prototype.hasOwnProperty,Rt=(e,t)=>Pu(e,"name",{value:t,configurable:!0}),P3=(e,t)=>{for(var r in t)Pu(e,r,{get:t[r],enumerable:!0})},x3=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of b3(t))!C3.call(e,o)&&o!==r&&Pu(e,o,{get:()=>t[o],enumerable:!(n=w3(t,o))||n.enumerable});return e},T3=e=>x3(Pu({},"__esModule",{value:!0}),e),ZP={};P3(ZP,{NODE_REGION_CONFIG_FILE_OPTIONS:()=>I3,NODE_REGION_CONFIG_OPTIONS:()=>O3,REGION_ENV_NAME:()=>ex,REGION_INI_NAME:()=>tx,getAwsRegionExtensionConfiguration:()=>R3,resolveAwsRegionExtensionConfiguration:()=>A3,resolveRegionConfig:()=>N3});nx.exports=T3(ZP);var R3=Rt(e=>({setRegion(t){e.region=t},region(){return e.region}}),"getAwsRegionExtensionConfiguration"),A3=Rt(e=>({region:e.region()}),"resolveAwsRegionExtensionConfiguration"),ex="AWS_REGION",tx="region",O3={environmentVariableSelector:Rt(e=>e[ex],"environmentVariableSelector"),configFileSelector:Rt(e=>e[tx],"configFileSelector"),default:Rt(()=>{throw new Error("Region is missing")},"default")},I3={preferredFile:"credentials"},rx=Rt(e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips")),"isFipsRegion"),QP=Rt(e=>rx(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e,"getRealRegion"),N3=Rt(e=>{let{region:t,useFipsEndpoint:r}=e;if(!t)throw new Error("Region is missing");return Object.assign(e,{region:Rt(async()=>{if(typeof t=="string")return QP(t);let n=await t();return QP(n)},"region"),useFipsEndpoint:Rt(async()=>{let n=typeof t=="string"?t:await t();return rx(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()},"useFipsEndpoint")})},"resolveRegionConfig")});var Ix=w((Cte,Ox)=>{"use strict";var xu=Object.defineProperty,D3=Object.getOwnPropertyDescriptor,M3=Object.getOwnPropertyNames,k3=Object.prototype.hasOwnProperty,j=(e,t)=>xu(e,"name",{value:t,configurable:!0}),F3=(e,t)=>{for(var r in t)xu(e,r,{get:t[r],enumerable:!0})},U3=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of M3(t))!k3.call(e,o)&&o!==r&&xu(e,o,{get:()=>t[o],enumerable:!(n=D3(t,o))||n.enumerable});return e},L3=e=>U3(xu({},"__esModule",{value:!0}),e),ux={};F3(ux,{GetRoleCredentialsCommand:()=>Tx,GetRoleCredentialsRequestFilterSensitiveLog:()=>hx,GetRoleCredentialsResponseFilterSensitiveLog:()=>yx,InvalidRequestException:()=>lx,ListAccountRolesCommand:()=>mh,ListAccountRolesRequestFilterSensitiveLog:()=>_x,ListAccountsCommand:()=>fh,ListAccountsRequestFilterSensitiveLog:()=>Sx,LogoutCommand:()=>Rx,LogoutRequestFilterSensitiveLog:()=>Ex,ResourceNotFoundException:()=>px,RoleCredentialsFilterSensitiveLog:()=>gx,SSO:()=>Ax,SSOClient:()=>Ru,SSOServiceException:()=>as,TooManyRequestsException:()=>mx,UnauthorizedException:()=>fx,__Client:()=>T.Client,paginateListAccountRoles:()=>u4,paginateListAccounts:()=>l4});Ox.exports=L3(ux);var ox=_i(),j3=Si(),B3=Ei(),sx=Uo(),$3=xt(),Xt=(Ue(),H(_o)),H3=ta(),Sa=Pr(),ix=Jt(),ax=sh(),q3=j(e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"}),"resolveClientEndpointParameters"),Tu={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},z3=XP(),cx=ya(),dx=se(),T=L(),V3=j(e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(o){let s=t.findIndex(i=>i.schemeId===o.schemeId);s===-1?t.push(o):t.splice(s,1,o)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(o){r=o},httpAuthSchemeProvider(){return r},setCredentials(o){n=o},credentials(){return n}}},"getHttpAuthExtensionConfiguration"),K3=j(e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),"resolveHttpAuthRuntimeConfig"),G3=j((e,t)=>{let r=Object.assign((0,cx.getAwsRegionExtensionConfiguration)(e),(0,T.getDefaultExtensionConfiguration)(e),(0,dx.getHttpHandlerExtensionConfiguration)(e),V3(e));return t.forEach(n=>n.configure(r)),Object.assign(e,(0,cx.resolveAwsRegionExtensionConfiguration)(r),(0,T.resolveDefaultRuntimeConfig)(r),(0,dx.resolveHttpHandlerRuntimeConfig)(r),K3(r))},"resolveRuntimeExtensions"),ts,Ru=(ts=class extends T.Client{constructor(...[r]){let n=(0,z3.getRuntimeConfig)(r||{});super(n);_(this,"config");this.initConfig=n;let o=q3(n),s=(0,sx.resolveUserAgentConfig)(o),i=(0,ix.resolveRetryConfig)(s),a=(0,$3.resolveRegionConfig)(i),c=(0,ox.resolveHostHeaderConfig)(a),d=(0,Sa.resolveEndpointConfig)(c),l=(0,ax.resolveHttpAuthSchemeConfig)(d),u=G3(l,r?.extensions||[]);this.config=u,this.middlewareStack.use((0,sx.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,ix.getRetryPlugin)(this.config)),this.middlewareStack.use((0,H3.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,ox.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,j3.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,B3.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use((0,Xt.getHttpAuthSchemeEndpointRuleSetPlugin)(this.config,{httpAuthSchemeParametersProvider:ax.defaultSSOHttpAuthSchemeParametersProvider,identityProviderConfigProvider:j(async p=>new Xt.DefaultIdentityProviderConfig({"aws.auth#sigv4":p.credentials}),"identityProviderConfigProvider")})),this.middlewareStack.use((0,Xt.getHttpSigningPlugin)(this.config))}destroy(){super.destroy()}},j(ts,"SSOClient"),ts),Au=ar(),Cn,as=(Cn=class extends T.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,Cn.prototype)}},j(Cn,"SSOServiceException"),Cn),Pn,lx=(Pn=class extends as{constructor(r){super({name:"InvalidRequestException",$fault:"client",...r});_(this,"name","InvalidRequestException");_(this,"$fault","client");Object.setPrototypeOf(this,Pn.prototype)}},j(Pn,"InvalidRequestException"),Pn),xn,px=(xn=class extends as{constructor(r){super({name:"ResourceNotFoundException",$fault:"client",...r});_(this,"name","ResourceNotFoundException");_(this,"$fault","client");Object.setPrototypeOf(this,xn.prototype)}},j(xn,"ResourceNotFoundException"),xn),Tn,mx=(Tn=class extends as{constructor(r){super({name:"TooManyRequestsException",$fault:"client",...r});_(this,"name","TooManyRequestsException");_(this,"$fault","client");Object.setPrototypeOf(this,Tn.prototype)}},j(Tn,"TooManyRequestsException"),Tn),Rn,fx=(Rn=class extends as{constructor(r){super({name:"UnauthorizedException",$fault:"client",...r});_(this,"name","UnauthorizedException");_(this,"$fault","client");Object.setPrototypeOf(this,Rn.prototype)}},j(Rn,"UnauthorizedException"),Rn),hx=j(e=>({...e,...e.accessToken&&{accessToken:T.SENSITIVE_STRING}}),"GetRoleCredentialsRequestFilterSensitiveLog"),gx=j(e=>({...e,...e.secretAccessKey&&{secretAccessKey:T.SENSITIVE_STRING},...e.sessionToken&&{sessionToken:T.SENSITIVE_STRING}}),"RoleCredentialsFilterSensitiveLog"),yx=j(e=>({...e,...e.roleCredentials&&{roleCredentials:gx(e.roleCredentials)}}),"GetRoleCredentialsResponseFilterSensitiveLog"),_x=j(e=>({...e,...e.accessToken&&{accessToken:T.SENSITIVE_STRING}}),"ListAccountRolesRequestFilterSensitiveLog"),Sx=j(e=>({...e,...e.accessToken&&{accessToken:T.SENSITIVE_STRING}}),"ListAccountsRequestFilterSensitiveLog"),Ex=j(e=>({...e,...e.accessToken&&{accessToken:T.SENSITIVE_STRING}}),"LogoutRequestFilterSensitiveLog"),_a=(Se(),H(Ct)),W3=j(async(e,t)=>{let r=(0,Xt.requestBuilder)(e,t),n=(0,T.map)({},T.isSerializableHeaderValue,{[Nu]:e[Iu]});r.bp("/federation/credentials");let o=(0,T.map)({[c4]:[,(0,T.expectNonNull)(e[a4],"roleName")],[wx]:[,(0,T.expectNonNull)(e[vx],"accountId")]});return r.m("GET").h(n).q(o).b(void 0),r.build()},"se_GetRoleCredentialsCommand"),J3=j(async(e,t)=>{let r=(0,Xt.requestBuilder)(e,t),n=(0,T.map)({},T.isSerializableHeaderValue,{[Nu]:e[Iu]});r.bp("/assignment/roles");let o=(0,T.map)({[xx]:[,e[Px]],[Cx]:[()=>e.maxResults!==void 0,()=>e[bx].toString()],[wx]:[,(0,T.expectNonNull)(e[vx],"accountId")]});return r.m("GET").h(n).q(o).b(void 0),r.build()},"se_ListAccountRolesCommand"),Y3=j(async(e,t)=>{let r=(0,Xt.requestBuilder)(e,t),n=(0,T.map)({},T.isSerializableHeaderValue,{[Nu]:e[Iu]});r.bp("/assignment/accounts");let o=(0,T.map)({[xx]:[,e[Px]],[Cx]:[()=>e.maxResults!==void 0,()=>e[bx].toString()]});return r.m("GET").h(n).q(o).b(void 0),r.build()},"se_ListAccountsCommand"),X3=j(async(e,t)=>{let r=(0,Xt.requestBuilder)(e,t),n=(0,T.map)({},T.isSerializableHeaderValue,{[Nu]:e[Iu]});return r.bp("/logout"),r.m("POST").h(n).b(void 0),r.build()},"se_LogoutCommand"),Q3=j(async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Ou(e,t);let r=(0,T.map)({$metadata:Ir(e)}),n=(0,T.expectNonNull)((0,T.expectObject)(await(0,_a.parseJsonBody)(e.body,t)),"body"),o=(0,T.take)(n,{roleCredentials:T._json});return Object.assign(r,o),r},"de_GetRoleCredentialsCommand"),Z3=j(async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Ou(e,t);let r=(0,T.map)({$metadata:Ir(e)}),n=(0,T.expectNonNull)((0,T.expectObject)(await(0,_a.parseJsonBody)(e.body,t)),"body"),o=(0,T.take)(n,{nextToken:T.expectString,roleList:T._json});return Object.assign(r,o),r},"de_ListAccountRolesCommand"),e4=j(async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Ou(e,t);let r=(0,T.map)({$metadata:Ir(e)}),n=(0,T.expectNonNull)((0,T.expectObject)(await(0,_a.parseJsonBody)(e.body,t)),"body"),o=(0,T.take)(n,{accountList:T._json,nextToken:T.expectString});return Object.assign(r,o),r},"de_ListAccountsCommand"),t4=j(async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Ou(e,t);let r=(0,T.map)({$metadata:Ir(e)});return await(0,T.collectBody)(e.body,t),r},"de_LogoutCommand"),Ou=j(async(e,t)=>{let r={...e,body:await(0,_a.parseJsonErrorBody)(e.body,t)},n=(0,_a.loadRestJsonErrorCode)(e,r.body);switch(n){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await n4(r,t);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await o4(r,t);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await s4(r,t);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await i4(r,t);default:let o=r.body;return r4({output:e,parsedBody:o,errorCode:n})}},"de_CommandError"),r4=(0,T.withBaseException)(as),n4=j(async(e,t)=>{let r=(0,T.map)({}),n=e.body,o=(0,T.take)(n,{message:T.expectString});Object.assign(r,o);let s=new lx({$metadata:Ir(e),...r});return(0,T.decorateServiceException)(s,e.body)},"de_InvalidRequestExceptionRes"),o4=j(async(e,t)=>{let r=(0,T.map)({}),n=e.body,o=(0,T.take)(n,{message:T.expectString});Object.assign(r,o);let s=new px({$metadata:Ir(e),...r});return(0,T.decorateServiceException)(s,e.body)},"de_ResourceNotFoundExceptionRes"),s4=j(async(e,t)=>{let r=(0,T.map)({}),n=e.body,o=(0,T.take)(n,{message:T.expectString});Object.assign(r,o);let s=new mx({$metadata:Ir(e),...r});return(0,T.decorateServiceException)(s,e.body)},"de_TooManyRequestsExceptionRes"),i4=j(async(e,t)=>{let r=(0,T.map)({}),n=e.body,o=(0,T.take)(n,{message:T.expectString});Object.assign(r,o);let s=new fx({$metadata:Ir(e),...r});return(0,T.decorateServiceException)(s,e.body)},"de_UnauthorizedExceptionRes"),Ir=j(e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),"deserializeMetadata"),vx="accountId",Iu="accessToken",wx="account_id",bx="maxResults",Cx="max_result",Px="nextToken",xx="next_token",a4="roleName",c4="role_name",Nu="x-amz-sso_bearer_token",rs,Tx=(rs=class extends T.Command.classBuilder().ep(Tu).m(function(t,r,n,o){return[(0,Au.getSerdePlugin)(n,this.serialize,this.deserialize),(0,Sa.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("SWBPortalService","GetRoleCredentials",{}).n("SSOClient","GetRoleCredentialsCommand").f(hx,yx).ser(W3).de(Q3).build(){},j(rs,"GetRoleCredentialsCommand"),rs),ns,mh=(ns=class extends T.Command.classBuilder().ep(Tu).m(function(t,r,n,o){return[(0,Au.getSerdePlugin)(n,this.serialize,this.deserialize),(0,Sa.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccountRoles",{}).n("SSOClient","ListAccountRolesCommand").f(_x,void 0).ser(J3).de(Z3).build(){},j(ns,"ListAccountRolesCommand"),ns),os,fh=(os=class extends T.Command.classBuilder().ep(Tu).m(function(t,r,n,o){return[(0,Au.getSerdePlugin)(n,this.serialize,this.deserialize),(0,Sa.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("SWBPortalService","ListAccounts",{}).n("SSOClient","ListAccountsCommand").f(Sx,void 0).ser(Y3).de(e4).build(){},j(os,"ListAccountsCommand"),os),ss,Rx=(ss=class extends T.Command.classBuilder().ep(Tu).m(function(t,r,n,o){return[(0,Au.getSerdePlugin)(n,this.serialize,this.deserialize),(0,Sa.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("SWBPortalService","Logout",{}).n("SSOClient","LogoutCommand").f(Ex,void 0).ser(X3).de(t4).build(){},j(ss,"LogoutCommand"),ss),d4={GetRoleCredentialsCommand:Tx,ListAccountRolesCommand:mh,ListAccountsCommand:fh,LogoutCommand:Rx},is,Ax=(is=class extends Ru{},j(is,"SSO"),is);(0,T.createAggregatedClient)(d4,Ax);var u4=(0,Xt.createPaginator)(Ru,mh,"nextToken","nextToken","maxResults"),l4=(0,Xt.createPaginator)(Ru,fh,"nextToken","nextToken","maxResults")});function p4(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sso-oauth",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function m4(e){return{schemeId:"smithy.api#noAuth"}}var Ea,Nx,Dx,Mx,hh=y(()=>{Se();Ea=v(He()),Nx=async(e,t,r)=>({operation:(0,Ea.getSmithyContext)(t).operation,region:await(0,Ea.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});Dx=e=>{let t=[];switch(e.operation){case"CreateToken":{t.push(m4(e));break}default:t.push(p4(e))}return t},Mx=e=>{let t=ln(e);return Object.assign(t,{authSchemePreference:(0,Ea.normalizeProvider)(e.authSchemePreference??[])})}});var kx,Fx,gh=y(()=>{kx=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"sso-oauth"}),Fx={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var Du,yh=y(()=>{Du={name:"@aws-sdk/nested-clients",version:"3.846.0",description:"Nested clients for AWS SDK packages.",main:"./dist-cjs/index.js",module:"./dist-es/index.js",types:"./dist-types/index.d.ts",scripts:{build:"yarn lint && concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"node ../../scripts/compilation/inline nested-clients","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo",lint:"node ../../scripts/validation/submodules-linter.js --pkg nested-clients",test:"yarn g:vitest run","test:watch":"yarn g:vitest watch"},engines:{node:">=18.0.0"},author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",dependencies:{"@aws-crypto/sha256-browser":"5.2.0","@aws-crypto/sha256-js":"5.2.0","@aws-sdk/core":"3.846.0","@aws-sdk/middleware-host-header":"3.840.0","@aws-sdk/middleware-logger":"3.840.0","@aws-sdk/middleware-recursion-detection":"3.840.0","@aws-sdk/middleware-user-agent":"3.846.0","@aws-sdk/region-config-resolver":"3.840.0","@aws-sdk/types":"3.840.0","@aws-sdk/util-endpoints":"3.845.0","@aws-sdk/util-user-agent-browser":"3.840.0","@aws-sdk/util-user-agent-node":"3.846.0","@smithy/config-resolver":"^4.1.4","@smithy/core":"^3.7.0","@smithy/fetch-http-handler":"^5.1.0","@smithy/hash-node":"^4.0.4","@smithy/invalid-dependency":"^4.0.4","@smithy/middleware-content-length":"^4.0.4","@smithy/middleware-endpoint":"^4.1.15","@smithy/middleware-retry":"^4.1.16","@smithy/middleware-serde":"^4.0.8","@smithy/middleware-stack":"^4.0.4","@smithy/node-config-provider":"^4.1.3","@smithy/node-http-handler":"^4.1.0","@smithy/protocol-http":"^5.1.2","@smithy/smithy-client":"^4.4.7","@smithy/types":"^4.3.1","@smithy/url-parser":"^4.0.4","@smithy/util-base64":"^4.0.0","@smithy/util-body-length-browser":"^4.0.0","@smithy/util-body-length-node":"^4.0.0","@smithy/util-defaults-mode-browser":"^4.0.23","@smithy/util-defaults-mode-node":"^4.0.23","@smithy/util-endpoints":"^3.0.6","@smithy/util-middleware":"^4.0.4","@smithy/util-retry":"^4.0.6","@smithy/util-utf8":"^4.0.0",tslib:"^2.6.2"},devDependencies:{concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typescript:"~5.8.3"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["./sso-oidc.d.ts","./sso-oidc.js","./sts.d.ts","./sts.js","dist-*/**"],browser:{"./dist-es/submodules/sso-oidc/runtimeConfig":"./dist-es/submodules/sso-oidc/runtimeConfig.browser","./dist-es/submodules/sts/runtimeConfig":"./dist-es/submodules/sts/runtimeConfig.browser"},"react-native":{},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/packages/nested-clients",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"packages/nested-clients"},exports:{"./sso-oidc":{types:"./dist-types/submodules/sso-oidc/index.d.ts",module:"./dist-es/submodules/sso-oidc/index.js",node:"./dist-cjs/submodules/sso-oidc/index.js",import:"./dist-es/submodules/sso-oidc/index.js",require:"./dist-cjs/submodules/sso-oidc/index.js"},"./sts":{types:"./dist-types/submodules/sts/index.d.ts",module:"./dist-es/submodules/sts/index.js",node:"./dist-cjs/submodules/sts/index.js",import:"./dist-es/submodules/sts/index.js",require:"./dist-cjs/submodules/sts/index.js"}}}});var Kx,nt,ot,us,Ux,va,cs,ds,Qt,_h,Sh,Lx,jx,Bx,Gx,Wx,rt,$x,Jx,Hx,qx,zx,Vx,h4,Yx,Xx=y(()=>{Kx="required",nt="fn",ot="argv",us="ref",Ux="isSet",va="booleanEquals",cs="error",ds="endpoint",Qt="tree",_h="PartitionResult",Sh="getAttr",Lx={[Kx]:!1,type:"String"},jx={[Kx]:!0,default:!1,type:"Boolean"},Bx={[us]:"Endpoint"},Gx={[nt]:va,[ot]:[{[us]:"UseFIPS"},!0]},Wx={[nt]:va,[ot]:[{[us]:"UseDualStack"},!0]},rt={},$x={[nt]:Sh,[ot]:[{[us]:_h},"supportsFIPS"]},Jx={[us]:_h},Hx={[nt]:va,[ot]:[!0,{[nt]:Sh,[ot]:[Jx,"supportsDualStack"]}]},qx=[Gx],zx=[Wx],Vx=[{[us]:"Region"}],h4={version:"1.0",parameters:{Region:Lx,UseDualStack:jx,UseFIPS:jx,Endpoint:Lx},rules:[{conditions:[{[nt]:Ux,[ot]:[Bx]}],rules:[{conditions:qx,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:cs},{conditions:zx,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:cs},{endpoint:{url:Bx,properties:rt,headers:rt},type:ds}],type:Qt},{conditions:[{[nt]:Ux,[ot]:Vx}],rules:[{conditions:[{[nt]:"aws.partition",[ot]:Vx,assign:_h}],rules:[{conditions:[Gx,Wx],rules:[{conditions:[{[nt]:va,[ot]:[!0,$x]},Hx],rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:rt,headers:rt},type:ds}],type:Qt},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:cs}],type:Qt},{conditions:qx,rules:[{conditions:[{[nt]:va,[ot]:[$x,!0]}],rules:[{conditions:[{[nt]:"stringEquals",[ot]:[{[nt]:Sh,[ot]:[Jx,"name"]},"aws-us-gov"]}],endpoint:{url:"https://oidc.{Region}.amazonaws.com",properties:rt,headers:rt},type:ds},{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:rt,headers:rt},type:ds}],type:Qt},{error:"FIPS is enabled but this partition does not support FIPS",type:cs}],type:Qt},{conditions:zx,rules:[{conditions:[Hx],rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:rt,headers:rt},type:ds}],type:Qt},{error:"DualStack is enabled but this partition does not support DualStack",type:cs}],type:Qt},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:rt,headers:rt},type:ds}],type:Qt}],type:Qt},{error:"Invalid Configuration: Missing Region",type:cs}]},Yx=h4});var Qx,ls,g4,Zx,eT=y(()=>{Qx=v(wo()),ls=v(vo());Xx();g4=new ls.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS"]}),Zx=(e,t={})=>g4.get(e,()=>(0,ls.resolveEndpoint)(Yx,{endpointParams:e,logger:t.logger}));ls.customEndpointFunctions.aws=Qx.awsEndpointFunctions});var tT,rT,Mu,ku,nT,oT=y(()=>{Se();Ue();tT=v(L()),rT=v(mr()),Mu=v(Oe()),ku=v(we());hh();eT();nT=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??Mu.fromBase64,base64Encoder:e?.base64Encoder??Mu.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??Zx,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??Dx,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new je},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Vt}],logger:e?.logger??new tT.NoOpLogger,serviceId:e?.serviceId??"SSO OIDC",urlParser:e?.urlParser??rT.parseUrl,utf8Decoder:e?.utf8Decoder??ku.fromUtf8,utf8Encoder:e?.utf8Encoder??ku.toUtf8})});var Fu,Dr,sT,Uu,Nr,Lu,iT,aT,cT,dT,uT,lT,pT=y(()=>{yh();Se();Fu=v(la()),Dr=v(xt()),sT=v(pa()),Uu=v(Jt()),Nr=v(Cr()),Lu=v(Kr()),iT=v(ma()),aT=v(qo());oT();cT=v(L()),dT=v(ga()),uT=v(L()),lT=e=>{(0,uT.emitWarningIfUnsupportedVersion)(process.version);let t=(0,dT.resolveDefaultsModeConfig)(e),r=()=>t().then(cT.loadConfigsForDefaultMode),n=nT(e);bo(process.version);let o={profile:e?.profile,logger:n.logger};return{...n,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,Nr.loadConfig)(xo,o),bodyLengthChecker:e?.bodyLengthChecker??iT.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,Fu.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:Du.version}),maxAttempts:e?.maxAttempts??(0,Nr.loadConfig)(Uu.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,Nr.loadConfig)(Dr.NODE_REGION_CONFIG_OPTIONS,{...Dr.NODE_REGION_CONFIG_FILE_OPTIONS,...o}),requestHandler:Lu.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,Nr.loadConfig)({...Uu.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||aT.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??sT.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??Lu.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,Nr.loadConfig)(Dr.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,o),useFipsEndpoint:e?.useFipsEndpoint??(0,Nr.loadConfig)(Dr.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,o),userAgentAppId:e?.userAgentAppId??(0,Nr.loadConfig)(Fu.NODE_APP_ID_CONFIG_OPTIONS,o)}}});var mT,fT,hT=y(()=>{mT=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(o){let s=t.findIndex(i=>i.schemeId===o.schemeId);s===-1?t.push(o):t.splice(s,1,o)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(o){r=o},httpAuthSchemeProvider(){return r},setCredentials(o){n=o},credentials(){return n}}},fT=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})});var ju,Bu,$u,gT,yT=y(()=>{ju=v(ya()),Bu=v(se()),$u=v(L());hT();gT=(e,t)=>{let r=Object.assign((0,ju.getAwsRegionExtensionConfiguration)(e),(0,$u.getDefaultExtensionConfiguration)(e),(0,Bu.getHttpHandlerExtensionConfiguration)(e),mT(e));return t.forEach(n=>n.configure(r)),Object.assign(e,(0,ju.resolveAwsRegionExtensionConfiguration)(r),(0,$u.resolveDefaultRuntimeConfig)(r),(0,Bu.resolveHttpHandlerRuntimeConfig)(r),fT(r))}});var Hu,_T,ST,qu,ET,vT,wT,zu,Eh,wa,vh=y(()=>{Hu=v(_i()),_T=v(Si()),ST=v(Ei()),qu=v(Uo()),ET=v(xt());Ue();vT=v(ta()),wT=v(Pr()),zu=v(Jt()),Eh=v(L());hh();gh();pT();yT();wa=class extends Eh.Client{constructor(...[r]){let n=lT(r||{});super(n);_(this,"config");this.initConfig=n;let o=kx(n),s=(0,qu.resolveUserAgentConfig)(o),i=(0,zu.resolveRetryConfig)(s),a=(0,ET.resolveRegionConfig)(i),c=(0,Hu.resolveHostHeaderConfig)(a),d=(0,wT.resolveEndpointConfig)(c),l=Mx(d),u=gT(l,r?.extensions||[]);this.config=u,this.middlewareStack.use((0,qu.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,zu.getRetryPlugin)(this.config)),this.middlewareStack.use((0,vT.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,Hu.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,_T.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,ST.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(wi(this.config,{httpAuthSchemeParametersProvider:Nx,identityProviderConfigProvider:async p=>new on({"aws.auth#sigv4":p.credentials})})),this.middlewareStack.use(bi(this.config))}destroy(){super.destroy()}}});var bT,Ee,Vu=y(()=>{bT=v(L()),Ee=class e extends bT.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}});var An,ba,Ca,wh,bh,Pa,xa,Ta,Ra,Aa,Oa,Ia,Na,Da,Ku=y(()=>{An=v(L());Vu();ba=class e extends Ee{constructor(r){super({name:"AccessDeniedException",$fault:"client",...r});_(this,"name","AccessDeniedException");_(this,"$fault","client");_(this,"error");_(this,"error_description");Object.setPrototypeOf(this,e.prototype),this.error=r.error,this.error_description=r.error_description}},Ca=class e extends Ee{constructor(r){super({name:"AuthorizationPendingException",$fault:"client",...r});_(this,"name","AuthorizationPendingException");_(this,"$fault","client");_(this,"error");_(this,"error_description");Object.setPrototypeOf(this,e.prototype),this.error=r.error,this.error_description=r.error_description}},wh=e=>({...e,...e.clientSecret&&{clientSecret:An.SENSITIVE_STRING},...e.refreshToken&&{refreshToken:An.SENSITIVE_STRING},...e.codeVerifier&&{codeVerifier:An.SENSITIVE_STRING}}),bh=e=>({...e,...e.accessToken&&{accessToken:An.SENSITIVE_STRING},...e.refreshToken&&{refreshToken:An.SENSITIVE_STRING},...e.idToken&&{idToken:An.SENSITIVE_STRING}}),Pa=class e extends Ee{constructor(r){super({name:"ExpiredTokenException",$fault:"client",...r});_(this,"name","ExpiredTokenException");_(this,"$fault","client");_(this,"error");_(this,"error_description");Object.setPrototypeOf(this,e.prototype),this.error=r.error,this.error_description=r.error_description}},xa=class e extends Ee{constructor(r){super({name:"InternalServerException",$fault:"server",...r});_(this,"name","InternalServerException");_(this,"$fault","server");_(this,"error");_(this,"error_description");Object.setPrototypeOf(this,e.prototype),this.error=r.error,this.error_description=r.error_description}},Ta=class e extends Ee{constructor(r){super({name:"InvalidClientException",$fault:"client",...r});_(this,"name","InvalidClientException");_(this,"$fault","client");_(this,"error");_(this,"error_description");Object.setPrototypeOf(this,e.prototype),this.error=r.error,this.error_description=r.error_description}},Ra=class e extends Ee{constructor(r){super({name:"InvalidGrantException",$fault:"client",...r});_(this,"name","InvalidGrantException");_(this,"$fault","client");_(this,"error");_(this,"error_description");Object.setPrototypeOf(this,e.prototype),this.error=r.error,this.error_description=r.error_description}},Aa=class e extends Ee{constructor(r){super({name:"InvalidRequestException",$fault:"client",...r});_(this,"name","InvalidRequestException");_(this,"$fault","client");_(this,"error");_(this,"error_description");Object.setPrototypeOf(this,e.prototype),this.error=r.error,this.error_description=r.error_description}},Oa=class e extends Ee{constructor(r){super({name:"InvalidScopeException",$fault:"client",...r});_(this,"name","InvalidScopeException");_(this,"$fault","client");_(this,"error");_(this,"error_description");Object.setPrototypeOf(this,e.prototype),this.error=r.error,this.error_description=r.error_description}},Ia=class e extends Ee{constructor(r){super({name:"SlowDownException",$fault:"client",...r});_(this,"name","SlowDownException");_(this,"$fault","client");_(this,"error");_(this,"error_description");Object.setPrototypeOf(this,e.prototype),this.error=r.error,this.error_description=r.error_description}},Na=class e extends Ee{constructor(r){super({name:"UnauthorizedClientException",$fault:"client",...r});_(this,"name","UnauthorizedClientException");_(this,"$fault","client");_(this,"error");_(this,"error_description");Object.setPrototypeOf(this,e.prototype),this.error=r.error,this.error_description=r.error_description}},Da=class e extends Ee{constructor(r){super({name:"UnsupportedGrantTypeException",$fault:"client",...r});_(this,"name","UnsupportedGrantTypeException");_(this,"$fault","client");_(this,"error");_(this,"error_description");Object.setPrototypeOf(this,e.prototype),this.error=r.error,this.error_description=r.error_description}}});var P,CT,PT,y4,_4,S4,E4,v4,w4,b4,C4,P4,x4,T4,R4,A4,st,xT=y(()=>{Se();Ue();P=v(L());Ku();Vu();CT=async(e,t)=>{let r=ji(e,t),n={"content-type":"application/json"};r.bp("/token");let o;return o=JSON.stringify((0,P.take)(e,{clientId:[],clientSecret:[],code:[],codeVerifier:[],deviceCode:[],grantType:[],redirectUri:[],refreshToken:[],scope:s=>(0,P._json)(s)})),r.m("POST").h(n).b(o),r.build()},PT=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return y4(e,t);let r=(0,P.map)({$metadata:st(e)}),n=(0,P.expectNonNull)((0,P.expectObject)(await ko(e.body,t)),"body"),o=(0,P.take)(n,{accessToken:P.expectString,expiresIn:P.expectInt32,idToken:P.expectString,refreshToken:P.expectString,tokenType:P.expectString});return Object.assign(r,o),r},y4=async(e,t)=>{let r={...e,body:await Km(e.body,t)},n=mn(e,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await S4(r,t);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await E4(r,t);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await v4(r,t);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await w4(r,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await b4(r,t);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await C4(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await P4(r,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await x4(r,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await T4(r,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await R4(r,t);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await A4(r,t);default:let o=r.body;return _4({output:e,parsedBody:o,errorCode:n})}},_4=(0,P.withBaseException)(Ee),S4=async(e,t)=>{let r=(0,P.map)({}),n=e.body,o=(0,P.take)(n,{error:P.expectString,error_description:P.expectString});Object.assign(r,o);let s=new ba({$metadata:st(e),...r});return(0,P.decorateServiceException)(s,e.body)},E4=async(e,t)=>{let r=(0,P.map)({}),n=e.body,o=(0,P.take)(n,{error:P.expectString,error_description:P.expectString});Object.assign(r,o);let s=new Ca({$metadata:st(e),...r});return(0,P.decorateServiceException)(s,e.body)},v4=async(e,t)=>{let r=(0,P.map)({}),n=e.body,o=(0,P.take)(n,{error:P.expectString,error_description:P.expectString});Object.assign(r,o);let s=new Pa({$metadata:st(e),...r});return(0,P.decorateServiceException)(s,e.body)},w4=async(e,t)=>{let r=(0,P.map)({}),n=e.body,o=(0,P.take)(n,{error:P.expectString,error_description:P.expectString});Object.assign(r,o);let s=new xa({$metadata:st(e),...r});return(0,P.decorateServiceException)(s,e.body)},b4=async(e,t)=>{let r=(0,P.map)({}),n=e.body,o=(0,P.take)(n,{error:P.expectString,error_description:P.expectString});Object.assign(r,o);let s=new Ta({$metadata:st(e),...r});return(0,P.decorateServiceException)(s,e.body)},C4=async(e,t)=>{let r=(0,P.map)({}),n=e.body,o=(0,P.take)(n,{error:P.expectString,error_description:P.expectString});Object.assign(r,o);let s=new Ra({$metadata:st(e),...r});return(0,P.decorateServiceException)(s,e.body)},P4=async(e,t)=>{let r=(0,P.map)({}),n=e.body,o=(0,P.take)(n,{error:P.expectString,error_description:P.expectString});Object.assign(r,o);let s=new Aa({$metadata:st(e),...r});return(0,P.decorateServiceException)(s,e.body)},x4=async(e,t)=>{let r=(0,P.map)({}),n=e.body,o=(0,P.take)(n,{error:P.expectString,error_description:P.expectString});Object.assign(r,o);let s=new Oa({$metadata:st(e),...r});return(0,P.decorateServiceException)(s,e.body)},T4=async(e,t)=>{let r=(0,P.map)({}),n=e.body,o=(0,P.take)(n,{error:P.expectString,error_description:P.expectString});Object.assign(r,o);let s=new Ia({$metadata:st(e),...r});return(0,P.decorateServiceException)(s,e.body)},R4=async(e,t)=>{let r=(0,P.map)({}),n=e.body,o=(0,P.take)(n,{error:P.expectString,error_description:P.expectString});Object.assign(r,o);let s=new Na({$metadata:st(e),...r});return(0,P.decorateServiceException)(s,e.body)},A4=async(e,t)=>{let r=(0,P.map)({}),n=e.body,o=(0,P.take)(n,{error:P.expectString,error_description:P.expectString});Object.assign(r,o);let s=new Da({$metadata:st(e),...r});return(0,P.decorateServiceException)(s,e.body)},st=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]})});var TT,RT,Ch,Ma,Ph=y(()=>{TT=v(Pr()),RT=v(ar()),Ch=v(L());gh();Ku();xT();Ma=class extends Ch.Command.classBuilder().ep(Fx).m(function(t,r,n,o){return[(0,RT.getSerdePlugin)(n,this.serialize,this.deserialize),(0,TT.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AWSSSOOIDCService","CreateToken",{}).n("SSOOIDCClient","CreateTokenCommand").f(wh,bh).ser(CT).de(PT).build(){}});var AT,O4,Gu,OT=y(()=>{AT=v(L());Ph();vh();O4={CreateTokenCommand:Ma},Gu=class extends wa{};(0,AT.createAggregatedClient)(O4,Gu)});var IT=y(()=>{Ph()});var NT=y(()=>{Ku()});var xh={};ct(xh,{$Command:()=>Ch.Command,AccessDeniedException:()=>ba,AuthorizationPendingException:()=>Ca,CreateTokenCommand:()=>Ma,CreateTokenRequestFilterSensitiveLog:()=>wh,CreateTokenResponseFilterSensitiveLog:()=>bh,ExpiredTokenException:()=>Pa,InternalServerException:()=>xa,InvalidClientException:()=>Ta,InvalidGrantException:()=>Ra,InvalidRequestException:()=>Aa,InvalidScopeException:()=>Oa,SSOOIDC:()=>Gu,SSOOIDCClient:()=>wa,SSOOIDCServiceException:()=>Ee,SlowDownException:()=>Ia,UnauthorizedClientException:()=>Na,UnsupportedGrantTypeException:()=>Da,__Client:()=>Eh.Client});var Th=y(()=>{vh();OT();IT();NT();Vu()});var BT=w((bre,jT)=>{"use strict";var I4=Object.create,Fa=Object.defineProperty,N4=Object.getOwnPropertyDescriptor,D4=Object.getOwnPropertyNames,M4=Object.getPrototypeOf,k4=Object.prototype.hasOwnProperty,Zt=(e,t)=>Fa(e,"name",{value:t,configurable:!0}),F4=(e,t)=>{for(var r in t)Fa(e,r,{get:t[r],enumerable:!0})},kT=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of D4(t))!k4.call(e,o)&&o!==r&&Fa(e,o,{get:()=>t[o],enumerable:!(n=N4(t,o))||n.enumerable});return e},FT=(e,t,r)=>(r=e!=null?I4(M4(e)):{},kT(t||!e||!e.__esModule?Fa(r,"default",{value:e,enumerable:!0}):r,e)),U4=e=>kT(Fa({},"__esModule",{value:!0}),e),UT={};F4(UT,{fromEnvSigningName:()=>B4,fromSso:()=>LT,fromStatic:()=>G4,nodeProvider:()=>W4});jT.exports=U4(UT);var L4=(pt(),H(gr)),j4=(Fm(),H(zv)),ze=Ne(),B4=Zt(({logger:e,signingName:t}={})=>async()=>{if(e?.debug?.("@aws-sdk/token-providers - fromEnvSigningName"),!t)throw new ze.TokenProviderError("Please pass 'signingName' to compute environment variable key",{logger:e});let r=(0,j4.getBearerTokenEnvKey)(t);if(!(r in process.env))throw new ze.TokenProviderError(`Token not present in '${r}' environment variable`,{logger:e});let n={token:process.env[r]};return(0,L4.setTokenFeature)(n,"BEARER_SERVICE_ENV_VARS","3"),n},"fromEnvSigningName"),$4=5*60*1e3,Rh="To refresh this SSO session run 'aws sso login' with the corresponding profile.",H4=Zt(async(e,t={})=>{let{SSOOIDCClient:r}=await Promise.resolve().then(()=>FT((Th(),H(xh))));return new r(Object.assign({},t.clientConfig??{},{region:e??t.clientConfig?.region,logger:t.clientConfig?.logger??t.parentClientConfig?.logger}))},"getSsoOidcClient"),q4=Zt(async(e,t,r={})=>{let{CreateTokenCommand:n}=await Promise.resolve().then(()=>FT((Th(),H(xh))));return(await H4(t,r)).send(new n({clientId:e.clientId,clientSecret:e.clientSecret,refreshToken:e.refreshToken,grantType:"refresh_token"}))},"getNewSsoOidcToken"),DT=Zt(e=>{if(e.expiration&&e.expiration.getTime()<Date.now())throw new ze.TokenProviderError(`Token is expired. ${Rh}`,!1)},"validateTokenExpiry"),On=Zt((e,t,r=!1)=>{if(typeof t>"u")throw new ze.TokenProviderError(`Value not present for '${e}' in SSO Token${r?". Cannot refresh":""}. ${Rh}`,!1)},"validateTokenKey"),ka=br(),z4=require("fs"),{writeFile:V4}=z4.promises,K4=Zt((e,t)=>{let r=(0,ka.getSSOTokenFilepath)(e),n=JSON.stringify(t,null,2);return V4(r,n)},"writeSSOTokenToFile"),MT=new Date(0),LT=Zt((e={})=>async({callerClientConfig:t}={})=>{let r={...e,parentClientConfig:{...t,...e.parentClientConfig}};r.logger?.debug("@aws-sdk/token-providers - fromSso");let n=await(0,ka.parseKnownFiles)(r),o=(0,ka.getProfileName)({profile:r.profile??t?.profile}),s=n[o];if(s){if(!s.sso_session)throw new ze.TokenProviderError(`Profile '${o}' is missing required property 'sso_session'.`)}else throw new ze.TokenProviderError(`Profile '${o}' could not be found in shared credentials file.`,!1);let i=s.sso_session,c=(await(0,ka.loadSsoSessionData)(r))[i];if(!c)throw new ze.TokenProviderError(`Sso session '${i}' could not be found in shared credentials file.`,!1);for(let S of["sso_start_url","sso_region"])if(!c[S])throw new ze.TokenProviderError(`Sso session '${i}' is missing required property '${S}'.`,!1);let d=c.sso_start_url,l=c.sso_region,u;try{u=await(0,ka.getSSOTokenFromFile)(i)}catch{throw new ze.TokenProviderError(`The SSO session token associated with profile=${o} was not found or is invalid. ${Rh}`,!1)}On("accessToken",u.accessToken),On("expiresAt",u.expiresAt);let{accessToken:p,expiresAt:h}=u,g={token:p,expiration:new Date(h)};if(g.expiration.getTime()-Date.now()>$4)return g;if(Date.now()-MT.getTime()<30*1e3)return DT(g),g;On("clientId",u.clientId,!0),On("clientSecret",u.clientSecret,!0),On("refreshToken",u.refreshToken,!0);try{MT.setTime(Date.now());let S=await q4(u,l,r);On("accessToken",S.accessToken),On("expiresIn",S.expiresIn);let E=new Date(Date.now()+S.expiresIn*1e3);try{await K4(i,{...u,accessToken:S.accessToken,expiresAt:E.toISOString(),refreshToken:S.refreshToken})}catch{}return{token:S.accessToken,expiration:E}}catch{return DT(g),g}},"fromSso"),G4=Zt(({token:e,logger:t})=>async()=>{if(t?.debug("@aws-sdk/token-providers - fromStatic"),!e||!e.token)throw new ze.TokenProviderError("Please pass a valid token to fromStatic",!1);return e},"fromStatic"),W4=Zt((e={})=>(0,ze.memoize)((0,ze.chain)(LT(e),async()=>{throw new ze.TokenProviderError("Could not load token from any providers",!1)}),t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<3e5,t=>t.expiration!==void 0),"nodeProvider")});var Oh=w((Cre,JT)=>{"use strict";var Ju=Object.defineProperty,J4=Object.getOwnPropertyDescriptor,qT=Object.getOwnPropertyNames,Y4=Object.prototype.hasOwnProperty,Yu=(e,t)=>Ju(e,"name",{value:t,configurable:!0}),X4=(e,t)=>function(){return e&&(t=(0,e[qT(e)[0]])(e=0)),t},zT=(e,t)=>{for(var r in t)Ju(e,r,{get:t[r],enumerable:!0})},Q4=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of qT(t))!Y4.call(e,o)&&o!==r&&Ju(e,o,{get:()=>t[o],enumerable:!(n=J4(t,o))||n.enumerable});return e},Z4=e=>Q4(Ju({},"__esModule",{value:!0}),e),VT={};zT(VT,{GetRoleCredentialsCommand:()=>Ah.GetRoleCredentialsCommand,SSOClient:()=>Ah.SSOClient});var Ah,eV=X4({"src/loadSso.ts"(){"use strict";Ah=Ix()}}),KT={};zT(KT,{fromSSO:()=>rV,isSsoProfile:()=>GT,validateSsoProfile:()=>WT});JT.exports=Z4(KT);var GT=Yu(e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string"),"isSsoProfile"),$T=(pt(),H(gr)),tV=BT(),ht=Ne(),Wu=br(),Ua=!1,HT=Yu(async({ssoStartUrl:e,ssoSession:t,ssoAccountId:r,ssoRegion:n,ssoRoleName:o,ssoClient:s,clientConfig:i,parentClientConfig:a,profile:c,logger:d})=>{let l,u="To refresh this SSO session run aws sso login with the corresponding profile.";if(t)try{let ke=await(0,tV.fromSso)({profile:c})();l={accessToken:ke.token,expiresAt:new Date(ke.expiration).toISOString()}}catch(ke){throw new ht.CredentialsProviderError(ke.message,{tryNextLink:Ua,logger:d})}else try{l=await(0,Wu.getSSOTokenFromFile)(e)}catch{throw new ht.CredentialsProviderError(`The SSO session associated with this profile is invalid. ${u}`,{tryNextLink:Ua,logger:d})}if(new Date(l.expiresAt).getTime()-Date.now()<=0)throw new ht.CredentialsProviderError(`The SSO session associated with this profile has expired. ${u}`,{tryNextLink:Ua,logger:d});let{accessToken:p}=l,{SSOClient:h,GetRoleCredentialsCommand:g}=await Promise.resolve().then(()=>(eV(),VT)),S=s||new h(Object.assign({},i??{},{logger:i?.logger??a?.logger,region:i?.region??n})),E;try{E=await S.send(new g({accountId:r,roleName:o,accessToken:p}))}catch(ke){throw new ht.CredentialsProviderError(ke,{tryNextLink:Ua,logger:d})}let{roleCredentials:{accessKeyId:b,secretAccessKey:C,sessionToken:N,expiration:k,credentialScope:R,accountId:G}={}}=E;if(!b||!C||!N||!k)throw new ht.CredentialsProviderError("SSO returns an invalid temporary credential.",{tryNextLink:Ua,logger:d});let nr={accessKeyId:b,secretAccessKey:C,sessionToken:N,expiration:new Date(k),...R&&{credentialScope:R},...G&&{accountId:G}};return t?(0,$T.setCredentialFeature)(nr,"CREDENTIALS_SSO","s"):(0,$T.setCredentialFeature)(nr,"CREDENTIALS_SSO_LEGACY","u"),nr},"resolveSSOCredentials"),WT=Yu((e,t)=>{let{sso_start_url:r,sso_account_id:n,sso_region:o,sso_role_name:s}=e;if(!r||!n||!o||!s)throw new ht.CredentialsProviderError(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(e).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,{tryNextLink:!1,logger:t});return e},"validateSsoProfile"),rV=Yu((e={})=>async({callerClientConfig:t}={})=>{e.logger?.debug("@aws-sdk/credential-provider-sso - fromSSO");let{ssoStartUrl:r,ssoAccountId:n,ssoRegion:o,ssoRoleName:s,ssoSession:i}=e,{ssoClient:a}=e,c=(0,Wu.getProfileName)({profile:e.profile??t?.profile});if(!r&&!n&&!o&&!s&&!i){let l=(await(0,Wu.parseKnownFiles)(e))[c];if(!l)throw new ht.CredentialsProviderError(`Profile ${c} was not found.`,{logger:e.logger});if(!GT(l))throw new ht.CredentialsProviderError(`Profile ${c} is not configured with SSO credentials.`,{logger:e.logger});if(l?.sso_session){let b=(await(0,Wu.loadSsoSessionData)(e))[l.sso_session],C=` configurations in profile ${c} and sso-session ${l.sso_session}`;if(o&&o!==b.sso_region)throw new ht.CredentialsProviderError("Conflicting SSO region"+C,{tryNextLink:!1,logger:e.logger});if(r&&r!==b.sso_start_url)throw new ht.CredentialsProviderError("Conflicting SSO start_url"+C,{tryNextLink:!1,logger:e.logger});l.sso_region=b.sso_region,l.sso_start_url=b.sso_start_url}let{sso_start_url:u,sso_account_id:p,sso_region:h,sso_role_name:g,sso_session:S}=WT(l,e.logger);return HT({ssoStartUrl:u,ssoSession:S,ssoAccountId:p,ssoRegion:h,ssoRoleName:g,ssoClient:a,clientConfig:e.clientConfig,parentClientConfig:e.parentClientConfig,profile:c})}else{if(!r||!n||!o||!s)throw new ht.CredentialsProviderError('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"',{tryNextLink:!1,logger:e.logger});return HT({ssoStartUrl:r,ssoSession:i,ssoAccountId:n,ssoRegion:o,ssoRoleName:s,ssoClient:a,clientConfig:e.clientConfig,parentClientConfig:e.parentClientConfig,profile:c})}},"fromSSO")});function nV(e){return{schemeId:"aws.auth#sigv4",signingProperties:{name:"sts",region:e.region},propertiesExtractor:(t,r)=>({signingProperties:{config:t,context:r}})}}function oV(e){return{schemeId:"smithy.api#noAuth"}}var La,YT,XT,sV,QT,Ih=y(()=>{Se();La=v(He());ja();YT=async(e,t,r)=>({operation:(0,La.getSmithyContext)(t).operation,region:await(0,La.normalizeProvider)(e.region)()||(()=>{throw new Error("expected `region` to be configured for `aws.auth#sigv4`")})()});XT=e=>{let t=[];switch(e.operation){case"AssumeRoleWithWebIdentity":{t.push(oV(e));break}default:t.push(nV(e))}return t},sV=e=>Object.assign(e,{stsClientCtor:At}),QT=e=>{let t=sV(e),r=ln(t);return Object.assign(r,{authSchemePreference:(0,La.normalizeProvider)(e.authSchemePreference??[])})}});var ZT,Xu,Qu=y(()=>{ZT=e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"}),Xu={UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}});var uR,F,Y,X,kr,Mr,xe,lR,pR,mR,ce,eR,Ot,ps,Dh,tR,Nh,fR,rR,Te,nR,hR,gR,Ae,Ve,oR,yR,_R,sR,SR,iR,aR,cR,dR,iV,ER,vR=y(()=>{uR="required",F="type",Y="fn",X="argv",kr="ref",Mr="booleanEquals",xe="stringEquals",lR="sigv4",pR="sts",mR="us-east-1",ce="endpoint",eR="https://sts.{Region}.{PartitionResult#dnsSuffix}",Ot="tree",ps="error",Dh="getAttr",tR={[uR]:!1,[F]:"String"},Nh={[uR]:!0,default:!1,[F]:"Boolean"},fR={[kr]:"Endpoint"},rR={[Y]:"isSet",[X]:[{[kr]:"Region"}]},Te={[kr]:"Region"},nR={[Y]:"aws.partition",[X]:[Te],assign:"PartitionResult"},hR={[kr]:"UseFIPS"},gR={[kr]:"UseDualStack"},Ae={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:lR,signingName:pR,signingRegion:mR}]},headers:{}},Ve={},oR={conditions:[{[Y]:xe,[X]:[Te,"aws-global"]}],[ce]:Ae,[F]:ce},yR={[Y]:Mr,[X]:[hR,!0]},_R={[Y]:Mr,[X]:[gR,!0]},sR={[Y]:Dh,[X]:[{[kr]:"PartitionResult"},"supportsFIPS"]},SR={[kr]:"PartitionResult"},iR={[Y]:Mr,[X]:[!0,{[Y]:Dh,[X]:[SR,"supportsDualStack"]}]},aR=[{[Y]:"isSet",[X]:[fR]}],cR=[yR],dR=[_R],iV={version:"1.0",parameters:{Region:tR,UseDualStack:Nh,UseFIPS:Nh,Endpoint:tR,UseGlobalEndpoint:Nh},rules:[{conditions:[{[Y]:Mr,[X]:[{[kr]:"UseGlobalEndpoint"},!0]},{[Y]:"not",[X]:aR},rR,nR,{[Y]:Mr,[X]:[hR,!1]},{[Y]:Mr,[X]:[gR,!1]}],rules:[{conditions:[{[Y]:xe,[X]:[Te,"ap-northeast-1"]}],endpoint:Ae,[F]:ce},{conditions:[{[Y]:xe,[X]:[Te,"ap-south-1"]}],endpoint:Ae,[F]:ce},{conditions:[{[Y]:xe,[X]:[Te,"ap-southeast-1"]}],endpoint:Ae,[F]:ce},{conditions:[{[Y]:xe,[X]:[Te,"ap-southeast-2"]}],endpoint:Ae,[F]:ce},oR,{conditions:[{[Y]:xe,[X]:[Te,"ca-central-1"]}],endpoint:Ae,[F]:ce},{conditions:[{[Y]:xe,[X]:[Te,"eu-central-1"]}],endpoint:Ae,[F]:ce},{conditions:[{[Y]:xe,[X]:[Te,"eu-north-1"]}],endpoint:Ae,[F]:ce},{conditions:[{[Y]:xe,[X]:[Te,"eu-west-1"]}],endpoint:Ae,[F]:ce},{conditions:[{[Y]:xe,[X]:[Te,"eu-west-2"]}],endpoint:Ae,[F]:ce},{conditions:[{[Y]:xe,[X]:[Te,"eu-west-3"]}],endpoint:Ae,[F]:ce},{conditions:[{[Y]:xe,[X]:[Te,"sa-east-1"]}],endpoint:Ae,[F]:ce},{conditions:[{[Y]:xe,[X]:[Te,mR]}],endpoint:Ae,[F]:ce},{conditions:[{[Y]:xe,[X]:[Te,"us-east-2"]}],endpoint:Ae,[F]:ce},{conditions:[{[Y]:xe,[X]:[Te,"us-west-1"]}],endpoint:Ae,[F]:ce},{conditions:[{[Y]:xe,[X]:[Te,"us-west-2"]}],endpoint:Ae,[F]:ce},{endpoint:{url:eR,properties:{authSchemes:[{name:lR,signingName:pR,signingRegion:"{Region}"}]},headers:Ve},[F]:ce}],[F]:Ot},{conditions:aR,rules:[{conditions:cR,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[F]:ps},{conditions:dR,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[F]:ps},{endpoint:{url:fR,properties:Ve,headers:Ve},[F]:ce}],[F]:Ot},{conditions:[rR],rules:[{conditions:[nR],rules:[{conditions:[yR,_R],rules:[{conditions:[{[Y]:Mr,[X]:[!0,sR]},iR],rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ve,headers:Ve},[F]:ce}],[F]:Ot},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[F]:ps}],[F]:Ot},{conditions:cR,rules:[{conditions:[{[Y]:Mr,[X]:[sR,!0]}],rules:[{conditions:[{[Y]:xe,[X]:[{[Y]:Dh,[X]:[SR,"name"]},"aws-us-gov"]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:Ve,headers:Ve},[F]:ce},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Ve,headers:Ve},[F]:ce}],[F]:Ot},{error:"FIPS is enabled but this partition does not support FIPS",[F]:ps}],[F]:Ot},{conditions:dR,rules:[{conditions:[iR],rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Ve,headers:Ve},[F]:ce}],[F]:Ot},{error:"DualStack is enabled but this partition does not support DualStack",[F]:ps}],[F]:Ot},oR,{endpoint:{url:eR,properties:Ve,headers:Ve},[F]:ce}],[F]:Ot}],[F]:Ot},{error:"Invalid Configuration: Missing Region",[F]:ps}]},ER=iV});var wR,ms,aV,bR,CR=y(()=>{wR=v(wo()),ms=v(vo());vR();aV=new ms.EndpointCache({size:50,params:["Endpoint","Region","UseDualStack","UseFIPS","UseGlobalEndpoint"]}),bR=(e,t={})=>aV.get(e,()=>(0,ms.resolveEndpoint)(ER,{endpointParams:e,logger:t.logger}));ms.customEndpointFunctions.aws=wR.awsEndpointFunctions});var PR,xR,Zu,el,TR,RR=y(()=>{Se();Ue();PR=v(L()),xR=v(mr()),Zu=v(Oe()),el=v(we());Ih();CR();TR=e=>({apiVersion:"2011-06-15",base64Decoder:e?.base64Decoder??Zu.fromBase64,base64Encoder:e?.base64Encoder??Zu.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??bR,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??XT,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new je},{schemeId:"smithy.api#noAuth",identityProvider:t=>t.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Vt}],logger:e?.logger??new PR.NoOpLogger,serviceId:e?.serviceId??"STS",urlParser:e?.urlParser??xR.parseUrl,utf8Decoder:e?.utf8Decoder??el.fromUtf8,utf8Encoder:e?.utf8Encoder??el.toUtf8})});var tl,Ur,AR,rl,Fr,nl,OR,IR,NR,DR,MR,kR,FR=y(()=>{yh();Se();tl=v(la()),Ur=v(xt());Ue();AR=v(pa()),rl=v(Jt()),Fr=v(Cr()),nl=v(Kr()),OR=v(ma()),IR=v(qo());RR();NR=v(L()),DR=v(ga()),MR=v(L()),kR=e=>{(0,MR.emitWarningIfUnsupportedVersion)(process.version);let t=(0,DR.resolveDefaultsModeConfig)(e),r=()=>t().then(NR.loadConfigsForDefaultMode),n=TR(e);bo(process.version);let o={profile:e?.profile,logger:n.logger};return{...n,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,Fr.loadConfig)(xo,o),bodyLengthChecker:e?.bodyLengthChecker??OR.calculateBodyLength,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,tl.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:Du.version}),httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:s=>s.getIdentityProvider("aws.auth#sigv4")||(async i=>await e.credentialDefaultProvider(i?.__config||{})()),signer:new je},{schemeId:"smithy.api#noAuth",identityProvider:s=>s.getIdentityProvider("smithy.api#noAuth")||(async()=>({})),signer:new Vt}],maxAttempts:e?.maxAttempts??(0,Fr.loadConfig)(rl.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,Fr.loadConfig)(Ur.NODE_REGION_CONFIG_OPTIONS,{...Ur.NODE_REGION_CONFIG_FILE_OPTIONS,...o}),requestHandler:nl.NodeHttpHandler.create(e?.requestHandler??r),retryMode:e?.retryMode??(0,Fr.loadConfig)({...rl.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||IR.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??AR.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??nl.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,Fr.loadConfig)(Ur.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,o),useFipsEndpoint:e?.useFipsEndpoint??(0,Fr.loadConfig)(Ur.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,o),userAgentAppId:e?.userAgentAppId??(0,Fr.loadConfig)(tl.NODE_APP_ID_CONFIG_OPTIONS,o)}}});var UR,LR,jR=y(()=>{UR=e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(o){let s=t.findIndex(i=>i.schemeId===o.schemeId);s===-1?t.push(o):t.splice(s,1,o)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(o){r=o},httpAuthSchemeProvider(){return r},setCredentials(o){n=o},credentials(){return n}}},LR=e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()})});var ol,sl,il,BR,$R=y(()=>{ol=v(ya()),sl=v(se()),il=v(L());jR();BR=(e,t)=>{let r=Object.assign((0,ol.getAwsRegionExtensionConfiguration)(e),(0,il.getDefaultExtensionConfiguration)(e),(0,sl.getHttpHandlerExtensionConfiguration)(e),UR(e));return t.forEach(n=>n.configure(r)),Object.assign(e,(0,ol.resolveAwsRegionExtensionConfiguration)(r),(0,il.resolveDefaultRuntimeConfig)(r),(0,sl.resolveHttpHandlerRuntimeConfig)(r),LR(r))}});var al,HR,qR,cl,zR,VR,KR,dl,Mh,At,ja=y(()=>{al=v(_i()),HR=v(Si()),qR=v(Ei()),cl=v(Uo()),zR=v(xt());Ue();VR=v(ta()),KR=v(Pr()),dl=v(Jt()),Mh=v(L());Ih();Qu();FR();$R();At=class extends Mh.Client{constructor(...[r]){let n=kR(r||{});super(n);_(this,"config");this.initConfig=n;let o=ZT(n),s=(0,cl.resolveUserAgentConfig)(o),i=(0,dl.resolveRetryConfig)(s),a=(0,zR.resolveRegionConfig)(i),c=(0,al.resolveHostHeaderConfig)(a),d=(0,KR.resolveEndpointConfig)(c),l=QT(d),u=BR(l,r?.extensions||[]);this.config=u,this.middlewareStack.use((0,cl.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,dl.getRetryPlugin)(this.config)),this.middlewareStack.use((0,VR.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,al.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,HR.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,qR.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use(wi(this.config,{httpAuthSchemeParametersProvider:YT,identityProviderConfigProvider:async p=>new on({"aws.auth#sigv4":p.credentials})})),this.middlewareStack.use(bi(this.config))}destroy(){super.destroy()}}});var GR,Be,ul=y(()=>{GR=v(L()),Be=class e extends GR.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}}});var kh,Fh,Uh,Ba,$a,Ha,qa,za,Va,Lh,jh,Ka,Ga=y(()=>{kh=v(L());ul();Fh=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:kh.SENSITIVE_STRING}}),Uh=e=>({...e,...e.Credentials&&{Credentials:Fh(e.Credentials)}}),Ba=class e extends Be{constructor(r){super({name:"ExpiredTokenException",$fault:"client",...r});_(this,"name","ExpiredTokenException");_(this,"$fault","client");Object.setPrototypeOf(this,e.prototype)}},$a=class e extends Be{constructor(r){super({name:"MalformedPolicyDocumentException",$fault:"client",...r});_(this,"name","MalformedPolicyDocumentException");_(this,"$fault","client");Object.setPrototypeOf(this,e.prototype)}},Ha=class e extends Be{constructor(r){super({name:"PackedPolicyTooLargeException",$fault:"client",...r});_(this,"name","PackedPolicyTooLargeException");_(this,"$fault","client");Object.setPrototypeOf(this,e.prototype)}},qa=class e extends Be{constructor(r){super({name:"RegionDisabledException",$fault:"client",...r});_(this,"name","RegionDisabledException");_(this,"$fault","client");Object.setPrototypeOf(this,e.prototype)}},za=class e extends Be{constructor(r){super({name:"IDPRejectedClaimException",$fault:"client",...r});_(this,"name","IDPRejectedClaimException");_(this,"$fault","client");Object.setPrototypeOf(this,e.prototype)}},Va=class e extends Be{constructor(r){super({name:"InvalidIdentityTokenException",$fault:"client",...r});_(this,"name","InvalidIdentityTokenException");_(this,"$fault","client");Object.setPrototypeOf(this,e.prototype)}},Lh=e=>({...e,...e.WebIdentityToken&&{WebIdentityToken:kh.SENSITIVE_STRING}}),jh=e=>({...e,...e.Credentials&&{Credentials:Fh(e.Credentials)}}),Ka=class e extends Be{constructor(r){super({name:"IDPCommunicationErrorException",$fault:"client",...r});_(this,"name","IDPCommunicationErrorException");_(this,"$fault","client");Object.setPrototypeOf(this,e.prototype)}}});var WR,U,JR,YR,XR,QR,ZR,cV,dV,uV,lV,pV,mV,fV,hV,gV,eA,yV,_V,SV,EV,vV,wV,tA,bV,CV,rA,PV,xV,TV,RV,AV,OV,IV,tr,NV,nA,oA,sA,iA,Bh,DV,$h,fs,MV,Hh,qh,hs,zh,gs,Vh,Kh,Gh,ys,_s,Wh,Jh,Yh,Ss,Xh,Es,vs,Qh,Zh,er,eg,tg,rg,ng,og,aA,sg,ig,ag,me,cA,kV,cg=y(()=>{Se();WR=v(se()),U=v(L());Ga();ul();JR=async(e,t)=>{let r=oA,n;return n=cA({...hV(e,t),[iA]:DV,[aA]:sA}),nA(t,r,"/",void 0,n)},YR=async(e,t)=>{let r=oA,n;return n=cA({...gV(e,t),[iA]:MV,[aA]:sA}),nA(t,r,"/",void 0,n)},XR=async(e,t)=>{if(e.statusCode>=300)return ZR(e,t);let r=await Qi(e.body,t),n={};return n=bV(r.AssumeRoleResult,t),{$metadata:tr(e),...n}},QR=async(e,t)=>{if(e.statusCode>=300)return ZR(e,t);let r=await Qi(e.body,t),n={};return n=CV(r.AssumeRoleWithWebIdentityResult,t),{$metadata:tr(e),...n}},ZR=async(e,t)=>{let r={...e,body:await uf(e.body,t)},n=kV(e,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await cV(r,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await pV(r,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await mV(r,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await fV(r,t);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await dV(r,t);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await uV(r,t);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await lV(r,t);default:let o=r.body;return NV({output:e,parsedBody:o.Error,errorCode:n})}},cV=async(e,t)=>{let r=e.body,n=PV(r.Error,t),o=new Ba({$metadata:tr(e),...n});return(0,U.decorateServiceException)(o,r)},dV=async(e,t)=>{let r=e.body,n=xV(r.Error,t),o=new Ka({$metadata:tr(e),...n});return(0,U.decorateServiceException)(o,r)},uV=async(e,t)=>{let r=e.body,n=TV(r.Error,t),o=new za({$metadata:tr(e),...n});return(0,U.decorateServiceException)(o,r)},lV=async(e,t)=>{let r=e.body,n=RV(r.Error,t),o=new Va({$metadata:tr(e),...n});return(0,U.decorateServiceException)(o,r)},pV=async(e,t)=>{let r=e.body,n=AV(r.Error,t),o=new $a({$metadata:tr(e),...n});return(0,U.decorateServiceException)(o,r)},mV=async(e,t)=>{let r=e.body,n=OV(r.Error,t),o=new Ha({$metadata:tr(e),...n});return(0,U.decorateServiceException)(o,r)},fV=async(e,t)=>{let r=e.body,n=IV(r.Error,t),o=new qa({$metadata:tr(e),...n});return(0,U.decorateServiceException)(o,r)},hV=(e,t)=>{let r={};if(e[Es]!=null&&(r[Es]=e[Es]),e[vs]!=null&&(r[vs]=e[vs]),e[_s]!=null){let n=eA(e[_s],t);e[_s]?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([o,s])=>{let i=`PolicyArns.${o}`;r[i]=s})}if(e[ys]!=null&&(r[ys]=e[ys]),e[gs]!=null&&(r[gs]=e[gs]),e[rg]!=null){let n=wV(e[rg],t);e[rg]?.length===0&&(r.Tags=[]),Object.entries(n).forEach(([o,s])=>{let i=`Tags.${o}`;r[i]=s})}if(e[og]!=null){let n=vV(e[og],t);e[og]?.length===0&&(r.TransitiveTagKeys=[]),Object.entries(n).forEach(([o,s])=>{let i=`TransitiveTagKeys.${o}`;r[i]=s})}if(e[Kh]!=null&&(r[Kh]=e[Kh]),e[eg]!=null&&(r[eg]=e[eg]),e[ng]!=null&&(r[ng]=e[ng]),e[er]!=null&&(r[er]=e[er]),e[Jh]!=null){let n=SV(e[Jh],t);e[Jh]?.length===0&&(r.ProvidedContexts=[]),Object.entries(n).forEach(([o,s])=>{let i=`ProvidedContexts.${o}`;r[i]=s})}return r},gV=(e,t)=>{let r={};if(e[Es]!=null&&(r[Es]=e[Es]),e[vs]!=null&&(r[vs]=e[vs]),e[ig]!=null&&(r[ig]=e[ig]),e[Yh]!=null&&(r[Yh]=e[Yh]),e[_s]!=null){let n=eA(e[_s],t);e[_s]?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([o,s])=>{let i=`PolicyArns.${o}`;r[i]=s})}return e[ys]!=null&&(r[ys]=e[ys]),e[gs]!=null&&(r[gs]=e[gs]),r},eA=(e,t)=>{let r={},n=1;for(let o of e){if(o===null)continue;let s=yV(o,t);Object.entries(s).forEach(([i,a])=>{r[`member.${n}.${i}`]=a}),n++}return r},yV=(e,t)=>{let r={};return e[ag]!=null&&(r[ag]=e[ag]),r},_V=(e,t)=>{let r={};return e[Wh]!=null&&(r[Wh]=e[Wh]),e[zh]!=null&&(r[zh]=e[zh]),r},SV=(e,t)=>{let r={},n=1;for(let o of e){if(o===null)continue;let s=_V(o,t);Object.entries(s).forEach(([i,a])=>{r[`member.${n}.${i}`]=a}),n++}return r},EV=(e,t)=>{let r={};return e[Gh]!=null&&(r[Gh]=e[Gh]),e[sg]!=null&&(r[sg]=e[sg]),r},vV=(e,t)=>{let r={},n=1;for(let o of e)o!==null&&(r[`member.${n}`]=o,n++);return r},wV=(e,t)=>{let r={},n=1;for(let o of e){if(o===null)continue;let s=EV(o,t);Object.entries(s).forEach(([i,a])=>{r[`member.${n}.${i}`]=a}),n++}return r},tA=(e,t)=>{let r={};return e[$h]!=null&&(r[$h]=(0,U.expectString)(e[$h])),e[Hh]!=null&&(r[Hh]=(0,U.expectString)(e[Hh])),r},bV=(e,t)=>{let r={};return e[hs]!=null&&(r[hs]=rA(e[hs],t)),e[fs]!=null&&(r[fs]=tA(e[fs],t)),e[Ss]!=null&&(r[Ss]=(0,U.strictParseInt32)(e[Ss])),e[er]!=null&&(r[er]=(0,U.expectString)(e[er])),r},CV=(e,t)=>{let r={};return e[hs]!=null&&(r[hs]=rA(e[hs],t)),e[Zh]!=null&&(r[Zh]=(0,U.expectString)(e[Zh])),e[fs]!=null&&(r[fs]=tA(e[fs],t)),e[Ss]!=null&&(r[Ss]=(0,U.strictParseInt32)(e[Ss])),e[Xh]!=null&&(r[Xh]=(0,U.expectString)(e[Xh])),e[qh]!=null&&(r[qh]=(0,U.expectString)(e[qh])),e[er]!=null&&(r[er]=(0,U.expectString)(e[er])),r},rA=(e,t)=>{let r={};return e[Bh]!=null&&(r[Bh]=(0,U.expectString)(e[Bh])),e[Qh]!=null&&(r[Qh]=(0,U.expectString)(e[Qh])),e[tg]!=null&&(r[tg]=(0,U.expectString)(e[tg])),e[Vh]!=null&&(r[Vh]=(0,U.expectNonNull)((0,U.parseRfc3339DateTimeWithOffset)(e[Vh]))),r},PV=(e,t)=>{let r={};return e[me]!=null&&(r[me]=(0,U.expectString)(e[me])),r},xV=(e,t)=>{let r={};return e[me]!=null&&(r[me]=(0,U.expectString)(e[me])),r},TV=(e,t)=>{let r={};return e[me]!=null&&(r[me]=(0,U.expectString)(e[me])),r},RV=(e,t)=>{let r={};return e[me]!=null&&(r[me]=(0,U.expectString)(e[me])),r},AV=(e,t)=>{let r={};return e[me]!=null&&(r[me]=(0,U.expectString)(e[me])),r},OV=(e,t)=>{let r={};return e[me]!=null&&(r[me]=(0,U.expectString)(e[me])),r},IV=(e,t)=>{let r={};return e[me]!=null&&(r[me]=(0,U.expectString)(e[me])),r},tr=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),NV=(0,U.withBaseException)(Be),nA=async(e,t,r,n,o)=>{let{hostname:s,protocol:i="https",port:a,path:c}=await e.endpoint(),d={protocol:i,hostname:s,port:a,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+r:c+r,headers:t};return n!==void 0&&(d.hostname=n),o!==void 0&&(d.body=o),new WR.HttpRequest(d)},oA={"content-type":"application/x-www-form-urlencoded"},sA="2011-06-15",iA="Action",Bh="AccessKeyId",DV="AssumeRole",$h="AssumedRoleId",fs="AssumedRoleUser",MV="AssumeRoleWithWebIdentity",Hh="Arn",qh="Audience",hs="Credentials",zh="ContextAssertion",gs="DurationSeconds",Vh="Expiration",Kh="ExternalId",Gh="Key",ys="Policy",_s="PolicyArns",Wh="ProviderArn",Jh="ProvidedContexts",Yh="ProviderId",Ss="PackedPolicySize",Xh="Provider",Es="RoleArn",vs="RoleSessionName",Qh="SecretAccessKey",Zh="SubjectFromWebIdentityToken",er="SourceIdentity",eg="SerialNumber",tg="SessionToken",rg="Tags",ng="TokenCode",og="TransitiveTagKeys",aA="Version",sg="Value",ig="WebIdentityToken",ag="arn",me="message",cA=e=>Object.entries(e).map(([t,r])=>(0,U.extendedEncodeURIComponent)(t)+"="+(0,U.extendedEncodeURIComponent)(r)).join("&"),kV=(e,t)=>{if(t.Error?.Code!==void 0)return t.Error.Code;if(e.statusCode==404)return"NotFound"}});var dA,uA,lA,In,ll=y(()=>{dA=v(Pr()),uA=v(ar()),lA=v(L());Qu();Ga();cg();In=class extends lA.Command.classBuilder().ep(Xu).m(function(t,r,n,o){return[(0,uA.getSerdePlugin)(n,this.serialize,this.deserialize),(0,dA.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRole",{}).n("STSClient","AssumeRoleCommand").f(void 0,Uh).ser(JR).de(XR).build(){}});var pA,mA,fA,Nn,pl=y(()=>{pA=v(Pr()),mA=v(ar()),fA=v(L());Qu();Ga();cg();Nn=class extends fA.Command.classBuilder().ep(Xu).m(function(t,r,n,o){return[(0,mA.getSerdePlugin)(n,this.serialize,this.deserialize),(0,pA.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("AWSSecurityTokenServiceV20110615","AssumeRoleWithWebIdentity",{}).n("STSClient","AssumeRoleWithWebIdentityCommand").f(Lh,jh).ser(YR).de(QR).build(){}});var hA,FV,ml,gA=y(()=>{hA=v(L());ll();pl();ja();FV={AssumeRoleCommand:In,AssumeRoleWithWebIdentityCommand:Nn},ml=class extends At{};(0,hA.createAggregatedClient)(FV,ml)});var yA=y(()=>{ll();pl()});var _A=y(()=>{Ga()});var SA,EA,vA,wA,bA,CA,PA=y(()=>{pt();ll();pl();SA="us-east-1",EA=e=>{if(typeof e?.Arn=="string"){let t=e.Arn.split(":");if(t.length>4&&t[4]!=="")return t[4]}},vA=async(e,t,r)=>{let n=typeof e=="function"?await e():e,o=typeof t=="function"?await t():t;return r?.debug?.("@aws-sdk/client-sts::resolveRegion","accepting first of:",`${n} (provider)`,`${o} (parent client)`,`${SA} (STS default)`),n??o??SA},wA=(e,t)=>{let r,n;return async(o,s)=>{if(n=o,!r){let{logger:l=e?.parentClientConfig?.logger,region:u,requestHandler:p=e?.parentClientConfig?.requestHandler,credentialProviderLogger:h}=e,g=await vA(u,e?.parentClientConfig?.region,h),S=!CA(p);r=new t({profile:e?.parentClientConfig?.profile,credentialDefaultProvider:()=>async()=>n,region:g,requestHandler:S?p:void 0,logger:l})}let{Credentials:i,AssumedRoleUser:a}=await r.send(new In(s));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${s.RoleArn}`);let c=EA(a),d={accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration,...i.CredentialScope&&{credentialScope:i.CredentialScope},...c&&{accountId:c}};return hr(d,"CREDENTIALS_STS_ASSUME_ROLE","i"),d}},bA=(e,t)=>{let r;return async n=>{if(!r){let{logger:c=e?.parentClientConfig?.logger,region:d,requestHandler:l=e?.parentClientConfig?.requestHandler,credentialProviderLogger:u}=e,p=await vA(d,e?.parentClientConfig?.region,u),h=!CA(l);r=new t({profile:e?.parentClientConfig?.profile,region:p,requestHandler:h?l:void 0,logger:c})}let{Credentials:o,AssumedRoleUser:s}=await r.send(new Nn(n));if(!o||!o.AccessKeyId||!o.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${n.RoleArn}`);let i=EA(s),a={accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.SessionToken,expiration:o.Expiration,...o.CredentialScope&&{credentialScope:o.CredentialScope},...i&&{accountId:i}};return i&&hr(a,"RESOLVED_ACCOUNT_ID","T"),hr(a,"CREDENTIALS_STS_ASSUME_ROLE_WEB_ID","k"),a}},CA=e=>e?.metadata?.handlerProtocol==="h2"});var xA,TA,RA,UV,AA=y(()=>{PA();ja();xA=(e,t)=>t?class extends e{constructor(n){super(n);for(let o of t)this.middlewareStack.use(o)}}:e,TA=(e={},t)=>wA(e,xA(At,t)),RA=(e={},t)=>bA(e,xA(At,t)),UV=e=>t=>e({roleAssumer:TA(t),roleAssumerWithWebIdentity:RA(t),...t})});var dg={};ct(dg,{AssumeRoleCommand:()=>In,AssumeRoleResponseFilterSensitiveLog:()=>Uh,AssumeRoleWithWebIdentityCommand:()=>Nn,AssumeRoleWithWebIdentityRequestFilterSensitiveLog:()=>Lh,AssumeRoleWithWebIdentityResponseFilterSensitiveLog:()=>jh,CredentialsFilterSensitiveLog:()=>Fh,ExpiredTokenException:()=>Ba,IDPCommunicationErrorException:()=>Ka,IDPRejectedClaimException:()=>za,InvalidIdentityTokenException:()=>Va,MalformedPolicyDocumentException:()=>$a,PackedPolicyTooLargeException:()=>Ha,RegionDisabledException:()=>qa,STS:()=>ml,STSClient:()=>At,STSServiceException:()=>Be,__Client:()=>Mh.Client,decorateDefaultCredentialProvider:()=>UV,getDefaultRoleAssumer:()=>TA,getDefaultRoleAssumerWithWebIdentity:()=>RA});var ug=y(()=>{ja();gA();yA();_A();AA();ul()});var mg=w((Une,NA)=>{"use strict";var fl=Object.defineProperty,LV=Object.getOwnPropertyDescriptor,jV=Object.getOwnPropertyNames,BV=Object.prototype.hasOwnProperty,pg=(e,t)=>fl(e,"name",{value:t,configurable:!0}),$V=(e,t)=>{for(var r in t)fl(e,r,{get:t[r],enumerable:!0})},HV=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of jV(t))!BV.call(e,o)&&o!==r&&fl(e,o,{get:()=>t[o],enumerable:!(n=LV(t,o))||n.enumerable});return e},qV=e=>HV(fl({},"__esModule",{value:!0}),e),IA={};$V(IA,{fromProcess:()=>JV});NA.exports=qV(IA);var OA=br(),lg=Ne(),zV=require("child_process"),VV=require("util"),KV=(pt(),H(gr)),GV=pg((e,t,r)=>{if(t.Version!==1)throw Error(`Profile ${e} credential_process did not return Version 1.`);if(t.AccessKeyId===void 0||t.SecretAccessKey===void 0)throw Error(`Profile ${e} credential_process returned invalid credentials.`);if(t.Expiration){let s=new Date;if(new Date(t.Expiration)<s)throw Error(`Profile ${e} credential_process returned expired credentials.`)}let n=t.AccountId;!n&&r?.[e]?.aws_account_id&&(n=r[e].aws_account_id);let o={accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,...t.SessionToken&&{sessionToken:t.SessionToken},...t.Expiration&&{expiration:new Date(t.Expiration)},...t.CredentialScope&&{credentialScope:t.CredentialScope},...n&&{accountId:n}};return(0,KV.setCredentialFeature)(o,"CREDENTIALS_PROCESS","w"),o},"getValidatedProcessCredentials"),WV=pg(async(e,t,r)=>{let n=t[e];if(t[e]){let o=n.credential_process;if(o!==void 0){let s=(0,VV.promisify)(zV.exec);try{let{stdout:i}=await s(o),a;try{a=JSON.parse(i.trim())}catch{throw Error(`Profile ${e} credential_process returned invalid JSON.`)}return GV(e,a,t)}catch(i){throw new lg.CredentialsProviderError(i.message,{logger:r})}}else throw new lg.CredentialsProviderError(`Profile ${e} did not contain credential_process.`,{logger:r})}else throw new lg.CredentialsProviderError(`Profile ${e} could not be found in shared credentials file.`,{logger:r})},"resolveProcessCredentials"),JV=pg((e={})=>async({callerClientConfig:t}={})=>{e.logger?.debug("@aws-sdk/credential-provider-process - fromProcess");let r=await(0,OA.parseKnownFiles)(e);return WV((0,OA.getProfileName)({profile:e.profile??t?.profile}),r,e.logger)},"fromProcess")});var fg=w(It=>{"use strict";var YV=It&&It.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),XV=It&&It.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),QV=It&&It.__importStar||function(){var e=function(t){return e=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},e(t)};return function(t){if(t&&t.__esModule)return t;var r={};if(t!=null)for(var n=e(t),o=0;o<n.length;o++)n[o]!=="default"&&YV(r,t,n[o]);return XV(r,t),r}}();Object.defineProperty(It,"__esModule",{value:!0});It.fromWebToken=void 0;var ZV=e=>async t=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromWebToken");let{roleArn:r,roleSessionName:n,webIdentityToken:o,providerId:s,policyArns:i,policy:a,durationSeconds:c}=e,{roleAssumerWithWebIdentity:d}=e;if(!d){let{getDefaultRoleAssumerWithWebIdentity:l}=await Promise.resolve().then(()=>QV((ug(),H(dg))));d=l({...e.clientConfig,credentialProviderLogger:e.logger,parentClientConfig:{...t?.callerClientConfig,...e.parentClientConfig}},e.clientPlugins)}return d({RoleArn:r,RoleSessionName:n??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:o,ProviderId:s,PolicyArns:i,Policy:a,DurationSeconds:c})};It.fromWebToken=ZV});var MA=w(hl=>{"use strict";Object.defineProperty(hl,"__esModule",{value:!0});hl.fromTokenFile=void 0;var e6=(pt(),H(gr)),t6=Ne(),r6=require("fs"),n6=fg(),DA="AWS_WEB_IDENTITY_TOKEN_FILE",o6="AWS_ROLE_ARN",s6="AWS_ROLE_SESSION_NAME",i6=(e={})=>async()=>{e.logger?.debug("@aws-sdk/credential-provider-web-identity - fromTokenFile");let t=e?.webIdentityTokenFile??process.env[DA],r=e?.roleArn??process.env[o6],n=e?.roleSessionName??process.env[s6];if(!t||!r)throw new t6.CredentialsProviderError("Web identity configuration not specified",{logger:e.logger});let o=await(0,n6.fromWebToken)({...e,webIdentityToken:(0,r6.readFileSync)(t,{encoding:"ascii"}),roleArn:r,roleSessionName:n})();return t===process.env[DA]&&(0,e6.setCredentialFeature)(o,"CREDENTIALS_ENV_VARS_STS_WEB_ID_TOKEN","h"),o};hl.fromTokenFile=i6});var yg=w((Bne,gl)=>{"use strict";var kA=Object.defineProperty,a6=Object.getOwnPropertyDescriptor,c6=Object.getOwnPropertyNames,d6=Object.prototype.hasOwnProperty,hg=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of c6(t))!d6.call(e,o)&&o!==r&&kA(e,o,{get:()=>t[o],enumerable:!(n=a6(t,o))||n.enumerable});return e},FA=(e,t,r)=>(hg(e,t,"default"),r&&hg(r,t,"default")),u6=e=>hg(kA({},"__esModule",{value:!0}),e),gg={};gl.exports=u6(gg);FA(gg,MA(),gl.exports);FA(gg,fg(),gl.exports)});var zA=w(($ne,qA)=>{"use strict";var l6=Object.create,Ja=Object.defineProperty,p6=Object.getOwnPropertyDescriptor,m6=Object.getOwnPropertyNames,f6=Object.getPrototypeOf,h6=Object.prototype.hasOwnProperty,ge=(e,t)=>Ja(e,"name",{value:t,configurable:!0}),g6=(e,t)=>{for(var r in t)Ja(e,r,{get:t[r],enumerable:!0})},BA=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of m6(t))!h6.call(e,o)&&o!==r&&Ja(e,o,{get:()=>t[o],enumerable:!(n=p6(t,o))||n.enumerable});return e},Lr=(e,t,r)=>(r=e!=null?l6(f6(e)):{},BA(t||!e||!e.__esModule?Ja(r,"default",{value:e,enumerable:!0}):r,e)),y6=e=>BA(Ja({},"__esModule",{value:!0}),e),$A={};g6($A,{fromIni:()=>A6});qA.exports=y6($A);var Sg=br(),jr=(pt(),H(gr)),Wa=Ne(),_6=ge((e,t,r)=>{let n={EcsContainer:ge(async o=>{let{fromHttp:s}=await Promise.resolve().then(()=>Lr(nh())),{fromContainerMetadata:i}=await Promise.resolve().then(()=>Lr(ua()));return r?.debug("@aws-sdk/credential-provider-ini - credential_source is EcsContainer"),async()=>(0,Wa.chain)(s(o??{}),i(o))().then(_g)},"EcsContainer"),Ec2InstanceMetadata:ge(async o=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Ec2InstanceMetadata");let{fromInstanceMetadata:s}=await Promise.resolve().then(()=>Lr(ua()));return async()=>s(o)().then(_g)},"Ec2InstanceMetadata"),Environment:ge(async o=>{r?.debug("@aws-sdk/credential-provider-ini - credential_source is Environment");let{fromEnv:s}=await Promise.resolve().then(()=>Lr(Yf()));return async()=>s(o)().then(_g)},"Environment")};if(e in n)return n[e];throw new Wa.CredentialsProviderError(`Unsupported credential source in profile ${t}. Got ${e}, expected EcsContainer or Ec2InstanceMetadata or Environment.`,{logger:r})},"resolveCredentialSource"),_g=ge(e=>(0,jr.setCredentialFeature)(e,"CREDENTIALS_PROFILE_NAMED_PROVIDER","p"),"setNamedProvider"),S6=ge((e,{profile:t="default",logger:r}={})=>!!e&&typeof e=="object"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1&&["undefined","string"].indexOf(typeof e.external_id)>-1&&["undefined","string"].indexOf(typeof e.mfa_serial)>-1&&(E6(e,{profile:t,logger:r})||v6(e,{profile:t,logger:r})),"isAssumeRoleProfile"),E6=ge((e,{profile:t,logger:r})=>{let n=typeof e.source_profile=="string"&&typeof e.credential_source>"u";return n&&r?.debug?.(`    ${t} isAssumeRoleWithSourceProfile source_profile=${e.source_profile}`),n},"isAssumeRoleWithSourceProfile"),v6=ge((e,{profile:t,logger:r})=>{let n=typeof e.credential_source=="string"&&typeof e.source_profile>"u";return n&&r?.debug?.(`    ${t} isCredentialSourceProfile credential_source=${e.credential_source}`),n},"isCredentialSourceProfile"),w6=ge(async(e,t,r,n={})=>{r.logger?.debug("@aws-sdk/credential-provider-ini - resolveAssumeRoleCredentials (STS)");let o=t[e],{source_profile:s,region:i}=o;if(!r.roleAssumer){let{getDefaultRoleAssumer:c}=await Promise.resolve().then(()=>Lr((ug(),H(dg))));r.roleAssumer=c({...r.clientConfig,credentialProviderLogger:r.logger,parentClientConfig:{...r?.parentClientConfig,region:i??r?.parentClientConfig?.region}},r.clientPlugins)}if(s&&s in n)throw new Wa.CredentialsProviderError(`Detected a cycle attempting to resolve credentials for profile ${(0,Sg.getProfileName)(r)}. Profiles visited: `+Object.keys(n).join(", "),{logger:r.logger});r.logger?.debug(`@aws-sdk/credential-provider-ini - finding credential resolver using ${s?`source_profile=[${s}]`:`profile=[${e}]`}`);let a=s?HA(s,t,r,{...n,[s]:!0},UA(t[s]??{})):(await _6(o.credential_source,e,r.logger)(r))();if(UA(o))return a.then(c=>(0,jr.setCredentialFeature)(c,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"));{let c={RoleArn:o.role_arn,RoleSessionName:o.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:o.external_id,DurationSeconds:parseInt(o.duration_seconds||"3600",10)},{mfa_serial:d}=o;if(d){if(!r.mfaCodeProvider)throw new Wa.CredentialsProviderError(`Profile ${e} requires multi-factor authentication, but no MFA code callback was provided.`,{logger:r.logger,tryNextLink:!1});c.SerialNumber=d,c.TokenCode=await r.mfaCodeProvider(d)}let l=await a;return r.roleAssumer(l,c).then(u=>(0,jr.setCredentialFeature)(u,"CREDENTIALS_PROFILE_SOURCE_PROFILE","o"))}},"resolveAssumeRoleCredentials"),UA=ge(e=>!e.role_arn&&!!e.credential_source,"isCredentialSourceWithoutRoleArn"),b6=ge(e=>!!e&&typeof e=="object"&&typeof e.credential_process=="string","isProcessProfile"),C6=ge(async(e,t)=>Promise.resolve().then(()=>Lr(mg())).then(({fromProcess:r})=>r({...e,profile:t})().then(n=>(0,jr.setCredentialFeature)(n,"CREDENTIALS_PROFILE_PROCESS","v"))),"resolveProcessCredentials"),P6=ge(async(e,t,r={})=>{let{fromSSO:n}=await Promise.resolve().then(()=>Lr(Oh()));return n({profile:e,logger:r.logger,parentClientConfig:r.parentClientConfig,clientConfig:r.clientConfig})().then(o=>t.sso_session?(0,jr.setCredentialFeature)(o,"CREDENTIALS_PROFILE_SSO","r"):(0,jr.setCredentialFeature)(o,"CREDENTIALS_PROFILE_SSO_LEGACY","t"))},"resolveSsoCredentials"),x6=ge(e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string"),"isSsoProfile"),LA=ge(e=>!!e&&typeof e=="object"&&typeof e.aws_access_key_id=="string"&&typeof e.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof e.aws_session_token)>-1&&["undefined","string"].indexOf(typeof e.aws_account_id)>-1,"isStaticCredsProfile"),jA=ge(async(e,t)=>{t?.logger?.debug("@aws-sdk/credential-provider-ini - resolveStaticCredentials");let r={accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token,...e.aws_credential_scope&&{credentialScope:e.aws_credential_scope},...e.aws_account_id&&{accountId:e.aws_account_id}};return(0,jr.setCredentialFeature)(r,"CREDENTIALS_PROFILE","n")},"resolveStaticCredentials"),T6=ge(e=>!!e&&typeof e=="object"&&typeof e.web_identity_token_file=="string"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1,"isWebIdentityProfile"),R6=ge(async(e,t)=>Promise.resolve().then(()=>Lr(yg())).then(({fromTokenFile:r})=>r({webIdentityTokenFile:e.web_identity_token_file,roleArn:e.role_arn,roleSessionName:e.role_session_name,roleAssumerWithWebIdentity:t.roleAssumerWithWebIdentity,logger:t.logger,parentClientConfig:t.parentClientConfig})().then(n=>(0,jr.setCredentialFeature)(n,"CREDENTIALS_PROFILE_STS_WEB_ID_TOKEN","q"))),"resolveWebIdentityCredentials"),HA=ge(async(e,t,r,n={},o=!1)=>{let s=t[e];if(Object.keys(n).length>0&&LA(s))return jA(s,r);if(o||S6(s,{profile:e,logger:r.logger}))return w6(e,t,r,n);if(LA(s))return jA(s,r);if(T6(s))return R6(s,r);if(b6(s))return C6(r,e);if(x6(s))return await P6(e,s,r);throw new Wa.CredentialsProviderError(`Could not resolve credentials using profile: [${e}] in configuration/credentials file(s).`,{logger:r.logger})},"resolveProfileData"),A6=ge((e={})=>async({callerClientConfig:t}={})=>{let r={...e,parentClientConfig:{...t,...e.parentClientConfig}};r.logger?.debug("@aws-sdk/credential-provider-ini - fromIni");let n=await(0,Sg.parseKnownFiles)(r);return HA((0,Sg.getProfileName)({profile:e.profile??t?.profile}),n,r)},"fromIni")});var QA=w((Hne,XA)=>{"use strict";var O6=Object.create,Ya=Object.defineProperty,I6=Object.getOwnPropertyDescriptor,N6=Object.getOwnPropertyNames,D6=Object.getPrototypeOf,M6=Object.prototype.hasOwnProperty,yl=(e,t)=>Ya(e,"name",{value:t,configurable:!0}),k6=(e,t)=>{for(var r in t)Ya(e,r,{get:t[r],enumerable:!0})},GA=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of N6(t))!M6.call(e,o)&&o!==r&&Ya(e,o,{get:()=>t[o],enumerable:!(n=I6(t,o))||n.enumerable});return e},ws=(e,t,r)=>(r=e!=null?O6(D6(e)):{},GA(t||!e||!e.__esModule?Ya(r,"default",{value:e,enumerable:!0}):r,e)),F6=e=>GA(Ya({},"__esModule",{value:!0}),e),WA={};k6(WA,{credentialsTreatedAsExpired:()=>YA,credentialsWillNeedRefresh:()=>JA,defaultProvider:()=>j6});XA.exports=F6(WA);var Eg=Yf(),U6=br(),Dn=Ne(),VA="AWS_EC2_METADATA_DISABLED",L6=yl(async e=>{let{ENV_CMDS_FULL_URI:t,ENV_CMDS_RELATIVE_URI:r,fromContainerMetadata:n,fromInstanceMetadata:o}=await Promise.resolve().then(()=>ws(ua()));if(process.env[r]||process.env[t]){e.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromHttp/fromContainerMetadata");let{fromHttp:s}=await Promise.resolve().then(()=>ws(nh()));return(0,Dn.chain)(s(e),n(e))}return process.env[VA]&&process.env[VA]!=="false"?async()=>{throw new Dn.CredentialsProviderError("EC2 Instance Metadata Service access disabled",{logger:e.logger})}:(e.logger?.debug("@aws-sdk/credential-provider-node - remoteProvider::fromInstanceMetadata"),o(e))},"remoteProvider"),KA=!1,j6=yl((e={})=>(0,Dn.memoize)((0,Dn.chain)(async()=>{if(e.profile??process.env[U6.ENV_PROFILE])throw process.env[Eg.ENV_KEY]&&process.env[Eg.ENV_SECRET]&&(KA||((e.logger?.warn&&e.logger?.constructor?.name!=="NoOpLogger"?e.logger.warn:console.warn)(`@aws-sdk/credential-provider-node - defaultProvider::fromEnv WARNING:
    Multiple credential sources detected: 
    Both AWS_PROFILE and the pair AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY static credentials are set.
    This SDK will proceed with the AWS_PROFILE value.
    
    However, a future version may change this behavior to prefer the ENV static credentials.
    Please ensure that your environment only sets either the AWS_PROFILE or the
    AWS_ACCESS_KEY_ID/AWS_SECRET_ACCESS_KEY pair.
`),KA=!0)),new Dn.CredentialsProviderError("AWS_PROFILE is set, skipping fromEnv provider.",{logger:e.logger,tryNextLink:!0});return e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromEnv"),(0,Eg.fromEnv)(e)()},async()=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromSSO");let{ssoStartUrl:t,ssoAccountId:r,ssoRegion:n,ssoRoleName:o,ssoSession:s}=e;if(!t&&!r&&!n&&!o&&!s)throw new Dn.CredentialsProviderError("Skipping SSO provider in default chain (inputs do not include SSO fields).",{logger:e.logger});let{fromSSO:i}=await Promise.resolve().then(()=>ws(Oh()));return i(e)()},async()=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromIni");let{fromIni:t}=await Promise.resolve().then(()=>ws(zA()));return t(e)()},async()=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromProcess");let{fromProcess:t}=await Promise.resolve().then(()=>ws(mg()));return t(e)()},async()=>{e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::fromTokenFile");let{fromTokenFile:t}=await Promise.resolve().then(()=>ws(yg()));return t(e)()},async()=>(e.logger?.debug("@aws-sdk/credential-provider-node - defaultProvider::remoteProvider"),(await L6(e))()),async()=>{throw new Dn.CredentialsProviderError("Could not load credentials from any providers",{tryNextLink:!1,logger:e.logger})}),YA,JA),"defaultProvider"),JA=yl(e=>e?.expiration!==void 0,"credentialsWillNeedRefresh"),YA=yl(e=>e?.expiration!==void 0&&e.expiration.getTime()-Date.now()<3e5,"credentialsTreatedAsExpired")});var tO=w((qne,eO)=>{var _l=Object.defineProperty,B6=Object.getOwnPropertyDescriptor,$6=Object.getOwnPropertyNames,H6=Object.prototype.hasOwnProperty,q6=(e,t)=>_l(e,"name",{value:t,configurable:!0}),z6=(e,t)=>{for(var r in t)_l(e,r,{get:t[r],enumerable:!0})},V6=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of $6(t))!H6.call(e,o)&&o!==r&&_l(e,o,{get:()=>t[o],enumerable:!(n=B6(t,o))||n.enumerable});return e},K6=e=>V6(_l({},"__esModule",{value:!0}),e),ZA={};z6(ZA,{isArrayBuffer:()=>G6});eO.exports=K6(ZA);var G6=q6(e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]","isArrayBuffer")});var sO=w((zne,oO)=>{var Sl=Object.defineProperty,W6=Object.getOwnPropertyDescriptor,J6=Object.getOwnPropertyNames,Y6=Object.prototype.hasOwnProperty,rO=(e,t)=>Sl(e,"name",{value:t,configurable:!0}),X6=(e,t)=>{for(var r in t)Sl(e,r,{get:t[r],enumerable:!0})},Q6=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of J6(t))!Y6.call(e,o)&&o!==r&&Sl(e,o,{get:()=>t[o],enumerable:!(n=W6(t,o))||n.enumerable});return e},Z6=e=>Q6(Sl({},"__esModule",{value:!0}),e),nO={};X6(nO,{fromArrayBuffer:()=>t8,fromString:()=>r8});oO.exports=Z6(nO);var e8=tO(),vg=require("buffer"),t8=rO((e,t=0,r=e.byteLength-t)=>{if(!(0,e8.isArrayBuffer)(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return vg.Buffer.from(e,t,r)},"fromArrayBuffer"),r8=rO((e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?vg.Buffer.from(e,t):vg.Buffer.from(e)},"fromString")});var uO=w((Vne,dO)=>{var El=Object.defineProperty,n8=Object.getOwnPropertyDescriptor,o8=Object.getOwnPropertyNames,s8=Object.prototype.hasOwnProperty,wg=(e,t)=>El(e,"name",{value:t,configurable:!0}),i8=(e,t)=>{for(var r in t)El(e,r,{get:t[r],enumerable:!0})},a8=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of o8(t))!s8.call(e,o)&&o!==r&&El(e,o,{get:()=>t[o],enumerable:!(n=n8(t,o))||n.enumerable});return e},c8=e=>a8(El({},"__esModule",{value:!0}),e),iO={};i8(iO,{fromUtf8:()=>cO,toUint8Array:()=>d8,toUtf8:()=>u8});dO.exports=c8(iO);var aO=sO(),cO=wg(e=>{let t=(0,aO.fromString)(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)},"fromUtf8"),d8=wg(e=>typeof e=="string"?cO(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),"toUint8Array"),u8=wg(e=>{if(typeof e=="string")return e;if(typeof e!="object"||typeof e.byteOffset!="number"||typeof e.byteLength!="number")throw new Error("@smithy/util-utf8: toUtf8 encoder function only accepts string | Uint8Array.");return(0,aO.fromArrayBuffer)(e.buffer,e.byteOffset,e.byteLength).toString("utf8")},"toUtf8")});var lO=w(vl=>{"use strict";Object.defineProperty(vl,"__esModule",{value:!0});vl.convertToBuffer=void 0;var l8=uO(),p8=typeof Buffer<"u"&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:l8.fromUtf8;function m8(e){return e instanceof Uint8Array?e:typeof e=="string"?p8(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}vl.convertToBuffer=m8});var pO=w(wl=>{"use strict";Object.defineProperty(wl,"__esModule",{value:!0});wl.isEmptyData=void 0;function f8(e){return typeof e=="string"?e.length===0:e.byteLength===0}wl.isEmptyData=f8});var mO=w(bl=>{"use strict";Object.defineProperty(bl,"__esModule",{value:!0});bl.numToUint8=void 0;function h8(e){return new Uint8Array([(e&4278190080)>>24,(e&16711680)>>16,(e&65280)>>8,e&255])}bl.numToUint8=h8});var fO=w(Cl=>{"use strict";Object.defineProperty(Cl,"__esModule",{value:!0});Cl.uint32ArrayFrom=void 0;function g8(e){if(!Uint32Array.from){for(var t=new Uint32Array(e.length),r=0;r<e.length;)t[r]=e[r],r+=1;return t}return Uint32Array.from(e)}Cl.uint32ArrayFrom=g8});var bg=w(Nt=>{"use strict";Object.defineProperty(Nt,"__esModule",{value:!0});Nt.uint32ArrayFrom=Nt.numToUint8=Nt.isEmptyData=Nt.convertToBuffer=void 0;var y8=lO();Object.defineProperty(Nt,"convertToBuffer",{enumerable:!0,get:function(){return y8.convertToBuffer}});var _8=pO();Object.defineProperty(Nt,"isEmptyData",{enumerable:!0,get:function(){return _8.isEmptyData}});var S8=mO();Object.defineProperty(Nt,"numToUint8",{enumerable:!0,get:function(){return S8.numToUint8}});var E8=fO();Object.defineProperty(Nt,"uint32ArrayFrom",{enumerable:!0,get:function(){return E8.uint32ArrayFrom}})});var yO=w(Pl=>{"use strict";Object.defineProperty(Pl,"__esModule",{value:!0});Pl.AwsCrc32=void 0;var hO=(Jo(),H(Wo)),Cg=bg(),gO=xl(),v8=function(){function e(){this.crc32=new gO.Crc32}return e.prototype.update=function(t){(0,Cg.isEmptyData)(t)||this.crc32.update((0,Cg.convertToBuffer)(t))},e.prototype.digest=function(){return hO.__awaiter(this,void 0,void 0,function(){return hO.__generator(this,function(t){return[2,(0,Cg.numToUint8)(this.crc32.digest())]})})},e.prototype.reset=function(){this.crc32=new gO.Crc32},e}();Pl.AwsCrc32=v8});var xl=w(Br=>{"use strict";Object.defineProperty(Br,"__esModule",{value:!0});Br.AwsCrc32=Br.Crc32=Br.crc32=void 0;var w8=(Jo(),H(Wo)),b8=bg();function C8(e){return new _O().update(e).digest()}Br.crc32=C8;var _O=function(){function e(){this.checksum=4294967295}return e.prototype.update=function(t){var r,n;try{for(var o=w8.__values(t),s=o.next();!s.done;s=o.next()){var i=s.value;this.checksum=this.checksum>>>8^x8[(this.checksum^i)&255]}}catch(a){r={error:a}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return this},e.prototype.digest=function(){return(this.checksum^4294967295)>>>0},e}();Br.Crc32=_O;var P8=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],x8=(0,b8.uint32ArrayFrom)(P8),T8=yO();Object.defineProperty(Br,"AwsCrc32",{enumerable:!0,get:function(){return T8.AwsCrc32}})});var PO=w((Zne,CO)=>{var Rl=Object.defineProperty,R8=Object.getOwnPropertyDescriptor,A8=Object.getOwnPropertyNames,O8=Object.prototype.hasOwnProperty,rr=(e,t)=>Rl(e,"name",{value:t,configurable:!0}),I8=(e,t)=>{for(var r in t)Rl(e,r,{get:t[r],enumerable:!0})},N8=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of A8(t))!O8.call(e,o)&&o!==r&&Rl(e,o,{get:()=>t[o],enumerable:!(n=R8(t,o))||n.enumerable});return e},D8=e=>N8(Rl({},"__esModule",{value:!0}),e),EO={};I8(EO,{EventStreamCodec:()=>K8,HeaderMarshaller:()=>vO,Int64:()=>Tl,MessageDecoderStream:()=>G8,MessageEncoderStream:()=>W8,SmithyMessageDecoderStream:()=>J8,SmithyMessageEncoderStream:()=>Y8});CO.exports=D8(EO);var M8=xl(),Mn=Fc(),Fn,Tl=(Fn=class{constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,o=Math.abs(Math.round(t));n>-1&&o>0;n--,o/=256)r[n]=o;return t<0&&Pg(r),new Fn(r)}valueOf(){let t=this.bytes.slice(0),r=t[0]&128;return r&&Pg(t),parseInt((0,Mn.toHex)(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}},rr(Fn,"Int64"),Fn);function Pg(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}rr(Pg,"negate");var bs,vO=(bs=class{constructor(t,r){this.toUtf8=t,this.fromUtf8=r}format(t){let r=[];for(let s of Object.keys(t)){let i=this.fromUtf8(s);r.push(Uint8Array.from([i.byteLength]),i,this.formatHeaderValue(t[s]))}let n=new Uint8Array(r.reduce((s,i)=>s+i.byteLength,0)),o=0;for(let s of r)n.set(s,o),o+=s.byteLength;return n}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,t.value,!1),new Uint8Array(n.buffer);case"long":let o=new Uint8Array(9);return o[0]=5,o.set(t.value.bytes,1),o;case"binary":let s=new DataView(new ArrayBuffer(3+t.value.byteLength));s.setUint8(0,6),s.setUint16(1,t.value.byteLength,!1);let i=new Uint8Array(s.buffer);return i.set(t.value,3),i;case"string":let a=this.fromUtf8(t.value),c=new DataView(new ArrayBuffer(3+a.byteLength));c.setUint8(0,7),c.setUint16(1,a.byteLength,!1);let d=new Uint8Array(c.buffer);return d.set(a,3),d;case"timestamp":let l=new Uint8Array(9);return l[0]=8,l.set(Tl.fromNumber(t.value.valueOf()).bytes,1),l;case"uuid":if(!q8.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);let u=new Uint8Array(17);return u[0]=9,u.set((0,Mn.fromHex)(t.value.replace(/\-/g,"")),1),u}}parse(t){let r={},n=0;for(;n<t.byteLength;){let o=t.getUint8(n++),s=this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,o));switch(n+=o,t.getUint8(n++)){case 0:r[s]={type:SO,value:!0};break;case 1:r[s]={type:SO,value:!1};break;case 2:r[s]={type:k8,value:t.getInt8(n++)};break;case 3:r[s]={type:F8,value:t.getInt16(n,!1)},n+=2;break;case 4:r[s]={type:U8,value:t.getInt32(n,!1)},n+=4;break;case 5:r[s]={type:L8,value:new Tl(new Uint8Array(t.buffer,t.byteOffset+n,8))},n+=8;break;case 6:let i=t.getUint16(n,!1);n+=2,r[s]={type:j8,value:new Uint8Array(t.buffer,t.byteOffset+n,i)},n+=i;break;case 7:let a=t.getUint16(n,!1);n+=2,r[s]={type:B8,value:this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,a))},n+=a;break;case 8:r[s]={type:$8,value:new Date(new Tl(new Uint8Array(t.buffer,t.byteOffset+n,8)).valueOf())},n+=8;break;case 9:let c=new Uint8Array(t.buffer,t.byteOffset+n,16);n+=16,r[s]={type:H8,value:`${(0,Mn.toHex)(c.subarray(0,4))}-${(0,Mn.toHex)(c.subarray(4,6))}-${(0,Mn.toHex)(c.subarray(6,8))}-${(0,Mn.toHex)(c.subarray(8,10))}-${(0,Mn.toHex)(c.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return r}},rr(bs,"HeaderMarshaller"),bs),SO="boolean",k8="byte",F8="short",U8="integer",L8="long",j8="binary",B8="string",$8="timestamp",H8="uuid",q8=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,z8=xl(),wO=4,$r=wO*2,kn=4,V8=$r+kn*2;function bO({byteLength:e,byteOffset:t,buffer:r}){if(e<V8)throw new Error("Provided message too short to accommodate event stream message overhead");let n=new DataView(r,t,e),o=n.getUint32(0,!1);if(e!==o)throw new Error("Reported message length does not match received message length");let s=n.getUint32(wO,!1),i=n.getUint32($r,!1),a=n.getUint32(e-kn,!1),c=new z8.Crc32().update(new Uint8Array(r,t,$r));if(i!==c.digest())throw new Error(`The prelude checksum specified in the message (${i}) does not match the calculated CRC32 checksum (${c.digest()})`);if(c.update(new Uint8Array(r,t+$r,e-($r+kn))),a!==c.digest())throw new Error(`The message checksum (${c.digest()}) did not match the expected value of ${a}`);return{headers:new DataView(r,t+$r+kn,s),body:new Uint8Array(r,t+$r+kn+s,o-s-($r+kn+kn))}}rr(bO,"splitMessage");var Cs,K8=(Cs=class{constructor(t,r){this.headerMarshaller=new vO(t,r),this.messageBuffer=[],this.isEndOfStream=!1}feed(t){this.messageBuffer.push(this.decode(t))}endOfStream(){this.isEndOfStream=!0}getMessage(){let t=this.messageBuffer.pop(),r=this.isEndOfStream;return{getMessage(){return t},isEndOfStream(){return r}}}getAvailableMessages(){let t=this.messageBuffer;this.messageBuffer=[];let r=this.isEndOfStream;return{getMessages(){return t},isEndOfStream(){return r}}}encode({headers:t,body:r}){let n=this.headerMarshaller.format(t),o=n.byteLength+r.byteLength+16,s=new Uint8Array(o),i=new DataView(s.buffer,s.byteOffset,s.byteLength),a=new M8.Crc32;return i.setUint32(0,o,!1),i.setUint32(4,n.byteLength,!1),i.setUint32(8,a.update(s.subarray(0,8)).digest(),!1),s.set(n,12),s.set(r,n.byteLength+12),i.setUint32(o-4,a.update(s.subarray(8,o-4)).digest(),!1),s}decode(t){let{headers:r,body:n}=bO(t);return{headers:this.headerMarshaller.parse(r),body:n}}formatHeaders(t){return this.headerMarshaller.format(t)}},rr(Cs,"EventStreamCodec"),Cs),Ps,G8=(Ps=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.inputStream)yield this.options.decoder.decode(t)}},rr(Ps,"MessageDecoderStream"),Ps),xs,W8=(xs=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.messageStream)yield this.options.encoder.encode(t);this.options.includeEndFrame&&(yield new Uint8Array(0))}},rr(xs,"MessageEncoderStream"),xs),Ts,J8=(Ts=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.messageStream){let r=await this.options.deserializer(t);r!==void 0&&(yield r)}}},rr(Ts,"SmithyMessageDecoderStream"),Ts),Rs,Y8=(Rs=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.inputStream)yield this.options.serializer(t)}},rr(Rs,"SmithyMessageEncoderStream"),Rs)});var IO=w((eoe,OO)=>{var Al=Object.defineProperty,X8=Object.getOwnPropertyDescriptor,Q8=Object.getOwnPropertyNames,Z8=Object.prototype.hasOwnProperty,Os=(e,t)=>Al(e,"name",{value:t,configurable:!0}),eK=(e,t)=>{for(var r in t)Al(e,r,{get:t[r],enumerable:!0})},tK=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Q8(t))!Z8.call(e,o)&&o!==r&&Al(e,o,{get:()=>t[o],enumerable:!(n=X8(t,o))||n.enumerable});return e},rK=e=>tK(Al({},"__esModule",{value:!0}),e),xO={};eK(xO,{EventStreamMarshaller:()=>AO,eventStreamSerdeProvider:()=>nK});OO.exports=rK(xO);var Xa=PO();function TO(e){let t=0,r=0,n=null,o=null,s=Os(a=>{if(typeof a!="number")throw new Error("Attempted to allocate an event message where size was not a number: "+a);t=a,r=4,n=new Uint8Array(a),new DataView(n.buffer).setUint32(0,a,!1)},"allocateMessage"),i=Os(async function*(){let a=e[Symbol.asyncIterator]();for(;;){let{value:c,done:d}=await a.next();if(d){if(t)if(t===r)yield n;else throw new Error("Truncated event message received.");else return;return}let l=c.length,u=0;for(;u<l;){if(!n){let h=l-u;o||(o=new Uint8Array(4));let g=Math.min(4-r,h);if(o.set(c.slice(u,u+g),r),r+=g,u+=g,r<4)break;s(new DataView(o.buffer).getUint32(0,!1)),o=null}let p=Math.min(t-r,l-u);n.set(c.slice(u,u+p),r),r+=p,u+=p,t&&t===r&&(yield n,n=null,t=0,r=0)}}},"iterator");return{[Symbol.asyncIterator]:i}}Os(TO,"getChunkedStream");function RO(e,t){return async function(r){let{value:n}=r.headers[":message-type"];if(n==="error"){let o=new Error(r.headers[":error-message"].value||"UnknownError");throw o.name=r.headers[":error-code"].value,o}else if(n==="exception"){let o=r.headers[":exception-type"].value,s={[o]:r},i=await e(s);if(i.$unknown){let a=new Error(t(r.body));throw a.name=o,a}throw i[o]}else if(n==="event"){let o={[r.headers[":event-type"].value]:r},s=await e(o);return s.$unknown?void 0:s}else throw Error(`Unrecognizable event type: ${r.headers[":event-type"].value}`)}}Os(RO,"getMessageUnmarshaller");var As,AO=(As=class{constructor({utf8Encoder:t,utf8Decoder:r}){this.eventStreamCodec=new Xa.EventStreamCodec(t,r),this.utfEncoder=t}deserialize(t,r){let n=TO(t);return new Xa.SmithyMessageDecoderStream({messageStream:new Xa.MessageDecoderStream({inputStream:n,decoder:this.eventStreamCodec}),deserializer:RO(r,this.utfEncoder)})}serialize(t,r){return new Xa.MessageEncoderStream({messageStream:new Xa.SmithyMessageEncoderStream({inputStream:t,serializer:r}),encoder:this.eventStreamCodec,includeEndFrame:!0})}},Os(As,"EventStreamMarshaller"),As),nK=Os(e=>new AO(e),"eventStreamSerdeProvider")});var FO=w((toe,kO)=>{var Ol=Object.defineProperty,oK=Object.getOwnPropertyDescriptor,sK=Object.getOwnPropertyNames,iK=Object.prototype.hasOwnProperty,xg=(e,t)=>Ol(e,"name",{value:t,configurable:!0}),aK=(e,t)=>{for(var r in t)Ol(e,r,{get:t[r],enumerable:!0})},cK=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of sK(t))!iK.call(e,o)&&o!==r&&Ol(e,o,{get:()=>t[o],enumerable:!(n=oK(t,o))||n.enumerable});return e},dK=e=>cK(Ol({},"__esModule",{value:!0}),e),NO={};aK(NO,{EventStreamMarshaller:()=>MO,eventStreamSerdeProvider:()=>pK});kO.exports=dK(NO);var uK=IO(),lK=require("stream");async function*DO(e){let t=!1,r=!1,n=new Array;for(e.on("error",o=>{if(t||(t=!0),o)throw o}),e.on("data",o=>{n.push(o)}),e.on("end",()=>{t=!0});!r;){let o=await new Promise(s=>setTimeout(()=>s(n.shift()),0));o&&(yield o),r=t&&n.length===0}}xg(DO,"readabletoIterable");var Is,MO=(Is=class{constructor({utf8Encoder:t,utf8Decoder:r}){this.universalMarshaller=new uK.EventStreamMarshaller({utf8Decoder:r,utf8Encoder:t})}deserialize(t,r){let n=typeof t[Symbol.asyncIterator]=="function"?t:DO(t);return this.universalMarshaller.deserialize(n,r)}serialize(t,r){return lK.Readable.from(this.universalMarshaller.serialize(t,r))}},xg(Is,"EventStreamMarshaller"),Is),pK=xg(e=>new MO(e),"eventStreamSerdeProvider")});var WO=w(Ml=>{"use strict";Object.defineProperty(Ml,"__esModule",{value:!0});Ml.ruleSet=void 0;var zO="required",A="type",Z="rules",Q="conditions",D="fn",M="argv",oe="ref",Qa="assign",Dt="url",Mt="properties",kt="headers",mK=!0,jn="isSet",Un="stringEquals",Tg="aws.parseArn",Ln="arn",Me="booleanEquals",$e="endpoint",re="tree",ne="error",Ns={[zO]:!1,[A]:"String"},UO={[zO]:!0,default:!1,[A]:"Boolean"},Rg={[D]:"not",[M]:[{[D]:jn,[M]:[{[oe]:"Endpoint"}]}]},VO={[oe]:"Endpoint"},Il={[D]:jn,[M]:[{[oe]:"Region"}]},Nl={[D]:"aws.partition",[M]:[{[oe]:"Region"}],[Qa]:"PartitionResult"},Ag={[D]:"not",[M]:[{[D]:Un,[M]:[{[D]:"getAttr",[M]:[{[oe]:"PartitionResult"},"name"]},"aws-iso"]}]},Dg={[D]:"getAttr",[M]:[{[oe]:"PartitionResult"},"name"]},Og={[D]:"not",[M]:[{[D]:Un,[M]:[Dg,"aws-iso-b"]}]},Dl={[D]:"getAttr",[M]:[{[oe]:"PartitionResult"},"supportsFIPS"]},it={},KO={[ne]:"FIPS is enabled but this partition does not support FIPS",[A]:ne},GO={[ne]:"DualStack is enabled but this partition does not support DualStack",[A]:ne},Ig={[ne]:"Invalid ARN: Failed to parse ARN.",[A]:ne},LO={[D]:Me,[M]:[!0,{[D]:"getAttr",[M]:[{[oe]:"PartitionResult"},"supportsDualStack"]}]},jO=[{[oe]:"StreamARN"}],fK=[{[D]:jn,[M]:[VO]}],Ng=[{[Q]:[{[D]:"isValidHostLabel",[M]:[{[D]:"getAttr",[M]:[{[oe]:Ln},"accountId"]},!1]}],[Z]:[{[Q]:[{[D]:"isValidHostLabel",[M]:[{[D]:"getAttr",[M]:[{[oe]:Ln},"region"]},!1]}],[Z]:[{[Q]:[{[D]:Un,[M]:[{[D]:"getAttr",[M]:[{[oe]:Ln},"service"]},"kinesis"]}],[Z]:[{[Q]:[{[D]:"getAttr",[M]:[{[oe]:Ln},"resourceId[0]"],[Qa]:"arnType"},{[D]:"not",[M]:[{[D]:Un,[M]:[{[oe]:"arnType"},""]}]}],[Z]:[{[Q]:[{[D]:Un,[M]:[{[oe]:"arnType"},"stream"]}],[Z]:[{[Q]:[{[D]:Un,[M]:[Dg,"{arn#partition}"]}],[Z]:[{[Q]:[{[D]:jn,[M]:[{[oe]:"OperationType"}]}],[Z]:[{[Q]:[{[D]:Me,[M]:[{[oe]:"UseFIPS"},!0]},{[D]:Me,[M]:[{[oe]:"UseDualStack"},!0]}],[Z]:[{[Q]:[{[D]:Me,[M]:[Dl,!0]}],[Z]:[{[Q]:[{[D]:Me,[M]:[{[D]:"getAttr",[M]:[{[oe]:"PartitionResult"},"supportsDualStack"]},!0]}],[Z]:[{[$e]:{[Dt]:"https://{arn#accountId}.{OperationType}-kinesis-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",[Mt]:{},[kt]:{}},[A]:$e}],[A]:re},{[ne]:"DualStack is enabled, but this partition does not support DualStack.",[A]:ne}],[A]:re},{[ne]:"FIPS is enabled, but this partition does not support FIPS.",[A]:ne}],[A]:re},{[Q]:[{[D]:Me,[M]:[{[oe]:"UseFIPS"},!0]}],[Z]:[{[Q]:[{[D]:Me,[M]:[Dl,!0]}],[Z]:[{[$e]:{[Dt]:"https://{arn#accountId}.{OperationType}-kinesis-fips.{Region}.{PartitionResult#dnsSuffix}",[Mt]:{},[kt]:{}},[A]:$e}],[A]:re},KO],[A]:re},{[Q]:[{[D]:Me,[M]:[{[oe]:"UseDualStack"},!0]}],[Z]:[{[Q]:[{[D]:Me,[M]:[{[D]:"getAttr",[M]:[{[oe]:"PartitionResult"},"supportsDualStack"]},!0]}],[Z]:[{[$e]:{[Dt]:"https://{arn#accountId}.{OperationType}-kinesis.{Region}.{PartitionResult#dualStackDnsSuffix}",[Mt]:{},[kt]:{}},[A]:$e}],[A]:re},GO],[A]:re},{[$e]:{[Dt]:"https://{arn#accountId}.{OperationType}-kinesis.{Region}.{PartitionResult#dnsSuffix}",[Mt]:{},[kt]:{}},[A]:$e}],[A]:re},{[ne]:"Operation Type is not set. Please contact service team for resolution.",[A]:ne}],[A]:re},{[ne]:"Partition: {arn#partition} from ARN doesn't match with partition name: {PartitionResult#name}.",[A]:ne}],[A]:re},{[ne]:"Invalid ARN: Kinesis ARNs don't support `{arnType}` arn types.",[A]:ne}],[A]:re},{[ne]:"Invalid ARN: No ARN type specified",[A]:ne}],[A]:re},{[ne]:"Invalid ARN: The ARN was not for the Kinesis service, found: {arn#service}.",[A]:ne}],[A]:re},{[ne]:"Invalid ARN: Invalid region.",[A]:ne}],[A]:re},{[ne]:"Invalid ARN: Invalid account id.",[A]:ne}],hK=[{[D]:Me,[M]:[{[oe]:"UseFIPS"},!0]},{[D]:Me,[M]:[{[oe]:"UseDualStack"},!0]}],gK=[{[D]:Me,[M]:[Dl,!0]}],BO=[{[D]:Me,[M]:[{[oe]:"UseFIPS"},!0]}],$O=[{[D]:Me,[M]:[{[oe]:"UseDualStack"},!0]}],HO=[{[oe]:"ConsumerARN"}],qO=[{[oe]:"ResourceARN"}],yK={version:"1.0",parameters:{Region:Ns,UseDualStack:UO,UseFIPS:UO,Endpoint:Ns,StreamARN:Ns,OperationType:Ns,ConsumerARN:Ns,ResourceARN:Ns},[Z]:[{[Q]:[{[D]:jn,[M]:jO},Rg,Il,Nl,Ag,Og],[Z]:[{[Q]:[{[D]:Tg,[M]:jO,[Qa]:Ln}],[Z]:Ng,[A]:re},Ig],[A]:re},{[Q]:[{[D]:jn,[M]:HO},Rg,Il,Nl,Ag,Og],[Z]:[{[Q]:[{[D]:Tg,[M]:HO,[Qa]:Ln}],[Z]:Ng,[A]:re},Ig],[A]:re},{[Q]:[{[D]:jn,[M]:qO},Rg,Il,Nl,Ag,Og],[Z]:[{[Q]:[{[D]:Tg,[M]:qO,[Qa]:Ln}],[Z]:Ng,[A]:re},Ig],[A]:re},{[Q]:fK,[Z]:[{[Q]:BO,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[A]:ne},{[Q]:$O,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[A]:ne},{endpoint:{[Dt]:VO,[Mt]:it,[kt]:it},[A]:$e}],[A]:re},{[Q]:[Il],[Z]:[{[Q]:[Nl],[Z]:[{[Q]:hK,[Z]:[{[Q]:[{[D]:Me,[M]:[mK,Dl]},LO],[Z]:[{endpoint:{[Dt]:"https://kinesis-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",[Mt]:it,[kt]:it},[A]:$e}],[A]:re},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[A]:ne}],[A]:re},{[Q]:BO,[Z]:[{[Q]:gK,[Z]:[{[Q]:[{[D]:Un,[M]:[Dg,"aws-us-gov"]}],endpoint:{[Dt]:"https://kinesis.{Region}.amazonaws.com",[Mt]:it,[kt]:it},[A]:$e},{endpoint:{[Dt]:"https://kinesis-fips.{Region}.{PartitionResult#dnsSuffix}",[Mt]:it,[kt]:it},[A]:$e}],[A]:re},KO],[A]:re},{[Q]:$O,[Z]:[{[Q]:[LO],[Z]:[{endpoint:{[Dt]:"https://kinesis.{Region}.{PartitionResult#dualStackDnsSuffix}",[Mt]:it,[kt]:it},[A]:$e}],[A]:re},GO],[A]:re},{endpoint:{[Dt]:"https://kinesis.{Region}.{PartitionResult#dnsSuffix}",[Mt]:it,[kt]:it},[A]:$e}],[A]:re}],[A]:re},{error:"Invalid Configuration: Missing Region",[A]:ne}]};Ml.ruleSet=yK});var JO=w(kl=>{"use strict";Object.defineProperty(kl,"__esModule",{value:!0});kl.defaultEndpointResolver=void 0;var _K=wo(),Mg=vo(),SK=WO(),EK=new Mg.EndpointCache({size:50,params:["ConsumerARN","Endpoint","OperationType","Region","ResourceARN","StreamARN","UseDualStack","UseFIPS"]}),vK=(e,t={})=>EK.get(e,()=>(0,Mg.resolveEndpoint)(SK.ruleSet,{endpointParams:e,logger:t.logger}));kl.defaultEndpointResolver=vK;Mg.customEndpointFunctions.aws=_K.awsEndpointFunctions});var QO=w(Fl=>{"use strict";Object.defineProperty(Fl,"__esModule",{value:!0});Fl.getRuntimeConfig=void 0;var wK=(Se(),H(Ct)),bK=L(),CK=mr(),YO=Oe(),XO=we(),PK=Kf(),xK=JO(),TK=e=>({apiVersion:"2013-12-02",base64Decoder:e?.base64Decoder??YO.fromBase64,base64Encoder:e?.base64Encoder??YO.toBase64,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??xK.defaultEndpointResolver,extensions:e?.extensions??[],httpAuthSchemeProvider:e?.httpAuthSchemeProvider??PK.defaultKinesisHttpAuthSchemeProvider,httpAuthSchemes:e?.httpAuthSchemes??[{schemeId:"aws.auth#sigv4",identityProvider:t=>t.getIdentityProvider("aws.auth#sigv4"),signer:new wK.AwsSdkSigV4Signer}],logger:e?.logger??new bK.NoOpLogger,serviceId:e?.serviceId??"Kinesis",urlParser:e?.urlParser??CK.parseUrl,utf8Decoder:e?.utf8Decoder??XO.fromUtf8,utf8Encoder:e?.utf8Encoder??XO.toUtf8});Fl.getRuntimeConfig=TK});var nI=w(Ll=>{"use strict";Object.defineProperty(Ll,"__esModule",{value:!0});Ll.getRuntimeConfig=void 0;var RK=(Jo(),H(Wo)),AK=RK.__importDefault(D0()),ZO=(Se(),H(Ct)),OK=QA(),eI=la(),Ul=xt(),IK=FO(),NK=pa(),tI=Jt(),Bn=Cr(),rI=Kr(),DK=ma(),MK=qo(),kK=QO(),FK=L(),UK=ga(),LK=L(),jK=e=>{(0,LK.emitWarningIfUnsupportedVersion)(process.version);let t=(0,UK.resolveDefaultsModeConfig)(e),r=()=>t().then(FK.loadConfigsForDefaultMode),n=(0,kK.getRuntimeConfig)(e);(0,ZO.emitWarningIfUnsupportedVersion)(process.version);let o={profile:e?.profile,logger:n.logger};return{...n,...e,runtime:"node",defaultsMode:t,authSchemePreference:e?.authSchemePreference??(0,Bn.loadConfig)(ZO.NODE_AUTH_SCHEME_PREFERENCE_OPTIONS,o),bodyLengthChecker:e?.bodyLengthChecker??DK.calculateBodyLength,credentialDefaultProvider:e?.credentialDefaultProvider??OK.defaultProvider,defaultUserAgentProvider:e?.defaultUserAgentProvider??(0,eI.createDefaultUserAgentProvider)({serviceId:n.serviceId,clientVersion:AK.default.version}),eventStreamSerdeProvider:e?.eventStreamSerdeProvider??IK.eventStreamSerdeProvider,maxAttempts:e?.maxAttempts??(0,Bn.loadConfig)(tI.NODE_MAX_ATTEMPT_CONFIG_OPTIONS,e),region:e?.region??(0,Bn.loadConfig)(Ul.NODE_REGION_CONFIG_OPTIONS,{...Ul.NODE_REGION_CONFIG_FILE_OPTIONS,...o}),requestHandler:rI.NodeHttp2Handler.create(e?.requestHandler??(async()=>({...await r(),disableConcurrentStreams:!0}))),retryMode:e?.retryMode??(0,Bn.loadConfig)({...tI.NODE_RETRY_MODE_CONFIG_OPTIONS,default:async()=>(await r()).retryMode||MK.DEFAULT_RETRY_MODE},e),sha256:e?.sha256??NK.Hash.bind(null,"sha256"),streamCollector:e?.streamCollector??rI.streamCollector,useDualstackEndpoint:e?.useDualstackEndpoint??(0,Bn.loadConfig)(Ul.NODE_USE_DUALSTACK_ENDPOINT_CONFIG_OPTIONS,o),useFipsEndpoint:e?.useFipsEndpoint??(0,Bn.loadConfig)(Ul.NODE_USE_FIPS_ENDPOINT_CONFIG_OPTIONS,o),userAgentAppId:e?.userAgentAppId??(0,Bn.loadConfig)(eI.NODE_APP_ID_CONFIG_OPTIONS,o)}};Ll.getRuntimeConfig=jK});var uI=w((ioe,dI)=>{var jl=Object.defineProperty,BK=Object.getOwnPropertyDescriptor,$K=Object.getOwnPropertyNames,HK=Object.prototype.hasOwnProperty,Ft=(e,t)=>jl(e,"name",{value:t,configurable:!0}),qK=(e,t)=>{for(var r in t)jl(e,r,{get:t[r],enumerable:!0})},zK=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of $K(t))!HK.call(e,o)&&o!==r&&jl(e,o,{get:()=>t[o],enumerable:!(n=BK(t,o))||n.enumerable});return e},VK=e=>zK(jl({},"__esModule",{value:!0}),e),iI={};qK(iI,{WaiterState:()=>cI,checkExceptions:()=>GK,createWaiter:()=>QK,waiterServiceDefaults:()=>aI});dI.exports=VK(iI);var KK=Ft(e=>new Promise(t=>setTimeout(t,e*1e3)),"sleep"),aI={minDelay:2,maxDelay:120},cI=(e=>(e.ABORTED="ABORTED",e.FAILURE="FAILURE",e.SUCCESS="SUCCESS",e.RETRY="RETRY",e.TIMEOUT="TIMEOUT",e))(cI||{}),GK=Ft(e=>{if(e.state==="ABORTED"){let t=new Error(`${JSON.stringify({...e,reason:"Request was aborted"})}`);throw t.name="AbortError",t}else if(e.state==="TIMEOUT"){let t=new Error(`${JSON.stringify({...e,reason:"Waiter has timed out"})}`);throw t.name="TimeoutError",t}else if(e.state!=="SUCCESS")throw new Error(`${JSON.stringify(e)}`);return e},"checkExceptions"),WK=Ft((e,t,r,n)=>{if(n>r)return t;let o=e*2**(n-1);return JK(e,o)},"exponentialBackoffWithJitter"),JK=Ft((e,t)=>e+Math.random()*(t-e),"randomInRange"),YK=Ft(async({minDelay:e,maxDelay:t,maxWaitTime:r,abortController:n,client:o,abortSignal:s},i,a)=>{let c={},{state:d,reason:l}=await a(o,i);if(l){let g=oI(l);c[g]|=0,c[g]+=1}if(d!=="RETRY")return{state:d,reason:l,observedResponses:c};let u=1,p=Date.now()+r*1e3,h=Math.log(t/e)/Math.log(2)+1;for(;;){if(n?.signal?.aborted||s?.aborted){let b="AbortController signal aborted.";return c[b]|=0,c[b]+=1,{state:"ABORTED",observedResponses:c}}let g=WK(e,t,h,u);if(Date.now()+g*1e3>p)return{state:"TIMEOUT",observedResponses:c};await KK(g);let{state:S,reason:E}=await a(o,i);if(E){let b=oI(E);c[b]|=0,c[b]+=1}if(S!=="RETRY")return{state:S,reason:E,observedResponses:c};u+=1}},"runPolling"),oI=Ft(e=>e?.$responseBodyText?`Deserialization error for body: ${e.$responseBodyText}`:e?.$metadata?.httpStatusCode?e.$response||e.message?`${e.$response.statusCode??e.$metadata.httpStatusCode??"Unknown"}: ${e.message}`:`${e.$metadata.httpStatusCode}: OK`:String(e?.message??JSON.stringify(e)??"Unknown"),"createMessageFromResponse"),XK=Ft(e=>{if(e.maxWaitTime<=0)throw new Error("WaiterConfiguration.maxWaitTime must be greater than 0");if(e.minDelay<=0)throw new Error("WaiterConfiguration.minDelay must be greater than 0");if(e.maxDelay<=0)throw new Error("WaiterConfiguration.maxDelay must be greater than 0");if(e.maxWaitTime<=e.minDelay)throw new Error(`WaiterConfiguration.maxWaitTime [${e.maxWaitTime}] must be greater than WaiterConfiguration.minDelay [${e.minDelay}] for this waiter`);if(e.maxDelay<e.minDelay)throw new Error(`WaiterConfiguration.maxDelay [${e.maxDelay}] must be greater than WaiterConfiguration.minDelay [${e.minDelay}] for this waiter`)},"validateWaiterOptions"),sI=Ft(e=>{let t,r=new Promise(n=>{t=Ft(()=>n({state:"ABORTED"}),"onAbort"),typeof e.addEventListener=="function"?e.addEventListener("abort",t):e.onabort=t});return{clearListener(){typeof e.removeEventListener=="function"&&e.removeEventListener("abort",t)},aborted:r}},"abortTimeout"),QK=Ft(async(e,t,r)=>{let n={...aI,...e};XK(n);let o=[YK(n,t,r)],s=[];if(e.abortSignal){let{aborted:i,clearListener:a}=sI(e.abortSignal);s.push(a),o.push(i)}if(e.abortController?.signal){let{aborted:i,clearListener:a}=sI(e.abortController.signal);s.push(a),o.push(i)}return Promise.race(o).then(i=>{for(let a of s)a();return i})},"createWaiter")});var TN=w((aoe,xN)=>{"use strict";var Bl=Object.defineProperty,ZK=Object.getOwnPropertyDescriptor,eG=Object.getOwnPropertyNames,tG=Object.prototype.hasOwnProperty,m=(e,t)=>Bl(e,"name",{value:t,configurable:!0}),rG=(e,t)=>{for(var r in t)Bl(e,r,{get:t[r],enumerable:!0})},nG=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of eG(t))!tG.call(e,o)&&o!==r&&Bl(e,o,{get:()=>t[o],enumerable:!(n=ZK(t,o))||n.enumerable});return e},oG=e=>nG(Bl({},"__esModule",{value:!0}),e),gI={};rG(gI,{AccessDeniedException:()=>yI,AddTagsToStreamCommand:()=>VI,ConsumerStatus:()=>hG,CreateStreamCommand:()=>KI,DecreaseStreamRetentionPeriodCommand:()=>GI,DeleteResourcePolicyCommand:()=>WI,DeleteStreamCommand:()=>JI,DeregisterStreamConsumerCommand:()=>YI,DescribeLimitsCommand:()=>XI,DescribeStreamCommand:()=>Hl,DescribeStreamConsumerCommand:()=>QI,DescribeStreamSummaryCommand:()=>ZI,DisableEnhancedMonitoringCommand:()=>eN,EnableEnhancedMonitoringCommand:()=>tN,EncryptionType:()=>yG,ExpiredIteratorException:()=>wI,ExpiredNextTokenException:()=>bI,GetRecordsCommand:()=>rN,GetResourcePolicyCommand:()=>nN,GetShardIteratorCommand:()=>oN,IncreaseStreamRetentionPeriodCommand:()=>sN,InternalFailureException:()=>CI,InvalidArgumentException:()=>_I,KMSAccessDeniedException:()=>PI,KMSDisabledException:()=>xI,KMSInvalidStateException:()=>TI,KMSNotFoundException:()=>RI,KMSOptInRequired:()=>AI,KMSThrottlingException:()=>OI,Kinesis:()=>bN,KinesisClient:()=>$l,KinesisServiceException:()=>ve,LimitExceededException:()=>SI,ListShardsCommand:()=>iN,ListStreamConsumersCommand:()=>Ug,ListStreamsCommand:()=>Lg,ListTagsForResourceCommand:()=>aN,ListTagsForStreamCommand:()=>cN,MergeShardsCommand:()=>dN,MetricsName:()=>_G,ProvisionedThroughputExceededException:()=>II,PutRecordCommand:()=>uN,PutRecordsCommand:()=>lN,PutResourcePolicyCommand:()=>pN,RegisterStreamConsumerCommand:()=>mN,RemoveTagsFromStreamCommand:()=>fN,ResourceInUseException:()=>EI,ResourceNotFoundException:()=>vI,ScalingType:()=>wG,ShardFilterType:()=>vG,ShardIteratorType:()=>EG,SplitShardCommand:()=>hN,StartStreamEncryptionCommand:()=>gN,StopStreamEncryptionCommand:()=>yN,StreamMode:()=>gG,StreamStatus:()=>SG,SubscribeToShardCommand:()=>_N,SubscribeToShardEventStream:()=>Fg,SubscribeToShardEventStreamFilterSensitiveLog:()=>bG,SubscribeToShardOutputFilterSensitiveLog:()=>DI,TagResourceCommand:()=>SN,UntagResourceCommand:()=>EN,UpdateShardCountCommand:()=>vN,UpdateStreamModeCommand:()=>wN,ValidationException:()=>NI,__Client:()=>f.Client,paginateListStreamConsumers:()=>I5,paginateListStreams:()=>N5,waitForStreamExists:()=>D5,waitForStreamNotExists:()=>k5,waitUntilStreamExists:()=>M5,waitUntilStreamNotExists:()=>F5});xN.exports=oG(gI);var lI=_i(),sG=Si(),iG=Ei(),pI=Uo(),aG=xt(),Za=(Ue(),H(_o)),cG=Ib(),dG=ta(),B=Pr(),mI=Jt(),fI=Kf(),uG=m(e=>Object.assign(e,{useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"kinesis"}),"resolveClientEndpointParameters"),q={UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}},lG=nI(),hI=ya(),kg=se(),f=L(),pG=m(e=>{let t=e.httpAuthSchemes,r=e.httpAuthSchemeProvider,n=e.credentials;return{setHttpAuthScheme(o){let s=t.findIndex(i=>i.schemeId===o.schemeId);s===-1?t.push(o):t.splice(s,1,o)},httpAuthSchemes(){return t},setHttpAuthSchemeProvider(o){r=o},httpAuthSchemeProvider(){return r},setCredentials(o){n=o},credentials(){return n}}},"getHttpAuthExtensionConfiguration"),mG=m(e=>({httpAuthSchemes:e.httpAuthSchemes(),httpAuthSchemeProvider:e.httpAuthSchemeProvider(),credentials:e.credentials()}),"resolveHttpAuthRuntimeConfig"),fG=m((e,t)=>{let r=Object.assign((0,hI.getAwsRegionExtensionConfiguration)(e),(0,f.getDefaultExtensionConfiguration)(e),(0,kg.getHttpHandlerExtensionConfiguration)(e),pG(e));return t.forEach(n=>n.configure(r)),Object.assign(e,(0,hI.resolveAwsRegionExtensionConfiguration)(r),(0,f.resolveDefaultRuntimeConfig)(r),(0,kg.resolveHttpHandlerRuntimeConfig)(r),mG(r))},"resolveRuntimeExtensions"),Ds,$l=(Ds=class extends f.Client{constructor(...[r]){let n=(0,lG.getRuntimeConfig)(r||{});super(n);_(this,"config");this.initConfig=n;let o=uG(n),s=(0,pI.resolveUserAgentConfig)(o),i=(0,mI.resolveRetryConfig)(s),a=(0,aG.resolveRegionConfig)(i),c=(0,lI.resolveHostHeaderConfig)(a),d=(0,B.resolveEndpointConfig)(c),l=(0,cG.resolveEventStreamSerdeConfig)(d),u=(0,fI.resolveHttpAuthSchemeConfig)(l),p=fG(u,r?.extensions||[]);this.config=p,this.middlewareStack.use((0,pI.getUserAgentPlugin)(this.config)),this.middlewareStack.use((0,mI.getRetryPlugin)(this.config)),this.middlewareStack.use((0,dG.getContentLengthPlugin)(this.config)),this.middlewareStack.use((0,lI.getHostHeaderPlugin)(this.config)),this.middlewareStack.use((0,sG.getLoggerPlugin)(this.config)),this.middlewareStack.use((0,iG.getRecursionDetectionPlugin)(this.config)),this.middlewareStack.use((0,Za.getHttpAuthSchemeEndpointRuleSetPlugin)(this.config,{httpAuthSchemeParametersProvider:fI.defaultKinesisHttpAuthSchemeParametersProvider,identityProviderConfigProvider:m(async h=>new Za.DefaultIdentityProviderConfig({"aws.auth#sigv4":h.credentials}),"identityProviderConfigProvider")})),this.middlewareStack.use((0,Za.getHttpSigningPlugin)(this.config))}destroy(){super.destroy()}},m(Ds,"KinesisClient"),Ds),z=ar(),ee=(Se(),H(Ct)),$n,ve=($n=class extends f.ServiceException{constructor(t){super(t),Object.setPrototypeOf(this,$n.prototype)}},m($n,"KinesisServiceException"),$n),Hn,yI=(Hn=class extends ve{constructor(r){super({name:"AccessDeniedException",$fault:"client",...r});_(this,"name","AccessDeniedException");_(this,"$fault","client");Object.setPrototypeOf(this,Hn.prototype)}},m(Hn,"AccessDeniedException"),Hn),qn,_I=(qn=class extends ve{constructor(r){super({name:"InvalidArgumentException",$fault:"client",...r});_(this,"name","InvalidArgumentException");_(this,"$fault","client");Object.setPrototypeOf(this,qn.prototype)}},m(qn,"InvalidArgumentException"),qn),zn,SI=(zn=class extends ve{constructor(r){super({name:"LimitExceededException",$fault:"client",...r});_(this,"name","LimitExceededException");_(this,"$fault","client");Object.setPrototypeOf(this,zn.prototype)}},m(zn,"LimitExceededException"),zn),Vn,EI=(Vn=class extends ve{constructor(r){super({name:"ResourceInUseException",$fault:"client",...r});_(this,"name","ResourceInUseException");_(this,"$fault","client");Object.setPrototypeOf(this,Vn.prototype)}},m(Vn,"ResourceInUseException"),Vn),Kn,vI=(Kn=class extends ve{constructor(r){super({name:"ResourceNotFoundException",$fault:"client",...r});_(this,"name","ResourceNotFoundException");_(this,"$fault","client");Object.setPrototypeOf(this,Kn.prototype)}},m(Kn,"ResourceNotFoundException"),Kn),hG={ACTIVE:"ACTIVE",CREATING:"CREATING",DELETING:"DELETING"},gG={ON_DEMAND:"ON_DEMAND",PROVISIONED:"PROVISIONED"},yG={KMS:"KMS",NONE:"NONE"},_G={ALL:"ALL",INCOMING_BYTES:"IncomingBytes",INCOMING_RECORDS:"IncomingRecords",ITERATOR_AGE_MILLISECONDS:"IteratorAgeMilliseconds",OUTGOING_BYTES:"OutgoingBytes",OUTGOING_RECORDS:"OutgoingRecords",READ_PROVISIONED_THROUGHPUT_EXCEEDED:"ReadProvisionedThroughputExceeded",WRITE_PROVISIONED_THROUGHPUT_EXCEEDED:"WriteProvisionedThroughputExceeded"},SG={ACTIVE:"ACTIVE",CREATING:"CREATING",DELETING:"DELETING",UPDATING:"UPDATING"},Gn,wI=(Gn=class extends ve{constructor(r){super({name:"ExpiredIteratorException",$fault:"client",...r});_(this,"name","ExpiredIteratorException");_(this,"$fault","client");Object.setPrototypeOf(this,Gn.prototype)}},m(Gn,"ExpiredIteratorException"),Gn),Wn,bI=(Wn=class extends ve{constructor(r){super({name:"ExpiredNextTokenException",$fault:"client",...r});_(this,"name","ExpiredNextTokenException");_(this,"$fault","client");Object.setPrototypeOf(this,Wn.prototype)}},m(Wn,"ExpiredNextTokenException"),Wn),Jn,CI=(Jn=class extends ve{constructor(r){super({name:"InternalFailureException",$fault:"server",...r});_(this,"name","InternalFailureException");_(this,"$fault","server");Object.setPrototypeOf(this,Jn.prototype)}},m(Jn,"InternalFailureException"),Jn),Yn,PI=(Yn=class extends ve{constructor(r){super({name:"KMSAccessDeniedException",$fault:"client",...r});_(this,"name","KMSAccessDeniedException");_(this,"$fault","client");Object.setPrototypeOf(this,Yn.prototype)}},m(Yn,"KMSAccessDeniedException"),Yn),Xn,xI=(Xn=class extends ve{constructor(r){super({name:"KMSDisabledException",$fault:"client",...r});_(this,"name","KMSDisabledException");_(this,"$fault","client");Object.setPrototypeOf(this,Xn.prototype)}},m(Xn,"KMSDisabledException"),Xn),Qn,TI=(Qn=class extends ve{constructor(r){super({name:"KMSInvalidStateException",$fault:"client",...r});_(this,"name","KMSInvalidStateException");_(this,"$fault","client");Object.setPrototypeOf(this,Qn.prototype)}},m(Qn,"KMSInvalidStateException"),Qn),Zn,RI=(Zn=class extends ve{constructor(r){super({name:"KMSNotFoundException",$fault:"client",...r});_(this,"name","KMSNotFoundException");_(this,"$fault","client");Object.setPrototypeOf(this,Zn.prototype)}},m(Zn,"KMSNotFoundException"),Zn),eo,AI=(eo=class extends ve{constructor(r){super({name:"KMSOptInRequired",$fault:"client",...r});_(this,"name","KMSOptInRequired");_(this,"$fault","client");Object.setPrototypeOf(this,eo.prototype)}},m(eo,"KMSOptInRequired"),eo),to,OI=(to=class extends ve{constructor(r){super({name:"KMSThrottlingException",$fault:"client",...r});_(this,"name","KMSThrottlingException");_(this,"$fault","client");Object.setPrototypeOf(this,to.prototype)}},m(to,"KMSThrottlingException"),to),ro,II=(ro=class extends ve{constructor(r){super({name:"ProvisionedThroughputExceededException",$fault:"client",...r});_(this,"name","ProvisionedThroughputExceededException");_(this,"$fault","client");Object.setPrototypeOf(this,ro.prototype)}},m(ro,"ProvisionedThroughputExceededException"),ro),EG={AFTER_SEQUENCE_NUMBER:"AFTER_SEQUENCE_NUMBER",AT_SEQUENCE_NUMBER:"AT_SEQUENCE_NUMBER",AT_TIMESTAMP:"AT_TIMESTAMP",LATEST:"LATEST",TRIM_HORIZON:"TRIM_HORIZON"},vG={AFTER_SHARD_ID:"AFTER_SHARD_ID",AT_LATEST:"AT_LATEST",AT_TIMESTAMP:"AT_TIMESTAMP",AT_TRIM_HORIZON:"AT_TRIM_HORIZON",FROM_TIMESTAMP:"FROM_TIMESTAMP",FROM_TRIM_HORIZON:"FROM_TRIM_HORIZON"},no,NI=(no=class extends ve{constructor(r){super({name:"ValidationException",$fault:"client",...r});_(this,"name","ValidationException");_(this,"$fault","client");Object.setPrototypeOf(this,no.prototype)}},m(no,"ValidationException"),no),Fg;(e=>{e.visit=m((t,r)=>t.SubscribeToShardEvent!==void 0?r.SubscribeToShardEvent(t.SubscribeToShardEvent):t.ResourceNotFoundException!==void 0?r.ResourceNotFoundException(t.ResourceNotFoundException):t.ResourceInUseException!==void 0?r.ResourceInUseException(t.ResourceInUseException):t.KMSDisabledException!==void 0?r.KMSDisabledException(t.KMSDisabledException):t.KMSInvalidStateException!==void 0?r.KMSInvalidStateException(t.KMSInvalidStateException):t.KMSAccessDeniedException!==void 0?r.KMSAccessDeniedException(t.KMSAccessDeniedException):t.KMSNotFoundException!==void 0?r.KMSNotFoundException(t.KMSNotFoundException):t.KMSOptInRequired!==void 0?r.KMSOptInRequired(t.KMSOptInRequired):t.KMSThrottlingException!==void 0?r.KMSThrottlingException(t.KMSThrottlingException):t.InternalFailureException!==void 0?r.InternalFailureException(t.InternalFailureException):r._(t.$unknown[0],t.$unknown[1]),"visit")})(Fg||(Fg={}));var wG={UNIFORM_SCALING:"UNIFORM_SCALING"},bG=m(e=>{if(e.SubscribeToShardEvent!==void 0)return{SubscribeToShardEvent:e.SubscribeToShardEvent};if(e.ResourceNotFoundException!==void 0)return{ResourceNotFoundException:e.ResourceNotFoundException};if(e.ResourceInUseException!==void 0)return{ResourceInUseException:e.ResourceInUseException};if(e.KMSDisabledException!==void 0)return{KMSDisabledException:e.KMSDisabledException};if(e.KMSInvalidStateException!==void 0)return{KMSInvalidStateException:e.KMSInvalidStateException};if(e.KMSAccessDeniedException!==void 0)return{KMSAccessDeniedException:e.KMSAccessDeniedException};if(e.KMSNotFoundException!==void 0)return{KMSNotFoundException:e.KMSNotFoundException};if(e.KMSOptInRequired!==void 0)return{KMSOptInRequired:e.KMSOptInRequired};if(e.KMSThrottlingException!==void 0)return{KMSThrottlingException:e.KMSThrottlingException};if(e.InternalFailureException!==void 0)return{InternalFailureException:e.InternalFailureException};if(e.$unknown!==void 0)return{[e.$unknown[0]]:"UNKNOWN"}},"SubscribeToShardEventStreamFilterSensitiveLog"),DI=m(e=>({...e,...e.EventStream&&{EventStream:"STREAMING_CONTENT"}}),"SubscribeToShardOutputFilterSensitiveLog"),CG=m(async(e,t)=>{let r=$("AddTagsToStream"),n;return n=JSON.stringify((0,f._json)(e)),K(t,r,"/",void 0,n)},"se_AddTagsToStreamCommand"),PG=m(async(e,t)=>{let r=$("CreateStream"),n;return n=JSON.stringify((0,f._json)(e)),K(t,r,"/",void 0,n)},"se_CreateStreamCommand"),xG=m(async(e,t)=>{let r=$("DecreaseStreamRetentionPeriod"),n;return n=JSON.stringify((0,f._json)(e)),K(t,r,"/",void 0,n)},"se_DecreaseStreamRetentionPeriodCommand"),TG=m(async(e,t)=>{let r=$("DeleteResourcePolicy"),n;return n=JSON.stringify((0,f._json)(e)),K(t,r,"/",void 0,n)},"se_DeleteResourcePolicyCommand"),RG=m(async(e,t)=>{let r=$("DeleteStream"),n;return n=JSON.stringify((0,f._json)(e)),K(t,r,"/",void 0,n)},"se_DeleteStreamCommand"),AG=m(async(e,t)=>{let r=$("DeregisterStreamConsumer"),n;return n=JSON.stringify((0,f._json)(e)),K(t,r,"/",void 0,n)},"se_DeregisterStreamConsumerCommand"),OG=m(async(e,t)=>{let r=$("DescribeLimits"),n;return n=JSON.stringify((0,f._json)(e)),K(t,r,"/",void 0,n)},"se_DescribeLimitsCommand"),IG=m(async(e,t)=>{let r=$("DescribeStream"),n;return n=JSON.stringify((0,f._json)(e)),K(t,r,"/",void 0,n)},"se_DescribeStreamCommand"),NG=m(async(e,t)=>{let r=$("DescribeStreamConsumer"),n;return n=JSON.stringify((0,f._json)(e)),K(t,r,"/",void 0,n)},"se_DescribeStreamConsumerCommand"),DG=m(async(e,t)=>{let r=$("DescribeStreamSummary"),n;return n=JSON.stringify((0,f._json)(e)),K(t,r,"/",void 0,n)},"se_DescribeStreamSummaryCommand"),MG=m(async(e,t)=>{let r=$("DisableEnhancedMonitoring"),n;return n=JSON.stringify((0,f._json)(e)),K(t,r,"/",void 0,n)},"se_DisableEnhancedMonitoringCommand"),kG=m(async(e,t)=>{let r=$("EnableEnhancedMonitoring"),n;return n=JSON.stringify((0,f._json)(e)),K(t,r,"/",void 0,n)},"se_EnableEnhancedMonitoringCommand"),FG=m(async(e,t)=>{let r=$("GetRecords"),n;return n=JSON.stringify((0,f._json)(e)),K(t,r,"/",void 0,n)},"se_GetRecordsCommand"),UG=m(async(e,t)=>{let r=$("GetResourcePolicy"),n;return n=JSON.stringify((0,f._json)(e)),K(t,r,"/",void 0,n)},"se_GetResourcePolicyCommand"),LG=m(async(e,t)=>{let r=$("GetShardIterator"),n;return n=JSON.stringify(o5(e,t)),K(t,r,"/",void 0,n)},"se_GetShardIteratorCommand"),jG=m(async(e,t)=>{let r=$("IncreaseStreamRetentionPeriod"),n;return n=JSON.stringify((0,f._json)(e)),K(t,r,"/",void 0,n)},"se_IncreaseStreamRetentionPeriodCommand"),BG=m(async(e,t)=>{let r=$("ListShards"),n;return n=JSON.stringify(s5(e,t)),K(t,r,"/",void 0,n)},"se_ListShardsCommand"),$G=m(async(e,t)=>{let r=$("ListStreamConsumers"),n;return n=JSON.stringify(i5(e,t)),K(t,r,"/",void 0,n)},"se_ListStreamConsumersCommand"),HG=m(async(e,t)=>{let r=$("ListStreams"),n;return n=JSON.stringify((0,f._json)(e)),K(t,r,"/",void 0,n)},"se_ListStreamsCommand"),qG=m(async(e,t)=>{let r=$("ListTagsForResource"),n;return n=JSON.stringify((0,f._json)(e)),K(t,r,"/",void 0,n)},"se_ListTagsForResourceCommand"),zG=m(async(e,t)=>{let r=$("ListTagsForStream"),n;return n=JSON.stringify((0,f._json)(e)),K(t,r,"/",void 0,n)},"se_ListTagsForStreamCommand"),VG=m(async(e,t)=>{let r=$("MergeShards"),n;return n=JSON.stringify((0,f._json)(e)),K(t,r,"/",void 0,n)},"se_MergeShardsCommand"),KG=m(async(e,t)=>{let r=$("PutRecord"),n;return n=JSON.stringify(a5(e,t)),K(t,r,"/",void 0,n)},"se_PutRecordCommand"),GG=m(async(e,t)=>{let r=$("PutRecords"),n;return n=JSON.stringify(c5(e,t)),K(t,r,"/",void 0,n)},"se_PutRecordsCommand"),WG=m(async(e,t)=>{let r=$("PutResourcePolicy"),n;return n=JSON.stringify((0,f._json)(e)),K(t,r,"/",void 0,n)},"se_PutResourcePolicyCommand"),JG=m(async(e,t)=>{let r=$("RegisterStreamConsumer"),n;return n=JSON.stringify((0,f._json)(e)),K(t,r,"/",void 0,n)},"se_RegisterStreamConsumerCommand"),YG=m(async(e,t)=>{let r=$("RemoveTagsFromStream"),n;return n=JSON.stringify((0,f._json)(e)),K(t,r,"/",void 0,n)},"se_RemoveTagsFromStreamCommand"),XG=m(async(e,t)=>{let r=$("SplitShard"),n;return n=JSON.stringify((0,f._json)(e)),K(t,r,"/",void 0,n)},"se_SplitShardCommand"),QG=m(async(e,t)=>{let r=$("StartStreamEncryption"),n;return n=JSON.stringify((0,f._json)(e)),K(t,r,"/",void 0,n)},"se_StartStreamEncryptionCommand"),ZG=m(async(e,t)=>{let r=$("StopStreamEncryption"),n;return n=JSON.stringify((0,f._json)(e)),K(t,r,"/",void 0,n)},"se_StopStreamEncryptionCommand"),eW=m(async(e,t)=>{let r=$("SubscribeToShard"),n;return n=JSON.stringify(m5(e,t)),K(t,r,"/",void 0,n)},"se_SubscribeToShardCommand"),tW=m(async(e,t)=>{let r=$("TagResource"),n;return n=JSON.stringify((0,f._json)(e)),K(t,r,"/",void 0,n)},"se_TagResourceCommand"),rW=m(async(e,t)=>{let r=$("UntagResource"),n;return n=JSON.stringify((0,f._json)(e)),K(t,r,"/",void 0,n)},"se_UntagResourceCommand"),nW=m(async(e,t)=>{let r=$("UpdateShardCount"),n;return n=JSON.stringify((0,f._json)(e)),K(t,r,"/",void 0,n)},"se_UpdateShardCountCommand"),oW=m(async(e,t)=>{let r=$("UpdateStreamMode"),n;return n=JSON.stringify((0,f._json)(e)),K(t,r,"/",void 0,n)},"se_UpdateStreamModeCommand"),sW=m(async(e,t)=>e.statusCode>=300?V(e,t):(await(0,f.collectBody)(e.body,t),{$metadata:I(e)}),"de_AddTagsToStreamCommand"),iW=m(async(e,t)=>e.statusCode>=300?V(e,t):(await(0,f.collectBody)(e.body,t),{$metadata:I(e)}),"de_CreateStreamCommand"),aW=m(async(e,t)=>e.statusCode>=300?V(e,t):(await(0,f.collectBody)(e.body,t),{$metadata:I(e)}),"de_DecreaseStreamRetentionPeriodCommand"),cW=m(async(e,t)=>e.statusCode>=300?V(e,t):(await(0,f.collectBody)(e.body,t),{$metadata:I(e)}),"de_DeleteResourcePolicyCommand"),dW=m(async(e,t)=>e.statusCode>=300?V(e,t):(await(0,f.collectBody)(e.body,t),{$metadata:I(e)}),"de_DeleteStreamCommand"),uW=m(async(e,t)=>e.statusCode>=300?V(e,t):(await(0,f.collectBody)(e.body,t),{$metadata:I(e)}),"de_DeregisterStreamConsumerCommand"),lW=m(async(e,t)=>{if(e.statusCode>=300)return V(e,t);let r=await(0,ee.parseJsonBody)(e.body,t),n={};return n=(0,f._json)(r),{$metadata:I(e),...n}},"de_DescribeLimitsCommand"),pW=m(async(e,t)=>{if(e.statusCode>=300)return V(e,t);let r=await(0,ee.parseJsonBody)(e.body,t),n={};return n=y5(r,t),{$metadata:I(e),...n}},"de_DescribeStreamCommand"),mW=m(async(e,t)=>{if(e.statusCode>=300)return V(e,t);let r=await(0,ee.parseJsonBody)(e.body,t),n={};return n=g5(r,t),{$metadata:I(e),...n}},"de_DescribeStreamConsumerCommand"),fW=m(async(e,t)=>{if(e.statusCode>=300)return V(e,t);let r=await(0,ee.parseJsonBody)(e.body,t),n={};return n=_5(r,t),{$metadata:I(e),...n}},"de_DescribeStreamSummaryCommand"),hW=m(async(e,t)=>{if(e.statusCode>=300)return V(e,t);let r=await(0,ee.parseJsonBody)(e.body,t),n={};return n=(0,f._json)(r),{$metadata:I(e),...n}},"de_DisableEnhancedMonitoringCommand"),gW=m(async(e,t)=>{if(e.statusCode>=300)return V(e,t);let r=await(0,ee.parseJsonBody)(e.body,t),n={};return n=(0,f._json)(r),{$metadata:I(e),...n}},"de_EnableEnhancedMonitoringCommand"),yW=m(async(e,t)=>{if(e.statusCode>=300)return V(e,t);let r=await(0,ee.parseJsonBody)(e.body,t),n={};return n=S5(r,t),{$metadata:I(e),...n}},"de_GetRecordsCommand"),_W=m(async(e,t)=>{if(e.statusCode>=300)return V(e,t);let r=await(0,ee.parseJsonBody)(e.body,t),n={};return n=(0,f._json)(r),{$metadata:I(e),...n}},"de_GetResourcePolicyCommand"),SW=m(async(e,t)=>{if(e.statusCode>=300)return V(e,t);let r=await(0,ee.parseJsonBody)(e.body,t),n={};return n=(0,f._json)(r),{$metadata:I(e),...n}},"de_GetShardIteratorCommand"),EW=m(async(e,t)=>e.statusCode>=300?V(e,t):(await(0,f.collectBody)(e.body,t),{$metadata:I(e)}),"de_IncreaseStreamRetentionPeriodCommand"),vW=m(async(e,t)=>{if(e.statusCode>=300)return V(e,t);let r=await(0,ee.parseJsonBody)(e.body,t),n={};return n=(0,f._json)(r),{$metadata:I(e),...n}},"de_ListShardsCommand"),wW=m(async(e,t)=>{if(e.statusCode>=300)return V(e,t);let r=await(0,ee.parseJsonBody)(e.body,t),n={};return n=E5(r,t),{$metadata:I(e),...n}},"de_ListStreamConsumersCommand"),bW=m(async(e,t)=>{if(e.statusCode>=300)return V(e,t);let r=await(0,ee.parseJsonBody)(e.body,t),n={};return n=v5(r,t),{$metadata:I(e),...n}},"de_ListStreamsCommand"),CW=m(async(e,t)=>{if(e.statusCode>=300)return V(e,t);let r=await(0,ee.parseJsonBody)(e.body,t),n={};return n=(0,f._json)(r),{$metadata:I(e),...n}},"de_ListTagsForResourceCommand"),PW=m(async(e,t)=>{if(e.statusCode>=300)return V(e,t);let r=await(0,ee.parseJsonBody)(e.body,t),n={};return n=(0,f._json)(r),{$metadata:I(e),...n}},"de_ListTagsForStreamCommand"),xW=m(async(e,t)=>e.statusCode>=300?V(e,t):(await(0,f.collectBody)(e.body,t),{$metadata:I(e)}),"de_MergeShardsCommand"),TW=m(async(e,t)=>{if(e.statusCode>=300)return V(e,t);let r=await(0,ee.parseJsonBody)(e.body,t),n={};return n=(0,f._json)(r),{$metadata:I(e),...n}},"de_PutRecordCommand"),RW=m(async(e,t)=>{if(e.statusCode>=300)return V(e,t);let r=await(0,ee.parseJsonBody)(e.body,t),n={};return n=(0,f._json)(r),{$metadata:I(e),...n}},"de_PutRecordsCommand"),AW=m(async(e,t)=>e.statusCode>=300?V(e,t):(await(0,f.collectBody)(e.body,t),{$metadata:I(e)}),"de_PutResourcePolicyCommand"),OW=m(async(e,t)=>{if(e.statusCode>=300)return V(e,t);let r=await(0,ee.parseJsonBody)(e.body,t),n={};return n=b5(r,t),{$metadata:I(e),...n}},"de_RegisterStreamConsumerCommand"),IW=m(async(e,t)=>e.statusCode>=300?V(e,t):(await(0,f.collectBody)(e.body,t),{$metadata:I(e)}),"de_RemoveTagsFromStreamCommand"),NW=m(async(e,t)=>e.statusCode>=300?V(e,t):(await(0,f.collectBody)(e.body,t),{$metadata:I(e)}),"de_SplitShardCommand"),DW=m(async(e,t)=>e.statusCode>=300?V(e,t):(await(0,f.collectBody)(e.body,t),{$metadata:I(e)}),"de_StartStreamEncryptionCommand"),MW=m(async(e,t)=>e.statusCode>=300?V(e,t):(await(0,f.collectBody)(e.body,t),{$metadata:I(e)}),"de_StopStreamEncryptionCommand"),kW=m(async(e,t)=>{if(e.statusCode>=300)return V(e,t);let r={EventStream:GW(e.body,t)};return{$metadata:I(e),...r}},"de_SubscribeToShardCommand"),FW=m(async(e,t)=>e.statusCode>=300?V(e,t):(await(0,f.collectBody)(e.body,t),{$metadata:I(e)}),"de_TagResourceCommand"),UW=m(async(e,t)=>e.statusCode>=300?V(e,t):(await(0,f.collectBody)(e.body,t),{$metadata:I(e)}),"de_UntagResourceCommand"),LW=m(async(e,t)=>{if(e.statusCode>=300)return V(e,t);let r=await(0,ee.parseJsonBody)(e.body,t),n={};return n=(0,f._json)(r),{$metadata:I(e),...n}},"de_UpdateShardCountCommand"),jW=m(async(e,t)=>e.statusCode>=300?V(e,t):(await(0,f.collectBody)(e.body,t),{$metadata:I(e)}),"de_UpdateStreamModeCommand"),V=m(async(e,t)=>{let r={...e,body:await(0,ee.parseJsonErrorBody)(e.body,t)},n=(0,ee.loadRestJsonErrorCode)(e,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.kinesis#AccessDeniedException":throw await BW(r,t);case"InvalidArgumentException":case"com.amazonaws.kinesis#InvalidArgumentException":throw await qW(r,t);case"LimitExceededException":case"com.amazonaws.kinesis#LimitExceededException":throw await zW(r,t);case"ResourceInUseException":case"com.amazonaws.kinesis#ResourceInUseException":throw await $I(r,t);case"ResourceNotFoundException":case"com.amazonaws.kinesis#ResourceNotFoundException":throw await HI(r,t);case"ExpiredIteratorException":case"com.amazonaws.kinesis#ExpiredIteratorException":throw await $W(r,t);case"InternalFailureException":case"com.amazonaws.kinesis#InternalFailureException":throw await MI(r,t);case"KMSAccessDeniedException":case"com.amazonaws.kinesis#KMSAccessDeniedException":throw await kI(r,t);case"KMSDisabledException":case"com.amazonaws.kinesis#KMSDisabledException":throw await FI(r,t);case"KMSInvalidStateException":case"com.amazonaws.kinesis#KMSInvalidStateException":throw await UI(r,t);case"KMSNotFoundException":case"com.amazonaws.kinesis#KMSNotFoundException":throw await LI(r,t);case"KMSOptInRequired":case"com.amazonaws.kinesis#KMSOptInRequired":throw await jI(r,t);case"KMSThrottlingException":case"com.amazonaws.kinesis#KMSThrottlingException":throw await BI(r,t);case"ProvisionedThroughputExceededException":case"com.amazonaws.kinesis#ProvisionedThroughputExceededException":throw await VW(r,t);case"ExpiredNextTokenException":case"com.amazonaws.kinesis#ExpiredNextTokenException":throw await HW(r,t);case"ValidationException":case"com.amazonaws.kinesis#ValidationException":throw await KW(r,t);default:let o=r.body;return A5({output:e,parsedBody:o,errorCode:n})}},"de_CommandError"),BW=m(async(e,t)=>{let r=e.body,n=(0,f._json)(r),o=new yI({$metadata:I(e),...n});return(0,f.decorateServiceException)(o,r)},"de_AccessDeniedExceptionRes"),$W=m(async(e,t)=>{let r=e.body,n=(0,f._json)(r),o=new wI({$metadata:I(e),...n});return(0,f.decorateServiceException)(o,r)},"de_ExpiredIteratorExceptionRes"),HW=m(async(e,t)=>{let r=e.body,n=(0,f._json)(r),o=new bI({$metadata:I(e),...n});return(0,f.decorateServiceException)(o,r)},"de_ExpiredNextTokenExceptionRes"),MI=m(async(e,t)=>{let r=e.body,n=(0,f._json)(r),o=new CI({$metadata:I(e),...n});return(0,f.decorateServiceException)(o,r)},"de_InternalFailureExceptionRes"),qW=m(async(e,t)=>{let r=e.body,n=(0,f._json)(r),o=new _I({$metadata:I(e),...n});return(0,f.decorateServiceException)(o,r)},"de_InvalidArgumentExceptionRes"),kI=m(async(e,t)=>{let r=e.body,n=(0,f._json)(r),o=new PI({$metadata:I(e),...n});return(0,f.decorateServiceException)(o,r)},"de_KMSAccessDeniedExceptionRes"),FI=m(async(e,t)=>{let r=e.body,n=(0,f._json)(r),o=new xI({$metadata:I(e),...n});return(0,f.decorateServiceException)(o,r)},"de_KMSDisabledExceptionRes"),UI=m(async(e,t)=>{let r=e.body,n=(0,f._json)(r),o=new TI({$metadata:I(e),...n});return(0,f.decorateServiceException)(o,r)},"de_KMSInvalidStateExceptionRes"),LI=m(async(e,t)=>{let r=e.body,n=(0,f._json)(r),o=new RI({$metadata:I(e),...n});return(0,f.decorateServiceException)(o,r)},"de_KMSNotFoundExceptionRes"),jI=m(async(e,t)=>{let r=e.body,n=(0,f._json)(r),o=new AI({$metadata:I(e),...n});return(0,f.decorateServiceException)(o,r)},"de_KMSOptInRequiredRes"),BI=m(async(e,t)=>{let r=e.body,n=(0,f._json)(r),o=new OI({$metadata:I(e),...n});return(0,f.decorateServiceException)(o,r)},"de_KMSThrottlingExceptionRes"),zW=m(async(e,t)=>{let r=e.body,n=(0,f._json)(r),o=new SI({$metadata:I(e),...n});return(0,f.decorateServiceException)(o,r)},"de_LimitExceededExceptionRes"),VW=m(async(e,t)=>{let r=e.body,n=(0,f._json)(r),o=new II({$metadata:I(e),...n});return(0,f.decorateServiceException)(o,r)},"de_ProvisionedThroughputExceededExceptionRes"),$I=m(async(e,t)=>{let r=e.body,n=(0,f._json)(r),o=new EI({$metadata:I(e),...n});return(0,f.decorateServiceException)(o,r)},"de_ResourceInUseExceptionRes"),HI=m(async(e,t)=>{let r=e.body,n=(0,f._json)(r),o=new vI({$metadata:I(e),...n});return(0,f.decorateServiceException)(o,r)},"de_ResourceNotFoundExceptionRes"),KW=m(async(e,t)=>{let r=e.body,n=(0,f._json)(r),o=new NI({$metadata:I(e),...n});return(0,f.decorateServiceException)(o,r)},"de_ValidationExceptionRes"),GW=m((e,t)=>t.eventStreamMarshaller.deserialize(e,async r=>r.SubscribeToShardEvent!=null?{SubscribeToShardEvent:await n5(r.SubscribeToShardEvent,t)}:r.ResourceNotFoundException!=null?{ResourceNotFoundException:await r5(r.ResourceNotFoundException,t)}:r.ResourceInUseException!=null?{ResourceInUseException:await t5(r.ResourceInUseException,t)}:r.KMSDisabledException!=null?{KMSDisabledException:await YW(r.KMSDisabledException,t)}:r.KMSInvalidStateException!=null?{KMSInvalidStateException:await XW(r.KMSInvalidStateException,t)}:r.KMSAccessDeniedException!=null?{KMSAccessDeniedException:await JW(r.KMSAccessDeniedException,t)}:r.KMSNotFoundException!=null?{KMSNotFoundException:await QW(r.KMSNotFoundException,t)}:r.KMSOptInRequired!=null?{KMSOptInRequired:await ZW(r.KMSOptInRequired,t)}:r.KMSThrottlingException!=null?{KMSThrottlingException:await e5(r.KMSThrottlingException,t)}:r.InternalFailureException!=null?{InternalFailureException:await WW(r.InternalFailureException,t)}:{$unknown:r}),"de_SubscribeToShardEventStream"),WW=m(async(e,t)=>{let r={...e,body:await(0,ee.parseJsonBody)(e.body,t)};return MI(r,t)},"de_InternalFailureException_event"),JW=m(async(e,t)=>{let r={...e,body:await(0,ee.parseJsonBody)(e.body,t)};return kI(r,t)},"de_KMSAccessDeniedException_event"),YW=m(async(e,t)=>{let r={...e,body:await(0,ee.parseJsonBody)(e.body,t)};return FI(r,t)},"de_KMSDisabledException_event"),XW=m(async(e,t)=>{let r={...e,body:await(0,ee.parseJsonBody)(e.body,t)};return UI(r,t)},"de_KMSInvalidStateException_event"),QW=m(async(e,t)=>{let r={...e,body:await(0,ee.parseJsonBody)(e.body,t)};return LI(r,t)},"de_KMSNotFoundException_event"),ZW=m(async(e,t)=>{let r={...e,body:await(0,ee.parseJsonBody)(e.body,t)};return jI(r,t)},"de_KMSOptInRequired_event"),e5=m(async(e,t)=>{let r={...e,body:await(0,ee.parseJsonBody)(e.body,t)};return BI(r,t)},"de_KMSThrottlingException_event"),t5=m(async(e,t)=>{let r={...e,body:await(0,ee.parseJsonBody)(e.body,t)};return $I(r,t)},"de_ResourceInUseException_event"),r5=m(async(e,t)=>{let r={...e,body:await(0,ee.parseJsonBody)(e.body,t)};return HI(r,t)},"de_ResourceNotFoundException_event"),n5=m(async(e,t)=>{let r={},n=await(0,ee.parseJsonBody)(e.body,t);return Object.assign(r,R5(n,t)),r},"de_SubscribeToShardEvent_event"),o5=m((e,t)=>(0,f.take)(e,{ShardId:[],ShardIteratorType:[],StartingSequenceNumber:[],StreamARN:[],StreamName:[],Timestamp:m(r=>r.getTime()/1e3,"Timestamp")}),"se_GetShardIteratorInput"),s5=m((e,t)=>(0,f.take)(e,{ExclusiveStartShardId:[],MaxResults:[],NextToken:[],ShardFilter:m(r=>l5(r,t),"ShardFilter"),StreamARN:[],StreamCreationTimestamp:m(r=>r.getTime()/1e3,"StreamCreationTimestamp"),StreamName:[]}),"se_ListShardsInput"),i5=m((e,t)=>(0,f.take)(e,{MaxResults:[],NextToken:[],StreamARN:[],StreamCreationTimestamp:m(r=>r.getTime()/1e3,"StreamCreationTimestamp")}),"se_ListStreamConsumersInput"),a5=m((e,t)=>(0,f.take)(e,{Data:t.base64Encoder,ExplicitHashKey:[],PartitionKey:[],SequenceNumberForOrdering:[],StreamARN:[],StreamName:[]}),"se_PutRecordInput"),c5=m((e,t)=>(0,f.take)(e,{Records:m(r=>u5(r,t),"Records"),StreamARN:[],StreamName:[]}),"se_PutRecordsInput"),d5=m((e,t)=>(0,f.take)(e,{Data:t.base64Encoder,ExplicitHashKey:[],PartitionKey:[]}),"se_PutRecordsRequestEntry"),u5=m((e,t)=>e.filter(r=>r!=null).map(r=>d5(r,t)),"se_PutRecordsRequestEntryList"),l5=m((e,t)=>(0,f.take)(e,{ShardId:[],Timestamp:m(r=>r.getTime()/1e3,"Timestamp"),Type:[]}),"se_ShardFilter"),p5=m((e,t)=>(0,f.take)(e,{SequenceNumber:[],Timestamp:m(r=>r.getTime()/1e3,"Timestamp"),Type:[]}),"se_StartingPosition"),m5=m((e,t)=>(0,f.take)(e,{ConsumerARN:[],ShardId:[],StartingPosition:m(r=>p5(r,t),"StartingPosition")}),"se_SubscribeToShardInput"),qI=m((e,t)=>(0,f.take)(e,{ConsumerARN:f.expectString,ConsumerCreationTimestamp:m(r=>(0,f.expectNonNull)((0,f.parseEpochTimestamp)((0,f.expectNumber)(r))),"ConsumerCreationTimestamp"),ConsumerName:f.expectString,ConsumerStatus:f.expectString}),"de_Consumer"),f5=m((e,t)=>(0,f.take)(e,{ConsumerARN:f.expectString,ConsumerCreationTimestamp:m(r=>(0,f.expectNonNull)((0,f.parseEpochTimestamp)((0,f.expectNumber)(r))),"ConsumerCreationTimestamp"),ConsumerName:f.expectString,ConsumerStatus:f.expectString,StreamARN:f.expectString}),"de_ConsumerDescription"),h5=m((e,t)=>(e||[]).filter(n=>n!=null).map(n=>qI(n,t)),"de_ConsumerList"),g5=m((e,t)=>(0,f.take)(e,{ConsumerDescription:m(r=>f5(r,t),"ConsumerDescription")}),"de_DescribeStreamConsumerOutput"),y5=m((e,t)=>(0,f.take)(e,{StreamDescription:m(r=>C5(r,t),"StreamDescription")}),"de_DescribeStreamOutput"),_5=m((e,t)=>(0,f.take)(e,{StreamDescriptionSummary:m(r=>P5(r,t),"StreamDescriptionSummary")}),"de_DescribeStreamSummaryOutput"),S5=m((e,t)=>(0,f.take)(e,{ChildShards:f._json,MillisBehindLatest:f.expectLong,NextShardIterator:f.expectString,Records:m(r=>zI(r,t),"Records")}),"de_GetRecordsOutput"),E5=m((e,t)=>(0,f.take)(e,{Consumers:m(r=>h5(r,t),"Consumers"),NextToken:f.expectString}),"de_ListStreamConsumersOutput"),v5=m((e,t)=>(0,f.take)(e,{HasMoreStreams:f.expectBoolean,NextToken:f.expectString,StreamNames:f._json,StreamSummaries:m(r=>T5(r,t),"StreamSummaries")}),"de_ListStreamsOutput"),w5=m((e,t)=>(0,f.take)(e,{ApproximateArrivalTimestamp:m(r=>(0,f.expectNonNull)((0,f.parseEpochTimestamp)((0,f.expectNumber)(r))),"ApproximateArrivalTimestamp"),Data:t.base64Decoder,EncryptionType:f.expectString,PartitionKey:f.expectString,SequenceNumber:f.expectString}),"de__Record"),zI=m((e,t)=>(e||[]).filter(n=>n!=null).map(n=>w5(n,t)),"de_RecordList"),b5=m((e,t)=>(0,f.take)(e,{Consumer:m(r=>qI(r,t),"Consumer")}),"de_RegisterStreamConsumerOutput"),C5=m((e,t)=>(0,f.take)(e,{EncryptionType:f.expectString,EnhancedMonitoring:f._json,HasMoreShards:f.expectBoolean,KeyId:f.expectString,RetentionPeriodHours:f.expectInt32,Shards:f._json,StreamARN:f.expectString,StreamCreationTimestamp:m(r=>(0,f.expectNonNull)((0,f.parseEpochTimestamp)((0,f.expectNumber)(r))),"StreamCreationTimestamp"),StreamModeDetails:f._json,StreamName:f.expectString,StreamStatus:f.expectString}),"de_StreamDescription"),P5=m((e,t)=>(0,f.take)(e,{ConsumerCount:f.expectInt32,EncryptionType:f.expectString,EnhancedMonitoring:f._json,KeyId:f.expectString,OpenShardCount:f.expectInt32,RetentionPeriodHours:f.expectInt32,StreamARN:f.expectString,StreamCreationTimestamp:m(r=>(0,f.expectNonNull)((0,f.parseEpochTimestamp)((0,f.expectNumber)(r))),"StreamCreationTimestamp"),StreamModeDetails:f._json,StreamName:f.expectString,StreamStatus:f.expectString}),"de_StreamDescriptionSummary"),x5=m((e,t)=>(0,f.take)(e,{StreamARN:f.expectString,StreamCreationTimestamp:m(r=>(0,f.expectNonNull)((0,f.parseEpochTimestamp)((0,f.expectNumber)(r))),"StreamCreationTimestamp"),StreamModeDetails:f._json,StreamName:f.expectString,StreamStatus:f.expectString}),"de_StreamSummary"),T5=m((e,t)=>(e||[]).filter(n=>n!=null).map(n=>x5(n,t)),"de_StreamSummaryList"),R5=m((e,t)=>(0,f.take)(e,{ChildShards:f._json,ContinuationSequenceNumber:f.expectString,MillisBehindLatest:f.expectLong,Records:m(r=>zI(r,t),"Records")}),"de_SubscribeToShardEvent"),I=m(e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),"deserializeMetadata"),A5=(0,f.withBaseException)(ve),K=m(async(e,t,r,n,o)=>{let{hostname:s,protocol:i="https",port:a,path:c}=await e.endpoint(),d={protocol:i,hostname:s,port:a,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+r:c+r,headers:t};return n!==void 0&&(d.hostname=n),o!==void 0&&(d.body=o),new kg.HttpRequest(d)},"buildHttpRpcRequest");function $(e){return{"content-type":"application/x-amz-json-1.1","x-amz-target":`Kinesis_20131202.${e}`}}m($,"sharedHeaders");var Ms,VI=(Ms=class extends f.Command.classBuilder().ep({...q,OperationType:{type:"staticContextParams",value:"control"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(t,r,n,o){return[(0,z.getSerdePlugin)(n,this.serialize,this.deserialize),(0,B.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("Kinesis_20131202","AddTagsToStream",{}).n("KinesisClient","AddTagsToStreamCommand").f(void 0,void 0).ser(CG).de(sW).build(){},m(Ms,"AddTagsToStreamCommand"),Ms),ks,KI=(ks=class extends f.Command.classBuilder().ep(q).m(function(t,r,n,o){return[(0,z.getSerdePlugin)(n,this.serialize,this.deserialize),(0,B.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("Kinesis_20131202","CreateStream",{}).n("KinesisClient","CreateStreamCommand").f(void 0,void 0).ser(PG).de(iW).build(){},m(ks,"CreateStreamCommand"),ks),Fs,GI=(Fs=class extends f.Command.classBuilder().ep({...q,OperationType:{type:"staticContextParams",value:"control"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(t,r,n,o){return[(0,z.getSerdePlugin)(n,this.serialize,this.deserialize),(0,B.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("Kinesis_20131202","DecreaseStreamRetentionPeriod",{}).n("KinesisClient","DecreaseStreamRetentionPeriodCommand").f(void 0,void 0).ser(xG).de(aW).build(){},m(Fs,"DecreaseStreamRetentionPeriodCommand"),Fs),Us,WI=(Us=class extends f.Command.classBuilder().ep({...q,OperationType:{type:"staticContextParams",value:"control"},ResourceARN:{type:"contextParams",name:"ResourceARN"}}).m(function(t,r,n,o){return[(0,z.getSerdePlugin)(n,this.serialize,this.deserialize),(0,B.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("Kinesis_20131202","DeleteResourcePolicy",{}).n("KinesisClient","DeleteResourcePolicyCommand").f(void 0,void 0).ser(TG).de(cW).build(){},m(Us,"DeleteResourcePolicyCommand"),Us),Ls,JI=(Ls=class extends f.Command.classBuilder().ep({...q,OperationType:{type:"staticContextParams",value:"control"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(t,r,n,o){return[(0,z.getSerdePlugin)(n,this.serialize,this.deserialize),(0,B.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("Kinesis_20131202","DeleteStream",{}).n("KinesisClient","DeleteStreamCommand").f(void 0,void 0).ser(RG).de(dW).build(){},m(Ls,"DeleteStreamCommand"),Ls),js,YI=(js=class extends f.Command.classBuilder().ep({...q,OperationType:{type:"staticContextParams",value:"control"},ConsumerARN:{type:"contextParams",name:"ConsumerARN"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(t,r,n,o){return[(0,z.getSerdePlugin)(n,this.serialize,this.deserialize),(0,B.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("Kinesis_20131202","DeregisterStreamConsumer",{}).n("KinesisClient","DeregisterStreamConsumerCommand").f(void 0,void 0).ser(AG).de(uW).build(){},m(js,"DeregisterStreamConsumerCommand"),js),Bs,XI=(Bs=class extends f.Command.classBuilder().ep(q).m(function(t,r,n,o){return[(0,z.getSerdePlugin)(n,this.serialize,this.deserialize),(0,B.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("Kinesis_20131202","DescribeLimits",{}).n("KinesisClient","DescribeLimitsCommand").f(void 0,void 0).ser(OG).de(lW).build(){},m(Bs,"DescribeLimitsCommand"),Bs),$s,Hl=($s=class extends f.Command.classBuilder().ep({...q,OperationType:{type:"staticContextParams",value:"control"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(t,r,n,o){return[(0,z.getSerdePlugin)(n,this.serialize,this.deserialize),(0,B.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("Kinesis_20131202","DescribeStream",{}).n("KinesisClient","DescribeStreamCommand").f(void 0,void 0).ser(IG).de(pW).build(){},m($s,"DescribeStreamCommand"),$s),Hs,QI=(Hs=class extends f.Command.classBuilder().ep({...q,OperationType:{type:"staticContextParams",value:"control"},ConsumerARN:{type:"contextParams",name:"ConsumerARN"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(t,r,n,o){return[(0,z.getSerdePlugin)(n,this.serialize,this.deserialize),(0,B.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("Kinesis_20131202","DescribeStreamConsumer",{}).n("KinesisClient","DescribeStreamConsumerCommand").f(void 0,void 0).ser(NG).de(mW).build(){},m(Hs,"DescribeStreamConsumerCommand"),Hs),qs,ZI=(qs=class extends f.Command.classBuilder().ep({...q,OperationType:{type:"staticContextParams",value:"control"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(t,r,n,o){return[(0,z.getSerdePlugin)(n,this.serialize,this.deserialize),(0,B.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("Kinesis_20131202","DescribeStreamSummary",{}).n("KinesisClient","DescribeStreamSummaryCommand").f(void 0,void 0).ser(DG).de(fW).build(){},m(qs,"DescribeStreamSummaryCommand"),qs),zs,eN=(zs=class extends f.Command.classBuilder().ep({...q,OperationType:{type:"staticContextParams",value:"control"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(t,r,n,o){return[(0,z.getSerdePlugin)(n,this.serialize,this.deserialize),(0,B.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("Kinesis_20131202","DisableEnhancedMonitoring",{}).n("KinesisClient","DisableEnhancedMonitoringCommand").f(void 0,void 0).ser(MG).de(hW).build(){},m(zs,"DisableEnhancedMonitoringCommand"),zs),Vs,tN=(Vs=class extends f.Command.classBuilder().ep({...q,OperationType:{type:"staticContextParams",value:"control"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(t,r,n,o){return[(0,z.getSerdePlugin)(n,this.serialize,this.deserialize),(0,B.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("Kinesis_20131202","EnableEnhancedMonitoring",{}).n("KinesisClient","EnableEnhancedMonitoringCommand").f(void 0,void 0).ser(kG).de(gW).build(){},m(Vs,"EnableEnhancedMonitoringCommand"),Vs),Ks,rN=(Ks=class extends f.Command.classBuilder().ep({...q,OperationType:{type:"staticContextParams",value:"data"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(t,r,n,o){return[(0,z.getSerdePlugin)(n,this.serialize,this.deserialize),(0,B.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("Kinesis_20131202","GetRecords",{}).n("KinesisClient","GetRecordsCommand").f(void 0,void 0).ser(FG).de(yW).build(){},m(Ks,"GetRecordsCommand"),Ks),Gs,nN=(Gs=class extends f.Command.classBuilder().ep({...q,OperationType:{type:"staticContextParams",value:"control"},ResourceARN:{type:"contextParams",name:"ResourceARN"}}).m(function(t,r,n,o){return[(0,z.getSerdePlugin)(n,this.serialize,this.deserialize),(0,B.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("Kinesis_20131202","GetResourcePolicy",{}).n("KinesisClient","GetResourcePolicyCommand").f(void 0,void 0).ser(UG).de(_W).build(){},m(Gs,"GetResourcePolicyCommand"),Gs),Ws,oN=(Ws=class extends f.Command.classBuilder().ep({...q,OperationType:{type:"staticContextParams",value:"data"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(t,r,n,o){return[(0,z.getSerdePlugin)(n,this.serialize,this.deserialize),(0,B.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("Kinesis_20131202","GetShardIterator",{}).n("KinesisClient","GetShardIteratorCommand").f(void 0,void 0).ser(LG).de(SW).build(){},m(Ws,"GetShardIteratorCommand"),Ws),Js,sN=(Js=class extends f.Command.classBuilder().ep({...q,OperationType:{type:"staticContextParams",value:"control"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(t,r,n,o){return[(0,z.getSerdePlugin)(n,this.serialize,this.deserialize),(0,B.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("Kinesis_20131202","IncreaseStreamRetentionPeriod",{}).n("KinesisClient","IncreaseStreamRetentionPeriodCommand").f(void 0,void 0).ser(jG).de(EW).build(){},m(Js,"IncreaseStreamRetentionPeriodCommand"),Js),Ys,iN=(Ys=class extends f.Command.classBuilder().ep({...q,OperationType:{type:"staticContextParams",value:"control"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(t,r,n,o){return[(0,z.getSerdePlugin)(n,this.serialize,this.deserialize),(0,B.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("Kinesis_20131202","ListShards",{}).n("KinesisClient","ListShardsCommand").f(void 0,void 0).ser(BG).de(vW).build(){},m(Ys,"ListShardsCommand"),Ys),Xs,Ug=(Xs=class extends f.Command.classBuilder().ep({...q,OperationType:{type:"staticContextParams",value:"control"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(t,r,n,o){return[(0,z.getSerdePlugin)(n,this.serialize,this.deserialize),(0,B.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("Kinesis_20131202","ListStreamConsumers",{}).n("KinesisClient","ListStreamConsumersCommand").f(void 0,void 0).ser($G).de(wW).build(){},m(Xs,"ListStreamConsumersCommand"),Xs),Qs,Lg=(Qs=class extends f.Command.classBuilder().ep(q).m(function(t,r,n,o){return[(0,z.getSerdePlugin)(n,this.serialize,this.deserialize),(0,B.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("Kinesis_20131202","ListStreams",{}).n("KinesisClient","ListStreamsCommand").f(void 0,void 0).ser(HG).de(bW).build(){},m(Qs,"ListStreamsCommand"),Qs),Zs,aN=(Zs=class extends f.Command.classBuilder().ep({...q,OperationType:{type:"staticContextParams",value:"control"},ResourceARN:{type:"contextParams",name:"ResourceARN"}}).m(function(t,r,n,o){return[(0,z.getSerdePlugin)(n,this.serialize,this.deserialize),(0,B.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("Kinesis_20131202","ListTagsForResource",{}).n("KinesisClient","ListTagsForResourceCommand").f(void 0,void 0).ser(qG).de(CW).build(){},m(Zs,"ListTagsForResourceCommand"),Zs),ei,cN=(ei=class extends f.Command.classBuilder().ep({...q,OperationType:{type:"staticContextParams",value:"control"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(t,r,n,o){return[(0,z.getSerdePlugin)(n,this.serialize,this.deserialize),(0,B.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("Kinesis_20131202","ListTagsForStream",{}).n("KinesisClient","ListTagsForStreamCommand").f(void 0,void 0).ser(zG).de(PW).build(){},m(ei,"ListTagsForStreamCommand"),ei),ti,dN=(ti=class extends f.Command.classBuilder().ep({...q,OperationType:{type:"staticContextParams",value:"control"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(t,r,n,o){return[(0,z.getSerdePlugin)(n,this.serialize,this.deserialize),(0,B.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("Kinesis_20131202","MergeShards",{}).n("KinesisClient","MergeShardsCommand").f(void 0,void 0).ser(VG).de(xW).build(){},m(ti,"MergeShardsCommand"),ti),ri,uN=(ri=class extends f.Command.classBuilder().ep({...q,OperationType:{type:"staticContextParams",value:"data"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(t,r,n,o){return[(0,z.getSerdePlugin)(n,this.serialize,this.deserialize),(0,B.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("Kinesis_20131202","PutRecord",{}).n("KinesisClient","PutRecordCommand").f(void 0,void 0).ser(KG).de(TW).build(){},m(ri,"PutRecordCommand"),ri),ni,lN=(ni=class extends f.Command.classBuilder().ep({...q,OperationType:{type:"staticContextParams",value:"data"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(t,r,n,o){return[(0,z.getSerdePlugin)(n,this.serialize,this.deserialize),(0,B.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("Kinesis_20131202","PutRecords",{}).n("KinesisClient","PutRecordsCommand").f(void 0,void 0).ser(GG).de(RW).build(){},m(ni,"PutRecordsCommand"),ni),oi,pN=(oi=class extends f.Command.classBuilder().ep({...q,OperationType:{type:"staticContextParams",value:"control"},ResourceARN:{type:"contextParams",name:"ResourceARN"}}).m(function(t,r,n,o){return[(0,z.getSerdePlugin)(n,this.serialize,this.deserialize),(0,B.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("Kinesis_20131202","PutResourcePolicy",{}).n("KinesisClient","PutResourcePolicyCommand").f(void 0,void 0).ser(WG).de(AW).build(){},m(oi,"PutResourcePolicyCommand"),oi),si,mN=(si=class extends f.Command.classBuilder().ep({...q,OperationType:{type:"staticContextParams",value:"control"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(t,r,n,o){return[(0,z.getSerdePlugin)(n,this.serialize,this.deserialize),(0,B.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("Kinesis_20131202","RegisterStreamConsumer",{}).n("KinesisClient","RegisterStreamConsumerCommand").f(void 0,void 0).ser(JG).de(OW).build(){},m(si,"RegisterStreamConsumerCommand"),si),ii,fN=(ii=class extends f.Command.classBuilder().ep({...q,OperationType:{type:"staticContextParams",value:"control"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(t,r,n,o){return[(0,z.getSerdePlugin)(n,this.serialize,this.deserialize),(0,B.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("Kinesis_20131202","RemoveTagsFromStream",{}).n("KinesisClient","RemoveTagsFromStreamCommand").f(void 0,void 0).ser(YG).de(IW).build(){},m(ii,"RemoveTagsFromStreamCommand"),ii),ai,hN=(ai=class extends f.Command.classBuilder().ep({...q,OperationType:{type:"staticContextParams",value:"control"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(t,r,n,o){return[(0,z.getSerdePlugin)(n,this.serialize,this.deserialize),(0,B.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("Kinesis_20131202","SplitShard",{}).n("KinesisClient","SplitShardCommand").f(void 0,void 0).ser(XG).de(NW).build(){},m(ai,"SplitShardCommand"),ai),ci,gN=(ci=class extends f.Command.classBuilder().ep({...q,OperationType:{type:"staticContextParams",value:"control"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(t,r,n,o){return[(0,z.getSerdePlugin)(n,this.serialize,this.deserialize),(0,B.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("Kinesis_20131202","StartStreamEncryption",{}).n("KinesisClient","StartStreamEncryptionCommand").f(void 0,void 0).ser(QG).de(DW).build(){},m(ci,"StartStreamEncryptionCommand"),ci),di,yN=(di=class extends f.Command.classBuilder().ep({...q,OperationType:{type:"staticContextParams",value:"control"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(t,r,n,o){return[(0,z.getSerdePlugin)(n,this.serialize,this.deserialize),(0,B.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("Kinesis_20131202","StopStreamEncryption",{}).n("KinesisClient","StopStreamEncryptionCommand").f(void 0,void 0).ser(ZG).de(MW).build(){},m(di,"StopStreamEncryptionCommand"),di),ui,_N=(ui=class extends f.Command.classBuilder().ep({...q,OperationType:{type:"staticContextParams",value:"data"},ConsumerARN:{type:"contextParams",name:"ConsumerARN"}}).m(function(t,r,n,o){return[(0,z.getSerdePlugin)(n,this.serialize,this.deserialize),(0,B.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("Kinesis_20131202","SubscribeToShard",{eventStream:{output:!0}}).n("KinesisClient","SubscribeToShardCommand").f(void 0,DI).ser(eW).de(kW).build(){},m(ui,"SubscribeToShardCommand"),ui),li,SN=(li=class extends f.Command.classBuilder().ep({...q,OperationType:{type:"staticContextParams",value:"control"},ResourceARN:{type:"contextParams",name:"ResourceARN"}}).m(function(t,r,n,o){return[(0,z.getSerdePlugin)(n,this.serialize,this.deserialize),(0,B.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("Kinesis_20131202","TagResource",{}).n("KinesisClient","TagResourceCommand").f(void 0,void 0).ser(tW).de(FW).build(){},m(li,"TagResourceCommand"),li),pi,EN=(pi=class extends f.Command.classBuilder().ep({...q,OperationType:{type:"staticContextParams",value:"control"},ResourceARN:{type:"contextParams",name:"ResourceARN"}}).m(function(t,r,n,o){return[(0,z.getSerdePlugin)(n,this.serialize,this.deserialize),(0,B.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("Kinesis_20131202","UntagResource",{}).n("KinesisClient","UntagResourceCommand").f(void 0,void 0).ser(rW).de(UW).build(){},m(pi,"UntagResourceCommand"),pi),mi,vN=(mi=class extends f.Command.classBuilder().ep({...q,OperationType:{type:"staticContextParams",value:"control"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(t,r,n,o){return[(0,z.getSerdePlugin)(n,this.serialize,this.deserialize),(0,B.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("Kinesis_20131202","UpdateShardCount",{}).n("KinesisClient","UpdateShardCountCommand").f(void 0,void 0).ser(nW).de(LW).build(){},m(mi,"UpdateShardCountCommand"),mi),fi,wN=(fi=class extends f.Command.classBuilder().ep({...q,OperationType:{type:"staticContextParams",value:"control"},StreamARN:{type:"contextParams",name:"StreamARN"}}).m(function(t,r,n,o){return[(0,z.getSerdePlugin)(n,this.serialize,this.deserialize),(0,B.getEndpointPlugin)(n,t.getEndpointParameterInstructions())]}).s("Kinesis_20131202","UpdateStreamMode",{}).n("KinesisClient","UpdateStreamModeCommand").f(void 0,void 0).ser(oW).de(jW).build(){},m(fi,"UpdateStreamModeCommand"),fi),O5={AddTagsToStreamCommand:VI,CreateStreamCommand:KI,DecreaseStreamRetentionPeriodCommand:GI,DeleteResourcePolicyCommand:WI,DeleteStreamCommand:JI,DeregisterStreamConsumerCommand:YI,DescribeLimitsCommand:XI,DescribeStreamCommand:Hl,DescribeStreamConsumerCommand:QI,DescribeStreamSummaryCommand:ZI,DisableEnhancedMonitoringCommand:eN,EnableEnhancedMonitoringCommand:tN,GetRecordsCommand:rN,GetResourcePolicyCommand:nN,GetShardIteratorCommand:oN,IncreaseStreamRetentionPeriodCommand:sN,ListShardsCommand:iN,ListStreamConsumersCommand:Ug,ListStreamsCommand:Lg,ListTagsForResourceCommand:aN,ListTagsForStreamCommand:cN,MergeShardsCommand:dN,PutRecordCommand:uN,PutRecordsCommand:lN,PutResourcePolicyCommand:pN,RegisterStreamConsumerCommand:mN,RemoveTagsFromStreamCommand:fN,SplitShardCommand:hN,StartStreamEncryptionCommand:gN,StopStreamEncryptionCommand:yN,SubscribeToShardCommand:_N,TagResourceCommand:SN,UntagResourceCommand:EN,UpdateShardCountCommand:vN,UpdateStreamModeCommand:wN},hi,bN=(hi=class extends $l{},m(hi,"Kinesis"),hi);(0,f.createAggregatedClient)(O5,bN);var I5=(0,Za.createPaginator)($l,Ug,"NextToken","NextToken","MaxResults"),N5=(0,Za.createPaginator)($l,Lg,"NextToken","NextToken","Limit"),Ut=uI(),CN=m(async(e,t)=>{let r;try{let n=await e.send(new Hl(t));r=n;try{if(m(()=>n.StreamDescription.StreamStatus,"returnComparator")()==="ACTIVE")return{state:Ut.WaiterState.SUCCESS,reason:r}}catch{}}catch(n){r=n}return{state:Ut.WaiterState.RETRY,reason:r}},"checkState"),D5=m(async(e,t)=>{let r={minDelay:10,maxDelay:120};return(0,Ut.createWaiter)({...r,...e},t,CN)},"waitForStreamExists"),M5=m(async(e,t)=>{let r={minDelay:10,maxDelay:120},n=await(0,Ut.createWaiter)({...r,...e},t,CN);return(0,Ut.checkExceptions)(n)},"waitUntilStreamExists"),PN=m(async(e,t)=>{let r;try{r=await e.send(new Hl(t))}catch(n){if(r=n,n.name&&n.name=="ResourceNotFoundException")return{state:Ut.WaiterState.SUCCESS,reason:r}}return{state:Ut.WaiterState.RETRY,reason:r}},"checkState"),k5=m(async(e,t)=>{let r={minDelay:10,maxDelay:120};return(0,Ut.createWaiter)({...r,...e},t,PN)},"waitForStreamNotExists"),F5=m(async(e,t)=>{let r={minDelay:10,maxDelay:120},n=await(0,Ut.createWaiter)({...r,...e},t,PN);return(0,Ut.checkExceptions)(n)},"waitUntilStreamNotExists")});var B5={};ct(B5,{lambdaHandler:()=>L5});module.exports=H(B5);var zl=v(cy());var ql=v(TN()),U5=new ql.KinesisClient({region:process.env.AWS_REGION});function RN(e){if(!e.detail)throw new Error("Invalid EventBridge event: missing detail");return e}function jg(e){return e.eventType==="run_intent"&&e.runId&&e.agentId&&e.orgId}function AN(e){return e.eventType==="resume_intent"&&e.runId&&e.agentId&&e.orgId&&e.hilResponse}async function ON(e){let t=process.env.KINESIS_STREAM_NAME;if(!t)throw new Error("KINESIS_STREAM_NAME environment variable not set");let r=new TextEncoder().encode(JSON.stringify(e)),n=new ql.PutRecordCommand({StreamName:t,Data:r,PartitionKey:e.runId});try{await U5.send(n),console.log(`Published event to Kinesis: ${e.eventType} for run ${e.runId}`)}catch(o){throw console.error("Failed to publish to Kinesis:",o),o}}function IN(e,t,r,n,o,s,i){return{eventType:e,runId:t,agentId:r,orgId:n,timestamp:new Date().toISOString(),status:o,data:s,error:i}}function NN(){return{nodeEnv:process.env.NODE_ENV||"dev",agentsCoreApiUrl:process.env.AGENTS_CORE_API_URL,connectHubApiUrl:process.env.CONNECT_HUB_API_URL,kinesisStreamName:process.env.KINESIS_STREAM_NAME}}function DN(e,t){throw console.error(`Error in ${t}:`,e),e}var L5=async(e,t)=>{console.log("AgentEnrichment lambda triggered:",JSON.stringify(e,null,2));try{let r=RN(e),{detail:n}=r,o=NN();if(!o.agentsCoreApiUrl)throw new Error("AGENTS_CORE_API_URL environment variable not set");if(!jg(n)&&!AN(n))throw new Error(`Unsupported event type: ${n.eventType}`);let s=new zl.Configuration({basePath:o.agentsCoreApiUrl}),i=new zl.ApprovalsApi(s);console.log(`Retrieving agent metadata for agent: ${n.agentId}`);let a=await j5(n.agentId,i),c;jg(n)?c={...n,agentMetadata:a}:c={...n,agentMetadata:a};let d=IN(`enriched_${n.eventType}`,n.runId,n.agentId,n.orgId,"started",{enrichedEvent:c});return await ON(d),console.log(`Successfully enriched and published event for run: ${n.runId}`),c}catch(r){DN(r,"AgentEnrichment")}};async function j5(e,t){try{let r={agentId:e,name:`Agent ${e}`,description:`Agent description for ${e}`,type:"digital_employee",capabilities:["email_processing","knowledge_retrieval"],config:{maxTokens:4e3,temperature:.7}};return console.log("Retrieved agent metadata:",r),r}catch(r){return console.error(`Failed to retrieve agent metadata for ${e}:`,r),{agentId:e,name:"Unknown Agent",description:"Agent metadata could not be retrieved",type:"digital_employee",capabilities:[],config:{}}}}0&&(module.exports={lambdaHandler});
//# sourceMappingURL=handler.js.map
